{"remainingRequest":"/Users/lee/Desktop/github/mall-project/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/lee/Desktop/github/mall-project/node_modules/ts-loader/index.js??ref--13-2!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-3!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lee/Desktop/github/mall-project/src/pages/mall/productDetailsPage/productDetailsPage.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/lee/Desktop/github/mall-project/src/pages/mall/productDetailsPage/productDetailsPage.vue","mtime":1572526750218},{"path":"/Users/lee/Desktop/github/mall-project/src/sfc.d.ts","mtime":1571064527934},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/tslib/tslib.d.ts","mtime":1560261193267},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/index.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/vue.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/options.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/vnode.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/plugin.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vuex/types/index.d.ts","mtime":1560261210230},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vuex/types/vue.d.ts","mtime":1560261210230},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vuex/types/helpers.d.ts","mtime":1560261210230},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/ts-md5/dist/md5.d.ts","mtime":1570451758001},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/index.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/app.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/common.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/page.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/uni.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/vue.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/html5plus/plus.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@types/webpack-env/index.d.ts","mtime":1563798348579},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.esnext.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2016.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es5.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.core.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.collection.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.generator.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.iterable.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.symbol.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.promise.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.proxy.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.reflect.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.symbol.wellknown.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2016.array.include.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.object.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.sharedmemory.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.string.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.intl.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.typedarrays.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.asyncgenerator.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.asynciterable.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.promise.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.regexp.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.intl.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.array.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.object.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.string.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.symbol.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.esnext.bigint.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.esnext.intl.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.dom.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.dom.iterable.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.scripthost.d.ts","mtime":1571070287305},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/tslib/tslib.d.ts","mtime":1560261193267},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/index.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/src/common/utils/util.ts","mtime":1572526719364},{"path":"/Users/lee/Desktop/github/mall-project/src/common/config/api.ts","mtime":1571067057590},{"path":"/Users/lee/Desktop/github/mall-project/src/components/i-past/i-past.vue","mtime":1572178023700},{"path":"/Users/lee/Desktop/github/mall-project/src/components/i-show/i-show.vue","mtime":1569678197472},{"path":"/Users/lee/Desktop/github/mall-project/src/components/i-rule/i-rule.vue","mtime":1564919239133},{"path":"/Users/lee/Desktop/github/mall-project/src/components/i-popup/i-popup.vue","mtime":1572079491396},{"path":"/Users/lee/Desktop/github/mall-project/src/components/product-table/product-table.vue","mtime":1572110610608},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1560261191357},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/ts-loader/index.js","mtime":1560261210667},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js","mtime":1563798333387},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":1563798331564}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"/Users/lee/Desktop/github/mall-project/node_modules/@babel/runtime/regenerator\"));\n\nvar _vue = _interopRequireDefault(require(\"vue\"));\n\nvar _util = require(\"@/common/utils/util\");\n\nvar _api = require(\"@/common/config/api\");\n\nvar _iPast = _interopRequireDefault(require(\"@/components/i-past/i-past.vue\"));\n\nvar _iShow = _interopRequireDefault(require(\"@/components/i-show/i-show.vue\"));\n\nvar _iRule = _interopRequireDefault(require(\"@/components/i-rule/i-rule.vue\"));\n\nvar _iPopup = _interopRequireDefault(require(\"@/components/i-popup/i-popup.vue\"));\n\nvar _productTable = _interopRequireDefault(require(\"@/components/product-table/product-table.vue\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar socketOpen = false;\nvar socketMsgQueue = [];\n\nvar _default = _vue.default.extend({\n  components: {\n    iPast: _iPast.default,\n    iShow: _iShow.default,\n    iRule: _iRule.default,\n    iPopup: _iPopup.default,\n    productTable: _productTable.default\n  },\n  data: function data() {\n    return {\n      indicatorDots: true,\n      autoplay: true,\n      interval: 5000,\n      duration: 500,\n      circular: true,\n      indicatorActiveColor: \"#fe7f00\",\n      disabled: false,\n      swiper: [],\n      productID: \"\",\n      orderID: \"\",\n      product: \"\",\n      num: \"1\",\n      pageID: 1,\n      pageSize: 10,\n      hasPastNext: false,\n      hasOrderNext: false,\n      width: 0,\n      activeDetail: \"\",\n      activeShow: false,\n      active: [],\n      activeType: 0,\n      tabIndex: 0,\n      pastList: [],\n      showList: [],\n      ruleList: \"\",\n      show: false,\n      label: [\"零风险\", \"正品承诺\", \"极速发货\", \"公平公正\"],\n      tab: [\"往期成交\", \"分享晒单\", \"竞拍规则\"],\n      src: \"/static/icon_experience.png\",\n      leading: \"/static/icon/icon_leading.png\",\n      activeID: \"\",\n      Price: \"\",\n      msgID: \"\",\n      msgType: \"\",\n      timer: 0,\n      newCurrent: \"\",\n      newCurrentBidder: \"\",\n      buttonsList: [],\n      price: \"\",\n      lastBills: [],\n      timerDurationTitle: \"\",\n      currSignups: \"\",\n      maxSignups: \"\",\n      signups: \"\",\n      seqSignups: \"\",\n      allBills: \"0\",\n      myBills: \"0\",\n      seqBills: \"0\",\n      seqBillsShow: false,\n      seq: \"\",\n      MyBills: \"\",\n      SeqBills: \"0\",\n      Signups: \"\",\n      SeqSignups: \"0\",\n      mySeqBills: \"0\",\n      UserID: \"\",\n      tapbtn: \"\",\n      BillStat: \"\",\n      newPrice: \"\",\n      newBill: \"\",\n      newNick: \"\",\n      newFace: \"\",\n      newCity: \"\",\n      times: \"\",\n      seqTime: new Date() // 初始Date时间\n\n    };\n  },\n  onLoad: function onLoad(options) {\n    this.activeID = options.activeID;\n    var windowWidth = uni.getSystemInfoSync().windowWidth;\n    this.width = windowWidth;\n  },\n  onShow: function onShow() {\n    this.UserID = uni.getStorageSync(\"UserInfo\").ID;\n    this.websocket();\n    this.getActiveByID();\n    this.getPastTransactionsList();\n  },\n  onHide: function onHide() {\n    uni.closeSocket();\n  },\n  onUnload: function onUnload() {\n    uni.hideToast();\n    uni.closeSocket();\n    uni.onSocketClose(function (res) {\n      console.log(\"WebSocket 已关闭！\");\n    });\n  },\n  onPullDownRefresh: function onPullDownRefresh() {\n    uni.onSocketClose(function (res) {\n      console.log(\"WebSocket 已关闭！\");\n    });\n    this.getActiveByID();\n  },\n  onReachBottom: function onReachBottom() {\n    switch (this.tabIndex) {\n      case 0:\n        if (!this.hasPastNext) {\n          this.pageID++;\n          this.getPastTransactionsList();\n        }\n\n        break;\n\n      case 1:\n        if (!this.hasOrderNext) {\n          this.pageID++;\n          this.getOrderDryingList();\n        }\n\n        break;\n    }\n  },\n  onShareAppMessage: function onShareAppMessage(e) {\n    return (0, _util.onShareAppMessage)(e);\n  },\n  methods: {\n    // 获取活动详情\n    getActiveByID: function getActiveByID() {\n      var _this = this;\n\n      var ActiveID = this.activeID;\n      var data = {\n        ActiveID: ActiveID\n      };\n      (0, _util.request)(_api.GetActiveByID, data).then(function (res) {\n        _this.activities(res.ActiveDetail);\n      });\n    },\n    // 选项卡\n    tabClick: function tabClick(index) {\n      this.tabIndex = index;\n      console.log(this.pageID);\n\n      switch (index) {\n        case 0:\n          this.pageID = 1;\n          this.hasPastNext = false;\n          this.getPastTransactionsList();\n          break;\n\n        case 1:\n          this.pageID = 1;\n          this.hasOrderNext = false;\n          this.getOrderDryingList();\n          break;\n      }\n    },\n    // 往期成交列表\n    getPastTransactionsList: function getPastTransactionsList() {\n      var _this2 = this;\n\n      var ActiveID = this.activeID;\n      var PageID = this.pageID;\n      var PageSize = this.pageSize;\n      var data = {\n        ActiveID: ActiveID,\n        PageID: PageID,\n        PageSize: PageSize\n      };\n      (0, _util.request)(_api.PastTransactionsListGet, data).then(function (res) {\n        if (PageID === 1) _this2.pastList = [];\n        _this2.pastList = _this2.pastList.concat(res.OrderList);\n\n        _this2.pastList.map(function (item) {\n          item.percentage = ((item.OrderPrimeCost - item.OrderMoneys) / item.OrderPrimeCost * 100).toFixed(2);\n          item.CreatedTime = (0, _util.formatTime)(new Date(item.Created));\n          item.UserNick = decodeURIComponent(item.UserNick);\n        });\n\n        if (res.PageCount <= PageID) {\n          _this2.hasPastNext = true;\n        }\n      });\n    },\n    // 获取用户晒单列表\n    getOrderDryingList: function getOrderDryingList() {\n      var _this3 = this;\n\n      var ProductID = this.productID;\n      var PageID = this.pageID;\n      var PageSize = this.pageSize;\n      var data = {\n        ProductID: ProductID,\n        PageID: PageID,\n        PageSize: PageSize\n      };\n      (0, _util.request)(_api.OrderDryingListGet, data).then(function (res) {\n        if (PageID === 1) _this3.showList = [];\n        _this3.showList = _this3.showList.concat(res.OrderList);\n\n        _this3.showList.map(function (item) {\n          item.UserNick = decodeURIComponent(item.UserNick);\n          item.SendGoodsDateTime = (0, _util.formatTime)(new Date(item.SendGoodsDate));\n        });\n\n        if (res.PageCount <= PageID) {\n          _this3.hasOrderNext = true;\n        }\n      });\n    },\n    change: function change(val) {\n      console.log(val);\n      this.num = val;\n    },\n    hidePopup: function () {\n      var _hidePopup = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee(e) {\n        var nexActive;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.t0 = e;\n                _context.next = _context.t0 === \"参与下一期\" ? 3 : 10;\n                break;\n\n              case 3:\n                _context.next = 5;\n                return this.getNextActive();\n\n              case 5:\n                nexActive = _context.sent;\n                this.activities(nexActive);\n                uni.closeSocket();\n                this.websocket();\n                return _context.abrupt(\"break\", 11);\n\n              case 10:\n                this.show = !this.show;\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function hidePopup(_x) {\n        return _hidePopup.apply(this, arguments);\n      }\n\n      return hidePopup;\n    }(),\n    // 获取下一期活动\n    getNextActive: function getNextActive() {\n      var _this4 = this;\n\n      return new Promise(function (sesolve, reject) {\n        var ActiveID = _this4.activeID;\n        var data = {\n          ActiveID: ActiveID\n        };\n        (0, _util.request)(_api.NextActiveGet, data).then(function (res) {\n          console.log(res);\n          sesolve(res.NexActive);\n        });\n      });\n    },\n    // 处理活动内容\n    activities: function activities(res) {\n      this.swiper = res.ProductPicList;\n      this.Price = res.ProductPrice;\n      this.activeDetail = res;\n      this.active = res.Active;\n      this.activeShow = true;\n      this.activeType = res.Active.ActiveType;\n      this.activeID = res.Active.ID;\n      this.productID = res.ID;\n    },\n    tolowerShow: function tolowerShow(e) {\n      console.log(\"tolowerShow\", e);\n    },\n    // 全部记录\n    allActivePath: function allActivePath() {\n      var activeID = this.activeID;\n      (0, _util.navigateTo)(\"../activeBilList/activeBilList?activeID=\" + activeID);\n    },\n    // 我的出价记录\n    myActivePath: function myActivePath() {\n      console.log(this.activeID);\n      var activeID = this.activeID;\n      var userID = uni.getStorageSync(\"UserInfo\").ID;\n\n      if (!userID) {\n        var content = \"你暂未登录，请点击确定去登录！\";\n        (0, _util.defaultShowModal)(content).then(function (res) {\n          if (res.confirm) {\n            console.log(\"用户点击确定\");\n            (0, _util.navigateTo)(\"../../ucenter/login/login\");\n          } else if (res.cancel) {\n            console.log(\"用户点击取消\");\n          }\n        });\n      } else {\n        (0, _util.navigateTo)(\"../activeBilList/activeBilList?activeID=\" + activeID + \"&userID=\" + userID);\n      }\n    },\n    // 产品详情\n    productDetailsUparsePath: function productDetailsUparsePath() {\n      var productID = this.productID;\n      (0, _util.navigateTo)(\"../productDetailsUparse/productDetailsUparse?productID=\" + productID);\n    },\n    websocket: function websocket() {\n      var _this5 = this;\n\n      uni.connectSocket({\n        url: \"wss://websocket.tengpaisc.com\"\n      });\n      uni.onSocketOpen(function (res) {\n        console.log(\"WebSocket连接已打开！\");\n        socketOpen = true;\n\n        for (var i = 0; i < socketMsgQueue.length; i++) {\n          _this5.sendSocketMessage(socketMsgQueue[i]);\n        }\n\n        socketMsgQueue = [];\n\n        _this5.msgSubscribe();\n\n        _this5.reqLogin();\n\n        _this5.onSocketMessage();\n      });\n      uni.onSocketError(function (res) {\n        console.log(res);\n        console.log(\"WebSocket连接打开失败，请检查！\"); // 断线调用函数\n\n        (0, _util.showErrorToast)(\"断线重连中...\");\n\n        _this5.websocket();\n      });\n    },\n    sendSocketMessage: function sendSocketMessage(msg) {\n      var data = JSON.stringify(msg);\n      console.log(\"发送数据\", socketOpen, msg);\n\n      if (socketOpen) {\n        uni.sendSocketMessage({\n          data: data\n        });\n      } else {\n        socketMsgQueue.push(msg);\n      }\n    },\n    onSocketMessage: function onSocketMessage() {\n      var _this6 = this;\n\n      uni.onSocketMessage(function (res) {\n        var msg = JSON.parse(res.data);\n        console.log(\"收到服务器内容：\", msg);\n\n        _this6.proccessMsg(msg);\n      });\n    },\n    // 向服务器发送登录请求\n    reqLogin: function () {\n      var _reqLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee2() {\n        var GUID, Appkey, SessionKey, ActiveID, UserID, ConnectionState, msgTime, reqLogin;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.GUID();\n\n              case 2:\n                GUID = _context2.sent;\n                Appkey = \"1867997\";\n                SessionKey = uni.getStorageSync(\"SessionKey\");\n                ActiveID = this.activeID;\n                UserID = this.UserID;\n                ConnectionState = false;\n                msgTime = (0, _util.formatTime)(new Date());\n                reqLogin = {\n                  ActiveID: ActiveID,\n                  AppKey: Appkey,\n                  SessionKey: SessionKey,\n                  msgID: GUID,\n                  msgType: 3,\n                  msgTime: msgTime\n                };\n                this.sendSocketMessage(reqLogin);\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function reqLogin() {\n        return _reqLogin.apply(this, arguments);\n      }\n\n      return reqLogin;\n    }(),\n    // 发送对该活动的消息订阅\n    msgSubscribe: function () {\n      var _msgSubscribe = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee3() {\n        var GUID, ActiveID, url, msgTime, reqSubscribe;\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.GUID();\n\n              case 2:\n                GUID = _context3.sent;\n                ActiveID = this.activeID;\n                url = \"/Actives/\" + ActiveID + \"/\";\n                msgTime = (0, _util.formatTime)(new Date());\n                reqSubscribe = {\n                  Subscribe: url,\n                  msgID: GUID,\n                  msgType: 0,\n                  msgTime: msgTime\n                };\n                this.sendSocketMessage(reqSubscribe);\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function msgSubscribe() {\n        return _msgSubscribe.apply(this, arguments);\n      }\n\n      return msgSubscribe;\n    }(),\n    init: function () {\n      var _init = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee4() {\n        var GUID, msgTime, initMsg;\n        return _regenerator.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.GUID();\n\n              case 2:\n                GUID = _context4.sent;\n                msgTime = (0, _util.formatTime)(new Date());\n                initMsg = {\n                  ActiveID: this.activeID,\n                  UserID: this.UserID,\n                  msgID: GUID,\n                  msgType: 6,\n                  msgTime: msgTime\n                };\n                this.sendSocketMessage(initMsg);\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }(),\n    // 处理消息的函数，用于解析从服务器webSocket收到的各种消息\n    proccessMsg: function () {\n      var _proccessMsg = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee5(msg) {\n        var GUID, dt, msgTime, msgType, content, _content, _content2, _dt2, tm, _dt3, _tm, _dt;\n\n        return _regenerator.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.GUID();\n\n              case 2:\n                GUID = _context5.sent;\n                dt = new Date();\n                msgTime = (0, _util.formatTime)(new Date());\n                msgType = msg.msgType;\n                this.msgType = msgType;\n                console.log(msgType);\n\n                if (!(msg == null)) {\n                  _context5.next = 10;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 10:\n                _context5.prev = 10;\n                _context5.t0 = msgType;\n                _context5.next = _context5.t0 === 0 ? 14 : _context5.t0 === 1 ? 16 : _context5.t0 === 2 ? 19 : _context5.t0 === 3 ? 21 : _context5.t0 === 4 ? 24 : _context5.t0 === 5 ? 26 : _context5.t0 === 6 ? 28 : _context5.t0 === 7 ? 37 : _context5.t0 === 8 ? 42 : _context5.t0 === 9 ? 48 : _context5.t0 === 10 ? 58 : _context5.t0 === 11 ? 68 : _context5.t0 === 12 ? 75 : _context5.t0 === 13 ? 76 : 83;\n                break;\n\n              case 14:\n                // 订阅响应消息\n                if (msg.IsError) {\n                  (0, _util.showToast)(\"订阅失败：\" + msg.ErrMsg);\n                }\n\n                return _context5.abrupt(\"break\", 83);\n\n              case 16:\n                // 重新置为可用，不管结果如何，因为报名后仍可以继续报名\n                this.buttonStateChanged && this.buttonStateChanged(\"报名\", \"0\", true, true); // 报名响应消息\n\n                if (msg.IsError) {\n                  if (this.UserID) {\n                    if (msg.ErrMsg.includes(\"帐户余额不足\")) {\n                      content = msg.ErrMsg;\n                      (0, _util.defaultShowModal)(content).then(function (res) {\n                        if (res.confirm) {\n                          console.log(\"用户点击确定\");\n                          (0, _util.navigateTo)(\"../../ucenter/recharge/recharge\");\n                        } else if (res.cancel) {\n                          console.log(\"用户点击取消\");\n                        }\n                      });\n                    } else {\n                      (0, _util.showToast)(\"报名失败：\" + msg.ErrMsg);\n                    }\n                  } else {\n                    _content = \"你暂未登录，请点击确定去登录！\";\n                    (0, _util.defaultShowModal)(_content).then(function (res) {\n                      if (res.confirm) {\n                        (0, _util.navigateTo)(\"../../ucenter/login/login\");\n                      } else if (res.cancel) {\n                        console.log(\"用户点击取消\");\n                      }\n                    });\n                  }\n                } else {\n                  // 更新我的报名信息事件\n                  this.onUpdateMySignups && this.onUpdateMySignups(msg.Signups, msg.SeqSignups); // 剩余举牌次数\n\n                  this.SeqBills = msg.SeqBills;\n                  (0, _util.showToast)(msg.ErrMsg);\n                }\n\n                return _context5.abrupt(\"break\", 83);\n\n              case 19:\n                // 举牌响应消息（包含我的举牌次数、剩余可用次数）\n                if (msg.IsError) {\n                  (0, _util.showToast)(msg.ErrMsg);\n                } else {\n                  this.onUpdateMyBills && this.onUpdateMyBills(msg.MyBills, msg.MySeqBills); // 如果活动为手工举牌，显示举牌按钮\n\n                  if (this.activeType === 1) {\n                    this.buttonStateChanged && this.buttonStateChanged(\"举牌\", \"2\", true, true);\n                  }\n\n                  this.SeqBills = msg.SeqBills;\n                }\n\n                return _context5.abrupt(\"break\", 83);\n\n              case 21:\n                // 登录响应消息\n                if (msg.IsError) {\n                  console.log(\"登录失败：\" + msg.ErrMsg);\n                  _content2 = \"你暂未登录，请点击确定去登录！\";\n                  (0, _util.defaultShowModal)(_content2).then(function (res) {\n                    if (res.confirm) {\n                      console.log(\"用户点击确定\");\n                      (0, _util.navigateTo)(\"../../ucenter/login/login\");\n                    } else if (res.cancel) {\n                      console.log(\"用户点击取消\");\n                    }\n                  });\n                } else {\n                  // 登录成功，提示用户\n                  this.UserID = msg.UserID;\n                }\n\n                this.init();\n                return _context5.abrupt(\"break\", 83);\n\n              case 24:\n                // 托管响应\n                if (msg.IsError) {\n                  this.buttonStateChanged && this.buttonStateChanged(\"托管\", \"1\", true, true);\n                  (0, _util.showToast)(\"托管失败!\" + msg.ErrMsg);\n                } else {\n                  this.buttonStateChanged && this.buttonStateChanged(\"取消托管\", \"1\", true, true);\n                }\n\n                return _context5.abrupt(\"break\", 83);\n\n              case 26:\n                // 取消托管响应消息\n                if (msg.IsError) {\n                  this.buttonStateChanged && this.buttonStateChanged(\"取消托管\", \"1\", true, true);\n                  (0, _util.showToast)(\"取消托管,\" + msg.ErrMsg);\n                } else {\n                  this.buttonStateChanged && this.buttonStateChanged(\"托管\", \"1\", true, true);\n                }\n\n                return _context5.abrupt(\"break\", 83);\n\n              case 28:\n                // 活动详情页初始化响应\n                this.timerDurationTitle = msg.TimerDurationTitle; // 状态对应要显示的标题\n\n                if (this.activeType === 1) {\n                  this.times = msg.TimerDurationText;\n                } // 倒计时显示文本\n                // 判断是否需要倒计时，如果不需要则清除倒计时器,不显示times\n\n\n                if (msg.TimerDurationValue === 0) {\n                  this.times = \"\";\n                  this.timerState(null);\n                } else {\n                  _dt2 = new Date();\n                  tm = _dt2.getTime() + msg.TimerDurationValue;\n                  this.seqTime.setTime(tm);\n                  this.timerState(this.seqTime);\n                } // 处理按钮的初始状态列表\n\n\n                this.buttonsEvent(msg.ButtonsList); // 更新最近出价人列表信息，更新全部举牌次数、我的举牌次数、和最新价格\n\n                this.onPriceUpdateEvent && this.onPriceUpdateEvent(msg.Price, msg.AllBills, msg.LastBills); // 更新全局报名状态信息\n\n                this.onUpdateAllSignups && this.onUpdateAllSignups(msg.AllSignups, msg.MaxSignups); // 更新我的报名状态信息\n\n                this.onUpdateMySignups && this.onUpdateMySignups(msg.MySignups, msg.SeqSignups);\n                this.onUpdateMyBills && this.onUpdateMyBills(msg.MyBills, msg.MySeqBills);\n                return _context5.abrupt(\"break\", 83);\n\n              case 37:\n                // 报名进度更新推送\n                this.onUpdateAllSignups && this.onUpdateAllSignups(msg.AllSignups, msg.MaxSignups); // 隐藏其它按钮\n\n                this.buttonStateChanged && this.buttonStateChanged(\"参与下一期\", \"4\", false, false);\n                this.buttonStateChanged && this.buttonStateChanged(\"填写收货地址\", \"3\", false, false);\n\n                if (msg.AllSignups === msg.MaxSignups) {\n                  // 如果活动为手工举牌，显示举牌按钮\n                  if (this.activeType === 0) {\n                    this.buttonStateChanged && this.buttonStateChanged(\"举牌\", \"2\", true, false);\n                    this.buttonStateChanged && this.buttonStateChanged(\"托管\", \"1\", true, false);\n                  } else {\n                    this.buttonStateChanged && this.buttonStateChanged(\"举牌\", \"2\", true, true);\n                    this.buttonStateChanged && this.buttonStateChanged(\"托管\", \"1\", true, true);\n                  } // 已满员，隐藏掉报名按钮\n\n\n                  this.buttonStateChanged && this.buttonStateChanged(\"报名\", \"0\", false, false);\n                } else {\n                  this.buttonStateChanged && this.buttonStateChanged(\"举牌\", \"2\", false, false);\n                  this.buttonStateChanged && this.buttonStateChanged(\"托管\", \"1\", false, false); // 还需要继续报名，显示报名按钮\n\n                  this.buttonStateChanged && this.buttonStateChanged(\"报名\", \"0\", true, true);\n                }\n\n                return _context5.abrupt(\"break\", 83);\n\n              case 42:\n                // 价格更新通知\n                // 更新全部举牌次数、我的举牌次数、和最新价格\n                this.BillStat = \"总举牌次数：\" + msg.AllBills + \"次\"; // 更新最后出价人信息\n\n                if (msg.Bills.length > 0) {\n                  this.newPrice = \"\\uFFE5\".concat(msg.Bills[0].Price);\n                  this.newBill = msg.Bills[0].bill;\n                  this.newFace = msg.Bills[0].bill.face;\n                  this.newNick = \"\\u9886\\u5148\\u4EBA\\uFF1A\".concat(decodeURIComponent(msg.Bills[0].nick));\n                } // 更新最近出局人信息\n\n\n                if (msg.Bills.length > 1) {\n                  this.lastBills = msg.Bills;\n                }\n\n                if (msg.SeqMiniSecounds > 0) {\n                  // 计算剩余时长\n                  _dt3 = new Date();\n                  _tm = _dt3.getTime() + msg.SeqMiniSecounds;\n                  this.seqTime.setTime(_tm);\n                  this.timerState(this.seqTime);\n                } // 更新价格事件\n\n\n                this.onPriceUpdateEvent && this.onPriceUpdateEvent(msg.Price, msg.AllBills, msg.Bills);\n                return _context5.abrupt(\"break\", 83);\n\n              case 48:\n                //计算剩余时间，并重置剩余时间\n                _dt = new Date();\n\n                _dt.setTime(_dt.getTime() + msg.SeqMiniSecounds);\n\n                this.timerState(_dt); // 设置倒计时标题为即将开拍\n\n                this.timerDurationTitle = \"开拍准备\"; // 隐藏掉报名按钮\n\n                this.buttonStateChanged && this.buttonStateChanged(\"报名\", \"0\", false, false); // 禁用举牌、托管按钮，如果活动为手工举牌，显示举牌按钮\n\n                if (this.activeType === 0) {\n                  this.buttonStateChanged && this.buttonStateChanged(\"自动举牌中\", \"2\", true, false);\n                } else {\n                  this.buttonStateChanged && this.buttonStateChanged(\"举牌\", \"2\", true, false);\n                }\n\n                this.buttonStateChanged && this.buttonStateChanged(\"托管\", \"1\", true, false); // 隐藏其它按钮\n\n                this.buttonStateChanged && this.buttonStateChanged(\"填写收货地址\", \"3\", false, false);\n                this.buttonStateChanged && this.buttonStateChanged(\"参与下一期\", \"4\", false, false);\n                return _context5.abrupt(\"break\", 83);\n\n              case 58:\n                // 活动正式开始，但是目前尚未有人出价，所以收到此消息，先停止计时器，并显示为 “等待首牌”\n                this.timerDurationTitle = \"正在竟拍\";\n                this.times = \"等待首牌\";\n                this.SeqBills = msg.SeqBills; // 清除计时器\n\n                this.timerState(null); // 设置价格\n\n                this.newPrice = \"￥\" + msg.currPrice; // 判断活动类型，如果是人工举牌，显示托管、举牌；如果是自动举牌，举牌按钮更改为“自动举牌中”，其它按钮全部隐藏\n\n                if (msg.ActiveType === 0) {\n                  // 停用其它按钮，仅剩下举牌按钮，且举牌按钮状态显示为自动举牌中\n                  this.buttonStateChanged && this.buttonStateChanged(\"自动举牌中\", \"2\", true, false);\n                  this.buttonStateChanged && this.buttonStateChanged(\"托管\", \"1\", true, false);\n                } else {\n                  // 启用举牌、托管按钮\n                  this.buttonStateChanged && this.buttonStateChanged(\"举牌\", \"2\", true, true);\n\n                  if (msg.IsTap) {\n                    this.buttonStateChanged && this.buttonStateChanged(\"取消托管\", \"1\", true, true);\n                  } else {\n                    this.buttonStateChanged && this.buttonStateChanged(\"托管\", \"1\", true, true);\n                  }\n                } // 隐藏掉报名、填写地址、参与下一期按钮\n\n\n                this.buttonStateChanged && this.buttonStateChanged(\"报名\", \"0\", false, false);\n                this.buttonStateChanged && this.buttonStateChanged(\"填写收货地址\", \"3\", false, false);\n                this.buttonStateChanged && this.buttonStateChanged(\"参与下一期\", \"4\", false, false);\n                return _context5.abrupt(\"break\", 83);\n\n              case 68:\n                // 活动结束通知\n                this.timerState(null);\n                this.timerDurationTitle = \"活动结束\";\n                this.times = \"已成交\";\n                this.newCurrent = \"成交价\";\n                this.newCurrentBidder = \"中拍人\"; // 判断是否当前用户，如果是当前用户，则需要弹出收货地址和订单信息处理界面\n\n                if (this.UserID === msg.WinsBill.bill.UserID) {\n                  // 当前用户\n                  (0, _util.showToast)(\"恭喜，您已中拍！点击确定去填写订单信息吧！\"); // 隐藏其它按钮\n\n                  this.buttonStateChanged && this.buttonStateChanged(\"报名\", \"0\", false, false);\n                  this.buttonStateChanged && this.buttonStateChanged(\"举牌\", \"2\", false, false);\n                  this.buttonStateChanged && this.buttonStateChanged(\"托管\", \"1\", false, false);\n                  this.buttonStateChanged && this.buttonStateChanged(\"参与下一期\", \"4\", false, false); // 触发填写地址按钮的显示，其它按钮隐藏\n\n                  this.buttonStateChanged && this.buttonStateChanged(\"填写收货地址\", \"3\", true, true);\n                  this.orderID = msg.WinsOrder.OrderID;\n                } else {\n                  // 隐藏掉其它按钮\n                  this.buttonStateChanged && this.buttonStateChanged(\"报名\", \"0\", false, false);\n                  this.buttonStateChanged && this.buttonStateChanged(\"举牌\", \"1\", false, false);\n                  this.buttonStateChanged && this.buttonStateChanged(\"托管\", \"2\", false, false);\n                  this.buttonStateChanged && this.buttonStateChanged(\"填写收货地址\", \"3\", false, false); // 触发下一期按钮的显示，其它按钮隐藏\n\n                  this.buttonStateChanged && this.buttonStateChanged(\"参与下一期\", \"4\", true, true);\n                }\n\n                return _context5.abrupt(\"break\", 83);\n\n              case 75:\n                return _context5.abrupt(\"break\", 83);\n\n              case 76:\n                // 活动流拍通知\n                this.timerDurationTitle = \"活动流拍\"; // 隐藏掉其它按钮\n\n                this.buttonStateChanged && this.buttonStateChanged(\"报名\", \"0\", false, false);\n                this.buttonStateChanged && this.buttonStateChanged(\"举牌\", \"1\", false, false);\n                this.buttonStateChanged && this.buttonStateChanged(\"托管\", \"2\", false, false);\n                this.buttonStateChanged && this.buttonStateChanged(\"填写收货地址\", \"3\", false, false); // 触发下一期按钮的显示，其它按钮隐藏\n\n                this.buttonStateChanged && this.buttonStateChanged(\"参与下一期\", \"4\", true, true);\n                return _context5.abrupt(\"break\", 83);\n\n              case 83:\n                _context5.next = 88;\n                break;\n\n              case 85:\n                _context5.prev = 85;\n                _context5.t1 = _context5[\"catch\"](10);\n                console.error(\"处理消息出错：\" + _context5.t1);\n\n              case 88:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[10, 85]]);\n      }));\n\n      function proccessMsg(_x2) {\n        return _proccessMsg.apply(this, arguments);\n      }\n\n      return proccessMsg;\n    }(),\n    // 定义按钮处理函数\n    buttonStateChanged: function buttonStateChanged(text, type, isDisplay, isEnabled) {\n      var _this7 = this;\n\n      this.buttonsList = JSON.parse(JSON.stringify(this.buttonsList));\n      this.buttonsList.map(function (item, i, value) {\n        value[type].ButtonText = text;\n        value[type].ButtonVisibility = isDisplay;\n        value[type].ButtonEnabled = isEnabled;\n\n        if (item.ButtonType === 1 && item.ButtonVisibility) {\n          _this7.seqBillsShow = true;\n        } else if (item.ButtonType === 2 && item.ButtonVisibility) {\n          _this7.seqBillsShow = true;\n        } else if (item.ButtonType === 3 && item.ButtonVisibility) {\n          _this7.seqBillsShow = false;\n        } else if (item.ButtonType === 4 && item.ButtonVisibility) {\n          _this7.seqBillsShow = false;\n        }\n      });\n      this.buttonsEvent(this.buttonsList);\n    },\n    // 处理按列表事件\n    buttonsEvent: function buttonsEvent(event) {\n      var _this8 = this;\n\n      this.buttonsList = JSON.parse(JSON.stringify(event));\n      this.buttonsList.map(function (item, i, value) {\n        if (item.ButtonType === 1 && item.ButtonVisibility) {\n          _this8.seqBillsShow = true;\n        } else if (item.ButtonType === 2 && item.ButtonVisibility) {\n          _this8.seqBillsShow = true;\n        } else if (item.ButtonType === 3 && item.ButtonVisibility) {\n          _this8.seqBillsShow = false;\n        } else if (item.ButtonType === 4 && item.ButtonVisibility) {\n          _this8.seqBillsShow = false;\n        }\n      });\n    },\n    // 更新全局报名信息\n    onUpdateAllSignups: function onUpdateAllSignups(curr, max) {\n      this.currSignups = \"\\u603B\\u5DF2\\u62A5\\u540D\\u4EFD\\u6570\\uFF1A\".concat(curr, \"\\u4EFD\");\n      this.maxSignups = \"\\u603B\\u9700\\u62A5\\u540D\\u4EFD\\u6570\\uFF1A\".concat(max, \"\\u4EFD\");\n    },\n    // 更新我的报名信息\n    onUpdateMySignups: function onUpdateMySignups(curr, seq) {\n      this.signups = \"\\u6211\\u5DF2\\u62A5\\u540D\\u4EFD\\u6570\\uFF1A\".concat(curr, \"\\u4EFD\");\n      this.seqSignups = \"\\u8FD8\\u53EF\\u62A5\\u540D\\u4EFD\\u6570\\uFF1A\".concat(seq, \"\\u4EFD\");\n    },\n    // 更新我的举牌信息\n    onUpdateMyBills: function onUpdateMyBills(mybills, seqbills) {\n      this.myBills = \"\\u6211\\u7684\\u4E3E\\u724C\\u6B21\\u6570\\uFF1A\".concat(mybills, \"\\u6B21\");\n      this.seqBills = \"\\u5269\\u4F59\\u53EF\\u7528\\u6B21\\u6570\\uFF1A\".concat(seqbills, \"\\u6B21\");\n      this.myBills = mybills;\n      this.SeqBills = seqbills;\n    },\n    // 更新价格事件\n    onPriceUpdateEvent: function onPriceUpdateEvent(startPrice, allBills, lastBills) {\n      // 更新全部举牌次数、我的举牌次数、和最新价格\n      if (lastBills.length > 0) {\n        console.log(\"oneBills\", lastBills); // 有人出价，按最后出价人\n\n        this.newBill = lastBills[0].bill;\n        this.newFace = lastBills[0].face;\n        this.newNick = \"\\u9886\\u5148\\u4EBA\\uFF1A\".concat(decodeURIComponent(lastBills[0].nick));\n        this.newCity = \"\".concat(lastBills[0].bill.Province);\n        this.newPrice = \"\\uFFE5\".concat(lastBills[0].bill.Price);\n        var active = this.active;\n\n        if (active.ActiveStatus === 4) {\n          this.newCurrent = \"本期成交\";\n          this.newCurrentBidder = \"本期成交人\";\n        } else {\n          this.newCurrent = \"当前出价\";\n          this.newCurrentBidder = \"当前领先出价人\";\n        }\n      } else {\n        // 未有人出价，按起拍价\n        this.newBill = \"\";\n        this.newFace = \"\";\n        this.newNick = \"\";\n        this.newCity = \"\";\n        this.newCurrentBidder = \"\";\n        this.newPrice = \"\\uFFE5\".concat(startPrice);\n        this.newCurrent = \"起拍价\";\n      }\n\n      this.allBills = allBills; // '活动总举牌次数：' + allBills + '次'\n      // 更新最近出局人信息\n\n      this.lastBills = lastBills.slice(1, 3);\n      this.lastBills.map(function (item) {\n        item.nick = decodeURIComponent(item.nick);\n      });\n    },\n    formSubmit: function formSubmit(e) {\n      console.log(\"formId\", e);\n      var formId = e.detail.formId;\n      var data = {\n        FormID: formId\n      };\n      (0, _util.request)(_api.AddUserFormID, data).then(function (res) {\n        console.log(res);\n      });\n    },\n    billTap: function () {\n      var _billTap = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee6(type) {\n        var action, ActiveID, num, Price, GUID, msgTime, SignupMsg, billMsg, tapMsg, cancelTapMsg, disabled, productID, OrderID, nexActive;\n        return _regenerator.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                action = type;\n                ActiveID = this.activeID;\n                num = this.num;\n                Price = this.Price;\n                _context6.next = 6;\n                return this.GUID();\n\n              case 6:\n                GUID = _context6.sent;\n                msgTime = (0, _util.formatTime)(new Date());\n                console.log(\"switch\", type);\n                _context6.t0 = action;\n                _context6.next = _context6.t0 === \"报名\" ? 12 : _context6.t0 === \"举牌\" ? 16 : _context6.t0 === \"托管\" ? 19 : _context6.t0 === \"取消托管\" ? 22 : _context6.t0 === \"填写收货地址\" ? 25 : _context6.t0 === \"参与下一期\" ? 30 : 37;\n                break;\n\n              case 12:\n                SignupMsg = {\n                  ActiveID: ActiveID,\n                  Shares: num,\n                  msgID: GUID,\n                  msgType: 1,\n                  msgTime: msgTime\n                };\n                this.sendSocketMessage(SignupMsg);\n                this.show = !this.show;\n                return _context6.abrupt(\"break\", 37);\n\n              case 16:\n                billMsg = {\n                  ActiveID: ActiveID,\n                  Price: Price,\n                  msgID: GUID,\n                  msgType: 2,\n                  msgTime: msgTime\n                };\n                this.sendSocketMessage(billMsg);\n                return _context6.abrupt(\"break\", 37);\n\n              case 19:\n                tapMsg = {\n                  ActiveID: ActiveID,\n                  msgID: GUID,\n                  msgType: 4,\n                  msgTime: msgTime\n                };\n                this.sendSocketMessage(tapMsg);\n                return _context6.abrupt(\"break\", 37);\n\n              case 22:\n                cancelTapMsg = {\n                  ActiveID: ActiveID,\n                  msgID: GUID,\n                  msgType: 5,\n                  msgTime: msgTime\n                };\n                this.sendSocketMessage(cancelTapMsg);\n                return _context6.abrupt(\"break\", 37);\n\n              case 25:\n                disabled = true;\n                productID = this.productID;\n                OrderID = this.orderID;\n                (0, _util.navigateTo)(\"/pages/ucenter/addressShipping/addressShipping?disabled=\" + disabled + \"&productID=\" + productID + \"&orderID=\" + OrderID);\n                return _context6.abrupt(\"break\", 37);\n\n              case 30:\n                _context6.next = 32;\n                return this.getNextActive();\n\n              case 32:\n                nexActive = _context6.sent;\n                this.activities(nexActive);\n                uni.closeSocket();\n                this.websocket();\n                return _context6.abrupt(\"break\", 37);\n\n              case 37:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function billTap(_x3) {\n        return _billTap.apply(this, arguments);\n      }\n\n      return billTap;\n    }(),\n    // 倒计时\n    timerState: function timerState(time) {\n      var _this9 = this;\n\n      if (time === null) {\n        clearInterval(this.timer);\n        return;\n      }\n\n      if (!(time instanceof Date)) {\n        console.error(\"传入日期时间格式不正确！\");\n        return;\n      }\n\n      if (time.getTime() < new Date().getTime()) {\n        // 时间错误，时间必须是未来的日期时间\n        console.error(\"设置倒计时器无效，日期时间必须是未来的时间！\");\n        return;\n      } // 清除旧的倒计时器\n\n\n      clearInterval(this.timer);\n      this.timer = setInterval(function () {\n        _this9.seqDisplay(time);\n      }, 100);\n    },\n    // 下面处理倒计时的显示，实际上时间是由服务器webSocket返回的\n    seqDisplay: function seqDisplay(time) {\n      var date = new Date();\n      var between = time - date;\n      var sec = Math.floor(between / 1000);\n      var hours = Math.floor(Math.floor(sec / 60) / 60) % 24;\n      var days = Math.floor(Math.floor(Math.floor(sec / 60) / 60) / 24) % 30;\n      var minutes = Math.floor(sec / 60) % 60;\n      var seconds = sec % 60;\n      var minisec = Math.floor(between / 100) % 10;\n\n      if (seconds < 0) {\n        this.times = \"\";\n      } else {\n        if (hours < 10) {\n          hours = \"0\" + hours;\n        }\n\n        if (minutes < 10) {\n          minutes = \"0\" + minutes;\n        }\n\n        if (seconds < 10) {\n          seconds = \"0\" + seconds;\n        }\n\n        hours = +hours + days * 24;\n        var times = hours + \":\" + minutes + \":\" + seconds + \".\" + minisec;\n        this.times = times;\n      }\n    },\n    // 下面是生成随机GUID的函数\n    GUID: function GUID() {\n      return new Promise(function (sesolve, reject) {\n        var guid = \"\";\n\n        for (var i = 1; i <= 32; i++) {\n          var n = Math.floor(Math.random() * 16.0).toString(16);\n          guid += n;\n          if (i == 8 || i == 12 || i == 16 || i == 20) guid += \"-\";\n        }\n\n        sesolve(guid);\n      });\n    }\n  }\n});\n\nexports.default = _default;",{"version":3,"sources":["/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-3!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lee/Desktop/github/mall-project/src/pages/mall/productDetailsPage/productDetailsPage.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport {\n\trequest,\n\tnavigateTo,\n\tformatTime,\n\tshowToast,\n\tshowModal,\n\tshowErrorToast,\n\tdefaultShowModal,\n\tonShareAppMessage\n} from \"@/common/utils/util\";\nimport {\n\tProductGet,\n\tPastTransactionsListGet,\n\tOrderDryingListGet,\n\tGetActiveByID,\n\tNextActiveGet,\n\tAddUserFormID\n} from \"@/common/config/api\";\nimport iPast from \"@/components/i-past/i-past.vue\";\nimport iShow from \"@/components/i-show/i-show.vue\";\nimport iRule from \"@/components/i-rule/i-rule.vue\";\nimport iPopup from \"@/components/i-popup/i-popup.vue\";\nimport productTable from \"@/components/product-table/product-table.vue\";\nlet socketOpen: boolean = false;\nlet socketMsgQueue: any = [];\nexport default Vue.extend({\n\tcomponents: {\n\t\tiPast,\n\t\tiShow,\n\t\tiRule,\n\t\tiPopup,\n\t\tproductTable\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tindicatorDots: true,\n\t\t\tautoplay: true,\n\t\t\tinterval: 5000,\n\t\t\tduration: 500,\n\t\t\tcircular: true,\n\t\t\tindicatorActiveColor: \"#fe7f00\",\n\t\t\tdisabled: false, // 按钮disabled\n\t\t\tswiper: [], // 产品轮播\n\t\t\tproductID: \"\", // 商品ID\n\t\t\torderID: \"\", // 订单ID\n\t\t\tproduct: \"\", // 商品\n\t\t\tnum: \"1\", // 剩余次数\n\t\t\tpageID: 1, // 页码\n\t\t\tpageSize: 10, // 每页条数\n\t\t\thasPastNext: false, // 是否还有往期成交下一页\n\t\t\thasOrderNext: false, // 是否还有晒单下一页\n\t\t\twidth: 0, // 设置系统宽度\n\t\t\tactiveDetail: \"\", // 活动详情\n\t\t\tactiveShow: false, // 是否有活动内容数据\n\t\t\tactive: [], // 活动内容\n\t\t\tactiveType: 0, // 判断是否是自动举牌还是手工举牌,activeType==0自动，1手工\n\t\t\ttabIndex: 0, // 默认往期成交\n\t\t\tpastList: [], // 往期成交列表\n\t\t\tshowList: [], // 晒单列表\n\t\t\truleList: \"\", // 竞拍规则\n\t\t\tshow: false, // 显示弹窗\n\t\t\tlabel: [\"零风险\", \"正品承诺\", \"极速发货\", \"公平公正\"],\n\t\t\ttab: [\"往期成交\", \"分享晒单\", \"竞拍规则\"],\n\t\t\tsrc: \"/static/icon_experience.png\",\n\t\t\tleading: \"/static/icon/icon_leading.png\",\n\t\t\tactiveID: \"\", // 活动ID\n\t\t\tPrice: \"\", // 价格\n\t\t\tmsgID: \"\", // GUID\n\t\t\tmsgType: \"\", // 消息类型\n\t\t\ttimer: 0, // 计时器\n\t\t\tnewCurrent: \"\", // 当前出价文字\n\t\t\tnewCurrentBidder: \"\", // 当前领先出价人文字\n\t\t\tbuttonsList: [], // 按钮类型，0表示报名按钮、1表示举牌按钮、2表示托管按钮、3表示填写地址按钮，4表示参与下一期按钮\n\t\t\tprice: \"\", // 最新价格\n\t\t\tlastBills: [], // 出价列表\n\t\t\ttimerDurationTitle: \"\", // 状态对应要显示的标题\n\t\t\tcurrSignups: \"\", // 总已报名份数\n\t\t\tmaxSignups: \"\", // 总需报名份数\n\t\t\tsignups: \"\", // 我已报名份数\n\t\t\tseqSignups: \"\", // 还可报名份数\n\t\t\tallBills: \"0\", // 全部举牌次数\n\t\t\tmyBills: \"0\", // 我的举牌次数,我的出价记录\n\t\t\tseqBills: \"0\", // 剩余可用次数\n\t\t\tseqBillsShow: false, // 显示剩余举牌次数文字\n\t\t\tseq: \"\", // 更新我的剩余举牌次数\n\t\t\tMyBills: \"\", // 举牌响应消息（包含我的举牌次数、剩余可用次数）\n\t\t\tSeqBills: \"0\", // 举牌响应消息（剩余可用次数）\n\t\t\tSignups: \"\", // 报名份数\n\t\t\tSeqSignups: \"0\", // 剩下报名份数\n\t\t\tmySeqBills: \"0\", // 我的出价记录\n\t\t\tUserID: \"\", // 登录成功，提示用户\n\t\t\ttapbtn: \"\", // 托管\n\t\t\tBillStat: \"\", // 总举牌次数\n\t\t\tnewPrice: \"\", // 领先价格\n\t\t\tnewBill: \"\", // 领先人全部信息\n\t\t\tnewNick: \"\", // 当前领先人\n\t\t\tnewFace: \"\", // 当前领先人头像\n\t\t\tnewCity: \"\", // 当前领先人所在城市\n\t\t\ttimes: \"\", // 倒计时\n\t\t\tseqTime: new Date() // 初始Date时间\n\t\t};\n\t},\n\tonLoad(options: any) {\n\t\tthis.activeID = options.activeID;\n\t\tlet windowWidth: any = uni.getSystemInfoSync().windowWidth;\n\t\tthis.width = windowWidth;\n\t},\n\tonShow() {\n\t\tthis.UserID = uni.getStorageSync(\"UserInfo\").ID;\n\t\tthis.websocket();\n\t\tthis.getActiveByID();\n\t\tthis.getPastTransactionsList();\n\t},\n\tonHide() {\n\t\tuni.closeSocket();\n\t},\n\tonUnload() {\n\t\tuni.hideToast();\n\t\tuni.closeSocket();\n\t\tuni.onSocketClose(res => {\n\t\t\tconsole.log(\"WebSocket 已关闭！\");\n\t\t});\n\t},\n\tonPullDownRefresh() {\n\t\tuni.onSocketClose(res => {\n\t\t\tconsole.log(\"WebSocket 已关闭！\");\n\t\t});\n\t\tthis.getActiveByID();\n\t},\n\tonReachBottom() {\n\t\tswitch (this.tabIndex) {\n\t\t\tcase 0:\n\t\t\t\tif (!this.hasPastNext) {\n\t\t\t\t\tthis.pageID++;\n\t\t\t\t\tthis.getPastTransactionsList();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tif (!this.hasOrderNext) {\n\t\t\t\t\tthis.pageID++;\n\t\t\t\t\tthis.getOrderDryingList();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t},\n\tonShareAppMessage(e: any) {\n\t\treturn onShareAppMessage(e);\n\t},\n\tmethods: {\n\t\t// 获取活动详情\n\t\tgetActiveByID() {\n\t\t\tlet ActiveID = this.activeID;\n\t\t\tlet data = {\n\t\t\t\tActiveID: ActiveID\n\t\t\t};\n\t\t\trequest(GetActiveByID, data).then((res: any) => {\n\t\t\t\tthis.activities(res.ActiveDetail);\n\t\t\t});\n\t\t},\n\t\t// 选项卡\n\t\ttabClick(index: number) {\n\t\t\tthis.tabIndex = index;\n\t\t\tconsole.log(this.pageID);\n\t\t\tswitch (index) {\n\t\t\t\tcase 0:\n\t\t\t\t\tthis.pageID = 1;\n\t\t\t\t\tthis.hasPastNext = false;\n\t\t\t\t\tthis.getPastTransactionsList();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tthis.pageID = 1;\n\t\t\t\t\tthis.hasOrderNext = false;\n\t\t\t\t\tthis.getOrderDryingList();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t// 往期成交列表\n\t\tgetPastTransactionsList() {\n\t\t\tlet ActiveID = this.activeID;\n\t\t\tlet PageID = this.pageID;\n\t\t\tlet PageSize = this.pageSize;\n\t\t\tlet data = {\n\t\t\t\tActiveID: ActiveID,\n\t\t\t\tPageID: PageID,\n\t\t\t\tPageSize: PageSize\n\t\t\t};\n\t\t\trequest(PastTransactionsListGet, data).then((res: any) => {\n\t\t\t\tif (PageID === 1) this.pastList = [];\n\t\t\t\tthis.pastList = this.pastList.concat(res.OrderList);\n\t\t\t\tthis.pastList.map((item: any) => {\n\t\t\t\t\titem.percentage = (\n\t\t\t\t\t\t((item.OrderPrimeCost - item.OrderMoneys) / item.OrderPrimeCost) *\n\t\t\t\t\t\t100\n\t\t\t\t\t).toFixed(2);\n\t\t\t\t\titem.CreatedTime = formatTime(new Date(item.Created));\n\t\t\t\t\titem.UserNick = decodeURIComponent(item.UserNick);\n\t\t\t\t});\n\t\t\t\tif (res.PageCount <= PageID) {\n\t\t\t\t\tthis.hasPastNext = true;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 获取用户晒单列表\n\t\tgetOrderDryingList() {\n\t\t\tlet ProductID = this.productID;\n\t\t\tlet PageID = this.pageID;\n\t\t\tlet PageSize = this.pageSize;\n\t\t\tlet data = {\n\t\t\t\tProductID: ProductID,\n\t\t\t\tPageID: PageID,\n\t\t\t\tPageSize: PageSize\n\t\t\t};\n\t\t\trequest(OrderDryingListGet, data).then((res: any) => {\n\t\t\t\tif (PageID === 1) this.showList = [];\n\t\t\t\tthis.showList = this.showList.concat(res.OrderList);\n\t\t\t\tthis.showList.map((item: any) => {\n\t\t\t\t\titem.UserNick = decodeURIComponent(item.UserNick);\n\t\t\t\t\titem.SendGoodsDateTime = formatTime(new Date(item.SendGoodsDate));\n\t\t\t\t});\n\t\t\t\tif (res.PageCount <= PageID) {\n\t\t\t\t\tthis.hasOrderNext = true;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tchange(val: any) {\n\t\t\tconsole.log(val);\n\t\t\tthis.num = val;\n\t\t},\n\t\tasync hidePopup(e: any) {\n\t\t\tswitch (e) {\n\t\t\t\tcase \"参与下一期\":\n\t\t\t\t\tlet nexActive: any = await this.getNextActive();\n\t\t\t\t\tthis.activities(nexActive);\n\t\t\t\t\tuni.closeSocket();\n\t\t\t\t\tthis.websocket();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.show = !this.show;\n\t\t\t}\n\t\t},\n\t\t// 获取下一期活动\n\t\tgetNextActive() {\n\t\t\treturn new Promise((sesolve, reject) => {\n\t\t\t\tlet ActiveID = this.activeID;\n\t\t\t\tlet data = {\n\t\t\t\t\tActiveID: ActiveID\n\t\t\t\t};\n\t\t\t\trequest(NextActiveGet, data).then((res: any) => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tsesolve(res.NexActive);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t// 处理活动内容\n\t\tactivities(res: any) {\n\t\t\tthis.swiper = res.ProductPicList;\n\t\t\tthis.Price = res.ProductPrice;\n\t\t\tthis.activeDetail = res;\n\t\t\tthis.active = res.Active;\n\t\t\tthis.activeShow = true;\n\t\t\tthis.activeType = res.Active.ActiveType;\n\t\t\tthis.activeID = res.Active.ID;\n\t\t\tthis.productID = res.ID;\n\t\t},\n\t\ttolowerShow(e: any) {\n\t\t\tconsole.log(\"tolowerShow\", e);\n\t\t},\n\t\t// 全部记录\n\t\tallActivePath() {\n\t\t\tlet activeID = this.activeID;\n\t\t\tnavigateTo(\"../activeBilList/activeBilList?activeID=\" + activeID);\n\t\t},\n\t\t// 我的出价记录\n\t\tmyActivePath() {\n\t\t\tconsole.log(this.activeID);\n\t\t\tlet activeID = this.activeID;\n\t\t\tlet userID: string = uni.getStorageSync(\"UserInfo\").ID;\n\t\t\tif (!userID) {\n\t\t\t\tlet content: string = \"你暂未登录，请点击确定去登录！\";\n\t\t\t\tdefaultShowModal(content).then((res: any) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tconsole.log(\"用户点击确定\");\n\t\t\t\t\t\tnavigateTo(\"../../ucenter/login/login\");\n\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\tconsole.log(\"用户点击取消\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tnavigateTo(\n\t\t\t\t\t\"../activeBilList/activeBilList?activeID=\" +\n\t\t\t\t\t\tactiveID +\n\t\t\t\t\t\t\"&userID=\" +\n\t\t\t\t\t\tuserID\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t// 产品详情\n\t\tproductDetailsUparsePath() {\n\t\t\tlet productID = this.productID;\n\t\t\tnavigateTo(\n\t\t\t\t\"../productDetailsUparse/productDetailsUparse?productID=\" + productID\n\t\t\t);\n\t\t},\n\t\twebsocket() {\n\t\t\tuni.connectSocket({\n\t\t\t\turl: \"wss://websocket.tengpaisc.com\"\n\t\t\t});\n\t\t\tuni.onSocketOpen((res: any) => {\n\t\t\t\tconsole.log(\"WebSocket连接已打开！\");\n\t\t\t\tsocketOpen = true;\n\t\t\t\tfor (let i = 0; i < socketMsgQueue.length; i++) {\n\t\t\t\t\tthis.sendSocketMessage(socketMsgQueue[i]);\n\t\t\t\t}\n\t\t\t\tsocketMsgQueue = [];\n\t\t\t\tthis.msgSubscribe();\n\t\t\t\tthis.reqLogin();\n\t\t\t\tthis.onSocketMessage();\n\t\t\t});\n\t\t\tuni.onSocketError(res => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tconsole.log(\"WebSocket连接打开失败，请检查！\");\n\t\t\t\t// 断线调用函数\n\t\t\t\tshowErrorToast(\"断线重连中...\");\n\t\t\t\tthis.websocket();\n\t\t\t});\n\t\t},\n\t\tsendSocketMessage(msg: any) {\n\t\t\tlet data: string = JSON.stringify(msg);\n\t\t\tconsole.log(\"发送数据\", socketOpen, msg);\n\t\t\tif (socketOpen) {\n\t\t\t\tuni.sendSocketMessage({\n\t\t\t\t\tdata: data\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsocketMsgQueue.push(msg);\n\t\t\t}\n\t\t},\n\t\tonSocketMessage() {\n\t\t\tuni.onSocketMessage((res: any) => {\n\t\t\t\tlet msg = JSON.parse(res.data);\n\t\t\t\tconsole.log(\"收到服务器内容：\", msg);\n\t\t\t\tthis.proccessMsg(msg);\n\t\t\t});\n\t\t},\n\t\t// 向服务器发送登录请求\n\t\tasync reqLogin() {\n\t\t\tlet GUID: any = await this.GUID();\n\n\n\n\n\t\t\tvar Appkey = \"1867997\";\n\n\n\n\n\t\t\tconst SessionKey = uni.getStorageSync(\"SessionKey\");\n\t\t\tlet ActiveID = this.activeID;\n\t\t\tlet UserID = this.UserID;\n\t\t\tlet ConnectionState = false;\n\t\t\tlet msgTime = formatTime(new Date());\n\t\t\tlet reqLogin: any = {\n\t\t\t\tActiveID: ActiveID,\n\t\t\t\tAppKey: Appkey,\n\t\t\t\tSessionKey: SessionKey,\n\t\t\t\tmsgID: GUID,\n\t\t\t\tmsgType: 3,\n\t\t\t\tmsgTime: msgTime\n\t\t\t};\n\t\t\tthis.sendSocketMessage(reqLogin);\n\t\t},\n\t\t// 发送对该活动的消息订阅\n\t\tasync msgSubscribe() {\n\t\t\tlet GUID: any = await this.GUID();\n\t\t\tlet ActiveID = this.activeID;\n\t\t\tlet url = \"/Actives/\" + ActiveID + \"/\";\n\t\t\tlet msgTime = formatTime(new Date());\n\t\t\tlet reqSubscribe = {\n\t\t\t\tSubscribe: url,\n\t\t\t\tmsgID: GUID,\n\t\t\t\tmsgType: 0,\n\t\t\t\tmsgTime: msgTime\n\t\t\t};\n\t\t\tthis.sendSocketMessage(reqSubscribe);\n\t\t},\n\t\tasync init() {\n\t\t\tlet GUID: any = await this.GUID();\n\t\t\tlet msgTime = formatTime(new Date());\n\t\t\tlet initMsg = {\n\t\t\t\tActiveID: this.activeID,\n\t\t\t\tUserID: this.UserID,\n\t\t\t\tmsgID: GUID,\n\t\t\t\tmsgType: 6,\n\t\t\t\tmsgTime: msgTime\n\t\t\t};\n\t\t\tthis.sendSocketMessage(initMsg);\n\t\t},\n\t\t// 处理消息的函数，用于解析从服务器webSocket收到的各种消息\n\t\tasync proccessMsg(msg: any) {\n\t\t\tlet GUID: any = await this.GUID();\n\t\t\tlet dt = new Date();\n\t\t\tlet msgTime = formatTime(new Date());\n\t\t\tlet msgType = msg.msgType;\n\t\t\tthis.msgType = msgType;\n\t\t\tconsole.log(msgType);\n\t\t\tif (msg == null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tswitch (msgType) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\t// 订阅响应消息\n\t\t\t\t\t\tif (msg.IsError) {\n\t\t\t\t\t\t\tshowToast(\"订阅失败：\" + msg.ErrMsg);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\t// 重新置为可用，不管结果如何，因为报名后仍可以继续报名\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"报名\", \"0\", true, true);\n\t\t\t\t\t\t// 报名响应消息\n\t\t\t\t\t\tif (msg.IsError) {\n\t\t\t\t\t\t\tif (this.UserID) {\n\t\t\t\t\t\t\t\tif (msg.ErrMsg.includes(\"帐户余额不足\")) {\n\t\t\t\t\t\t\t\t\tlet content: string = msg.ErrMsg;\n\t\t\t\t\t\t\t\t\tdefaultShowModal(content).then((res: any) => {\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"用户点击确定\");\n\t\t\t\t\t\t\t\t\t\t\tnavigateTo(\"../../ucenter/recharge/recharge\");\n\t\t\t\t\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"用户点击取消\");\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tshowToast(\"报名失败：\" + msg.ErrMsg);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet content: string = \"你暂未登录，请点击确定去登录！\";\n\t\t\t\t\t\t\t\tdefaultShowModal(content).then((res: any) => {\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\tnavigateTo(\"../../ucenter/login/login\");\n\t\t\t\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"用户点击取消\");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// 更新我的报名信息事件\n\t\t\t\t\t\t\tthis.onUpdateMySignups &&\n\t\t\t\t\t\t\t\tthis.onUpdateMySignups(msg.Signups, msg.SeqSignups);\n\t\t\t\t\t\t\t// 剩余举牌次数\n\t\t\t\t\t\t\tthis.SeqBills = msg.SeqBills;\n\t\t\t\t\t\t\tshowToast(msg.ErrMsg);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\t// 举牌响应消息（包含我的举牌次数、剩余可用次数）\n\t\t\t\t\t\tif (msg.IsError) {\n\t\t\t\t\t\t\tshowToast(msg.ErrMsg);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.onUpdateMyBills &&\n\t\t\t\t\t\t\t\tthis.onUpdateMyBills(msg.MyBills, msg.MySeqBills);\n\t\t\t\t\t\t\t// 如果活动为手工举牌，显示举牌按钮\n\t\t\t\t\t\t\tif (this.activeType === 1) {\n\t\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"举牌\", \"2\", true, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.SeqBills = msg.SeqBills;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\t// 登录响应消息\n\t\t\t\t\t\tif (msg.IsError) {\n\t\t\t\t\t\t\tconsole.log(\"登录失败：\" + msg.ErrMsg);\n\t\t\t\t\t\t\tlet content: string = \"你暂未登录，请点击确定去登录！\";\n\t\t\t\t\t\t\tdefaultShowModal(content).then((res: any) => {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tconsole.log(\"用户点击确定\");\n\t\t\t\t\t\t\t\t\tnavigateTo(\"../../ucenter/login/login\");\n\t\t\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t\t\t\tconsole.log(\"用户点击取消\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// 登录成功，提示用户\n\t\t\t\t\t\t\tthis.UserID = msg.UserID;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.init();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\t// 托管响应\n\t\t\t\t\t\tif (msg.IsError) {\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"托管\", \"1\", true, true);\n\t\t\t\t\t\t\tshowToast(\"托管失败!\" + msg.ErrMsg);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"取消托管\", \"1\", true, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\t// 取消托管响应消息\n\t\t\t\t\t\tif (msg.IsError) {\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"取消托管\", \"1\", true, true);\n\t\t\t\t\t\t\tshowToast(\"取消托管,\" + msg.ErrMsg);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"托管\", \"1\", true, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\t// 活动详情页初始化响应\n\t\t\t\t\t\tthis.timerDurationTitle = msg.TimerDurationTitle; // 状态对应要显示的标题\n\t\t\t\t\t\tif (this.activeType === 1) {\n\t\t\t\t\t\t\tthis.times = msg.TimerDurationText;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 倒计时显示文本\n\t\t\t\t\t\t// 判断是否需要倒计时，如果不需要则清除倒计时器,不显示times\n\t\t\t\t\t\tif (msg.TimerDurationValue === 0) {\n\t\t\t\t\t\t\tthis.times = \"\";\n\t\t\t\t\t\t\tthis.timerState(null);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet dt = new Date();\n\t\t\t\t\t\t\tlet tm = dt.getTime() + msg.TimerDurationValue;\n\t\t\t\t\t\t\tthis.seqTime.setTime(tm);\n\t\t\t\t\t\t\tthis.timerState(this.seqTime);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 处理按钮的初始状态列表\n\t\t\t\t\t\tthis.buttonsEvent(msg.ButtonsList);\n\t\t\t\t\t\t// 更新最近出价人列表信息，更新全部举牌次数、我的举牌次数、和最新价格\n\t\t\t\t\t\tthis.onPriceUpdateEvent &&\n\t\t\t\t\t\t\tthis.onPriceUpdateEvent(msg.Price, msg.AllBills, msg.LastBills);\n\t\t\t\t\t\t// 更新全局报名状态信息\n\t\t\t\t\t\tthis.onUpdateAllSignups &&\n\t\t\t\t\t\t\tthis.onUpdateAllSignups(msg.AllSignups, msg.MaxSignups);\n\t\t\t\t\t\t// 更新我的报名状态信息\n\t\t\t\t\t\tthis.onUpdateMySignups &&\n\t\t\t\t\t\t\tthis.onUpdateMySignups(msg.MySignups, msg.SeqSignups);\n\t\t\t\t\t\tthis.onUpdateMyBills &&\n\t\t\t\t\t\t\tthis.onUpdateMyBills(msg.MyBills, msg.MySeqBills);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\t// 报名进度更新推送\n\t\t\t\t\t\tthis.onUpdateAllSignups &&\n\t\t\t\t\t\t\tthis.onUpdateAllSignups(msg.AllSignups, msg.MaxSignups);\n\t\t\t\t\t\t// 隐藏其它按钮\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"参与下一期\", \"4\", false, false);\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"填写收货地址\", \"3\", false, false);\n\t\t\t\t\t\tif (msg.AllSignups === msg.MaxSignups) {\n\t\t\t\t\t\t\t// 如果活动为手工举牌，显示举牌按钮\n\t\t\t\t\t\t\tif (this.activeType === 0) {\n\t\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"举牌\", \"2\", true, false);\n\t\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"托管\", \"1\", true, false);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"举牌\", \"2\", true, true);\n\t\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"托管\", \"1\", true, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// 已满员，隐藏掉报名按钮\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"报名\", \"0\", false, false);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"举牌\", \"2\", false, false);\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"托管\", \"1\", false, false);\n\t\t\t\t\t\t\t// 还需要继续报名，显示报名按钮\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"报名\", \"0\", true, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 8:\n\t\t\t\t\t\t// 价格更新通知\n\t\t\t\t\t\t// 更新全部举牌次数、我的举牌次数、和最新价格\n\t\t\t\t\t\tthis.BillStat = \"总举牌次数：\" + msg.AllBills + \"次\";\n\t\t\t\t\t\t// 更新最后出价人信息\n\t\t\t\t\t\tif (msg.Bills.length > 0) {\n\t\t\t\t\t\t\tthis.newPrice = `￥${msg.Bills[0].Price}`;\n\t\t\t\t\t\t\tthis.newBill = msg.Bills[0].bill;\n\t\t\t\t\t\t\tthis.newFace = msg.Bills[0].bill.face;\n\t\t\t\t\t\t\tthis.newNick = `领先人：${decodeURIComponent(msg.Bills[0].nick)}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 更新最近出局人信息\n\t\t\t\t\t\tif (msg.Bills.length > 1) {\n\t\t\t\t\t\t\tthis.lastBills = msg.Bills;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (msg.SeqMiniSecounds > 0) {\n\t\t\t\t\t\t\t// 计算剩余时长\n\t\t\t\t\t\t\tlet dt = new Date();\n\t\t\t\t\t\t\tlet tm = dt.getTime() + msg.SeqMiniSecounds;\n\t\t\t\t\t\t\tthis.seqTime.setTime(tm);\n\t\t\t\t\t\t\tthis.timerState(this.seqTime);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 更新价格事件\n\t\t\t\t\t\tthis.onPriceUpdateEvent &&\n\t\t\t\t\t\t\tthis.onPriceUpdateEvent(msg.Price, msg.AllBills, msg.Bills);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 9:\n\t\t\t\t\t\t//计算剩余时间，并重置剩余时间\n\t\t\t\t\t\tlet dt = new Date();\n\t\t\t\t\t\tdt.setTime(dt.getTime() + msg.SeqMiniSecounds);\n\t\t\t\t\t\tthis.timerState(dt);\n\t\t\t\t\t\t// 设置倒计时标题为即将开拍\n\t\t\t\t\t\tthis.timerDurationTitle = \"开拍准备\";\n\t\t\t\t\t\t// 隐藏掉报名按钮\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"报名\", \"0\", false, false);\n\t\t\t\t\t\t// 禁用举牌、托管按钮，如果活动为手工举牌，显示举牌按钮\n\t\t\t\t\t\tif (this.activeType === 0) {\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"自动举牌中\", \"2\", true, false);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"举牌\", \"2\", true, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"托管\", \"1\", true, false);\n\t\t\t\t\t\t// 隐藏其它按钮\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"填写收货地址\", \"3\", false, false);\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"参与下一期\", \"4\", false, false);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\t// 活动正式开始，但是目前尚未有人出价，所以收到此消息，先停止计时器，并显示为 “等待首牌”\n\t\t\t\t\t\tthis.timerDurationTitle = \"正在竟拍\";\n\t\t\t\t\t\tthis.times = \"等待首牌\";\n\t\t\t\t\t\tthis.SeqBills = msg.SeqBills;\n\t\t\t\t\t\t// 清除计时器\n\t\t\t\t\t\tthis.timerState(null);\n\t\t\t\t\t\t// 设置价格\n\t\t\t\t\t\tthis.newPrice = \"￥\" + msg.currPrice;\n\t\t\t\t\t\t// 判断活动类型，如果是人工举牌，显示托管、举牌；如果是自动举牌，举牌按钮更改为“自动举牌中”，其它按钮全部隐藏\n\t\t\t\t\t\tif (msg.ActiveType === 0) {\n\t\t\t\t\t\t\t// 停用其它按钮，仅剩下举牌按钮，且举牌按钮状态显示为自动举牌中\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"自动举牌中\", \"2\", true, false);\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"托管\", \"1\", true, false);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// 启用举牌、托管按钮\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"举牌\", \"2\", true, true);\n\t\t\t\t\t\t\tif (msg.IsTap) {\n\t\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"取消托管\", \"1\", true, true);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"托管\", \"1\", true, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 隐藏掉报名、填写地址、参与下一期按钮\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"报名\", \"0\", false, false);\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"填写收货地址\", \"3\", false, false);\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"参与下一期\", \"4\", false, false);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 11:\n\t\t\t\t\t\t// 活动结束通知\n\t\t\t\t\t\tthis.timerState(null);\n\t\t\t\t\t\tthis.timerDurationTitle = \"活动结束\";\n\t\t\t\t\t\tthis.times = \"已成交\";\n\t\t\t\t\t\tthis.newCurrent = \"成交价\";\n\t\t\t\t\t\tthis.newCurrentBidder = \"中拍人\";\n\t\t\t\t\t\t// 判断是否当前用户，如果是当前用户，则需要弹出收货地址和订单信息处理界面\n\t\t\t\t\t\tif (this.UserID === msg.WinsBill.bill.UserID) {\n\t\t\t\t\t\t\t// 当前用户\n\t\t\t\t\t\t\tshowToast(\"恭喜，您已中拍！点击确定去填写订单信息吧！\");\n\t\t\t\t\t\t\t// 隐藏其它按钮\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"报名\", \"0\", false, false);\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"举牌\", \"2\", false, false);\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"托管\", \"1\", false, false);\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"参与下一期\", \"4\", false, false);\n\t\t\t\t\t\t\t// 触发填写地址按钮的显示，其它按钮隐藏\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"填写收货地址\", \"3\", true, true);\n\t\t\t\t\t\t\tthis.orderID = msg.WinsOrder.OrderID;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// 隐藏掉其它按钮\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"报名\", \"0\", false, false);\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"举牌\", \"1\", false, false);\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"托管\", \"2\", false, false);\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"填写收货地址\", \"3\", false, false);\n\t\t\t\t\t\t\t// 触发下一期按钮的显示，其它按钮隐藏\n\t\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\t\tthis.buttonStateChanged(\"参与下一期\", \"4\", true, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 12:\n\t\t\t\t\t\t// 解除托管\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t// 活动流拍通知\n\t\t\t\t\t\tthis.timerDurationTitle = \"活动流拍\";\n\t\t\t\t\t\t// 隐藏掉其它按钮\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"报名\", \"0\", false, false);\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"举牌\", \"1\", false, false);\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"托管\", \"2\", false, false);\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"填写收货地址\", \"3\", false, false);\n\t\t\t\t\t\t// 触发下一期按钮的显示，其它按钮隐藏\n\t\t\t\t\t\tthis.buttonStateChanged &&\n\t\t\t\t\t\t\tthis.buttonStateChanged(\"参与下一期\", \"4\", true, true);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"处理消息出错：\" + e);\n\t\t\t}\n\t\t},\n\n\t\t// 定义按钮处理函数\n\t\tbuttonStateChanged(text: any, type: any, isDisplay: any, isEnabled: any) {\n\t\t\tthis.buttonsList = JSON.parse(JSON.stringify(this.buttonsList));\n\t\t\tthis.buttonsList.map((item: any, i: any, value: any) => {\n\t\t\t\tvalue[type].ButtonText = text;\n\t\t\t\tvalue[type].ButtonVisibility = isDisplay;\n\t\t\t\tvalue[type].ButtonEnabled = isEnabled;\n\t\t\t\tif (item.ButtonType === 1 && item.ButtonVisibility) {\n\t\t\t\t\tthis.seqBillsShow = true;\n\t\t\t\t} else if (item.ButtonType === 2 && item.ButtonVisibility) {\n\t\t\t\t\tthis.seqBillsShow = true;\n\t\t\t\t} else if (item.ButtonType === 3 && item.ButtonVisibility) {\n\t\t\t\t\tthis.seqBillsShow = false;\n\t\t\t\t} else if (item.ButtonType === 4 && item.ButtonVisibility) {\n\t\t\t\t\tthis.seqBillsShow = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.buttonsEvent(this.buttonsList);\n\t\t},\n\n\t\t// 处理按列表事件\n\t\tbuttonsEvent(event: any) {\n\t\t\tthis.buttonsList = JSON.parse(JSON.stringify(event));\n\t\t\tthis.buttonsList.map((item: any, i: any, value: any) => {\n\t\t\t\tif (item.ButtonType === 1 && item.ButtonVisibility) {\n\t\t\t\t\tthis.seqBillsShow = true;\n\t\t\t\t} else if (item.ButtonType === 2 && item.ButtonVisibility) {\n\t\t\t\t\tthis.seqBillsShow = true;\n\t\t\t\t} else if (item.ButtonType === 3 && item.ButtonVisibility) {\n\t\t\t\t\tthis.seqBillsShow = false;\n\t\t\t\t} else if (item.ButtonType === 4 && item.ButtonVisibility) {\n\t\t\t\t\tthis.seqBillsShow = false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t// 更新全局报名信息\n\t\tonUpdateAllSignups(curr: string, max: string) {\n\t\t\tthis.currSignups = `总已报名份数：${curr}份`;\n\t\t\tthis.maxSignups = `总需报名份数：${max}份`;\n\t\t},\n\n\t\t// 更新我的报名信息\n\t\tonUpdateMySignups(curr: string, seq: string) {\n\t\t\tthis.signups = `我已报名份数：${curr}份`;\n\t\t\tthis.seqSignups = `还可报名份数：${seq}份`;\n\t\t},\n\n\t\t// 更新我的举牌信息\n\t\tonUpdateMyBills(mybills: string, seqbills: string) {\n\t\t\tthis.myBills = `我的举牌次数：${mybills}次`;\n\t\t\tthis.seqBills = `剩余可用次数：${seqbills}次`;\n\t\t\tthis.myBills = mybills;\n\t\t\tthis.SeqBills = seqbills;\n\t\t},\n\n\t\t// 更新价格事件\n\t\tonPriceUpdateEvent(startPrice: any, allBills: any, lastBills: any) {\n\t\t\t// 更新全部举牌次数、我的举牌次数、和最新价格\n\t\t\tif (lastBills.length > 0) {\n\t\t\t\tconsole.log(\"oneBills\", lastBills);\n\t\t\t\t// 有人出价，按最后出价人\n\t\t\t\tthis.newBill = lastBills[0].bill;\n\t\t\t\tthis.newFace = lastBills[0].face;\n\t\t\t\tthis.newNick = `领先人：${decodeURIComponent(lastBills[0].nick)}`;\n\t\t\t\tthis.newCity = `${lastBills[0].bill.Province}`;\n\t\t\t\tthis.newPrice = `￥${lastBills[0].bill.Price}`;\n\t\t\t\tlet active: any = this.active;\n\t\t\t\tif (active.ActiveStatus === 4) {\n\t\t\t\t\tthis.newCurrent = \"本期成交\";\n\t\t\t\t\tthis.newCurrentBidder = \"本期成交人\";\n\t\t\t\t} else {\n\t\t\t\t\tthis.newCurrent = \"当前出价\";\n\t\t\t\t\tthis.newCurrentBidder = \"当前领先出价人\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// 未有人出价，按起拍价\n\t\t\t\tthis.newBill = \"\";\n\t\t\t\tthis.newFace = \"\";\n\t\t\t\tthis.newNick = \"\";\n\t\t\t\tthis.newCity = \"\";\n\t\t\t\tthis.newCurrentBidder = \"\";\n\t\t\t\tthis.newPrice = `￥${startPrice}`;\n\t\t\t\tthis.newCurrent = \"起拍价\";\n\t\t\t}\n\t\t\tthis.allBills = allBills; // '活动总举牌次数：' + allBills + '次'\n\t\t\t// 更新最近出局人信息\n\t\t\tthis.lastBills = lastBills.slice(1, 3);\n\t\t\tthis.lastBills.map((item: any) => {\n\t\t\t\titem.nick = decodeURIComponent(item.nick);\n\t\t\t});\n\t\t},\n\t\tformSubmit(e: any) {\n\t\t\tconsole.log(\"formId\", e);\n\t\t\tlet formId = e.detail.formId;\n\t\t\tlet data = {\n\t\t\t\tFormID: formId\n\t\t\t};\n\t\t\trequest(AddUserFormID, data).then((res: any) => {\n\t\t\t\tconsole.log(res);\n\t\t\t});\n\t\t},\n\t\tasync billTap(type: any) {\n\t\t\tlet action = type;\n\t\t\tlet ActiveID = this.activeID;\n\t\t\tlet num = this.num;\n\t\t\tlet Price = this.Price;\n\t\t\tlet GUID: any = await this.GUID();\n\t\t\tlet msgTime = formatTime(new Date());\n\t\t\tconsole.log(\"switch\", type);\n\t\t\tswitch (action) {\n\t\t\t\tcase \"报名\":\n\t\t\t\t\tlet SignupMsg = {\n\t\t\t\t\t\tActiveID: ActiveID,\n\t\t\t\t\t\tShares: num,\n\t\t\t\t\t\tmsgID: GUID,\n\t\t\t\t\t\tmsgType: 1,\n\t\t\t\t\t\tmsgTime: msgTime\n\t\t\t\t\t};\n\t\t\t\t\tthis.sendSocketMessage(SignupMsg);\n\t\t\t\t\tthis.show = !this.show;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"举牌\":\n\t\t\t\t\tlet billMsg = {\n\t\t\t\t\t\tActiveID: ActiveID,\n\t\t\t\t\t\tPrice: Price,\n\t\t\t\t\t\tmsgID: GUID,\n\t\t\t\t\t\tmsgType: 2,\n\t\t\t\t\t\tmsgTime: msgTime\n\t\t\t\t\t};\n\t\t\t\t\tthis.sendSocketMessage(billMsg);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"托管\":\n\t\t\t\t\tlet tapMsg = {\n\t\t\t\t\t\tActiveID: ActiveID,\n\t\t\t\t\t\tmsgID: GUID,\n\t\t\t\t\t\tmsgType: 4,\n\t\t\t\t\t\tmsgTime: msgTime\n\t\t\t\t\t};\n\t\t\t\t\tthis.sendSocketMessage(tapMsg);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"取消托管\":\n\t\t\t\t\tlet cancelTapMsg = {\n\t\t\t\t\t\tActiveID: ActiveID,\n\t\t\t\t\t\tmsgID: GUID,\n\t\t\t\t\t\tmsgType: 5,\n\t\t\t\t\t\tmsgTime: msgTime\n\t\t\t\t\t};\n\t\t\t\t\tthis.sendSocketMessage(cancelTapMsg);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"填写收货地址\":\n\t\t\t\t\tlet disabled = true;\n\t\t\t\t\tlet productID = this.productID;\n\t\t\t\t\tlet OrderID = this.orderID;\n\t\t\t\t\tnavigateTo(\n\t\t\t\t\t\t\"/pages/ucenter/addressShipping/addressShipping?disabled=\" +\n\t\t\t\t\t\t\tdisabled +\n\t\t\t\t\t\t\t\"&productID=\" +\n\t\t\t\t\t\t\tproductID +\n\t\t\t\t\t\t\t\"&orderID=\" +\n\t\t\t\t\t\t\tOrderID\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"参与下一期\":\n\t\t\t\t\tlet nexActive: any = await this.getNextActive();\n\t\t\t\t\tthis.activities(nexActive);\n\t\t\t\t\tuni.closeSocket();\n\t\t\t\t\tthis.websocket();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t// 倒计时\n\t\ttimerState(time: any) {\n\t\t\tif (time === null) {\n\t\t\t\tclearInterval(this.timer);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!(time instanceof Date)) {\n\t\t\t\tconsole.error(\"传入日期时间格式不正确！\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (time.getTime() < new Date().getTime()) {\n\t\t\t\t// 时间错误，时间必须是未来的日期时间\n\t\t\t\tconsole.error(\"设置倒计时器无效，日期时间必须是未来的时间！\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 清除旧的倒计时器\n\t\t\tclearInterval(this.timer);\n\t\t\tthis.timer = setInterval(() => {\n\t\t\t\tthis.seqDisplay(time);\n\t\t\t}, 100);\n\t\t},\n\t\t// 下面处理倒计时的显示，实际上时间是由服务器webSocket返回的\n\t\tseqDisplay(time: any) {\n\t\t\tlet date: any = new Date();\n\t\t\tlet between: any = time - date;\n\t\t\tlet sec: any = Math.floor(between / 1000);\n\t\t\tlet hours: any = Math.floor(Math.floor(sec / 60) / 60) % 24;\n\t\t\tlet days: any =\n\t\t\t\tMath.floor(Math.floor(Math.floor(sec / 60) / 60) / 24) % 30;\n\t\t\tlet minutes: any = Math.floor(sec / 60) % 60;\n\t\t\tlet seconds: any = sec % 60;\n\t\t\tlet minisec: any = Math.floor(between / 100) % 10;\n\t\t\tif (seconds < 0) {\n\t\t\t\tthis.times = \"\";\n\t\t\t} else {\n\t\t\t\tif (hours < 10) {\n\t\t\t\t\thours = \"0\" + hours;\n\t\t\t\t}\n\t\t\t\tif (minutes < 10) {\n\t\t\t\t\tminutes = \"0\" + minutes;\n\t\t\t\t}\n\t\t\t\tif (seconds < 10) {\n\t\t\t\t\tseconds = \"0\" + seconds;\n\t\t\t\t}\n\t\t\t\thours = +hours + days * 24;\n\t\t\t\tlet times = hours + \":\" + minutes + \":\" + seconds + \".\" + minisec;\n\t\t\t\tthis.times = times;\n\t\t\t}\n\t\t},\n\t\t// 下面是生成随机GUID的函数\n\t\tGUID() {\n\t\t\treturn new Promise((sesolve, reject) => {\n\t\t\t\tlet guid = \"\";\n\t\t\t\tfor (let i = 1; i <= 32; i++) {\n\t\t\t\t\tlet n = Math.floor(Math.random() * 16.0).toString(16);\n\t\t\t\t\tguid += n;\n\t\t\t\t\tif (i == 8 || i == 12 || i == 16 || i == 20) guid += \"-\";\n\t\t\t\t}\n\t\t\t\tsesolve(guid);\n\t\t\t});\n\t\t}\n\t}\n});\n"],"sourceRoot":""}]}