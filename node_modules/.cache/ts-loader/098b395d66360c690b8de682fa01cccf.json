{"remainingRequest":"/Users/lee/Desktop/github/mall-project/node_modules/babel-loader/lib/index.js!/Users/lee/Desktop/github/mall-project/node_modules/ts-loader/index.js??ref--13-2!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-3!/Users/lee/Desktop/github/mall-project/src/common/utils/util.ts","dependencies":[{"path":"/Users/lee/Desktop/github/mall-project/src/common/utils/util.ts","mtime":1564245312184},{"path":"/Users/lee/Desktop/github/mall-project/src/sfc.d.ts","mtime":1560261569183},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/tslib/tslib.d.ts","mtime":1560261193267},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/index.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/vue.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/options.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/vnode.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/plugin.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vuex/types/index.d.ts","mtime":1560261210230},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vuex/types/vue.d.ts","mtime":1560261210230},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vuex/types/helpers.d.ts","mtime":1560261210230},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/ts-md5/dist/md5.d.ts","mtime":1560260225015},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/index.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/app.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/common.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/page.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/uni.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/vue.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/html5plus/plus.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@types/webpack-env/index.d.ts","mtime":1563798348579},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.esnext.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2016.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es5.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.core.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.collection.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.generator.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.promise.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.iterable.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.symbol.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.proxy.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.reflect.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.symbol.wellknown.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2016.array.include.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.object.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.sharedmemory.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.string.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.intl.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.typedarrays.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.asynciterable.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.promise.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.regexp.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.intl.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.array.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.object.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.string.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.symbol.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.esnext.bigint.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.esnext.intl.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.dom.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.dom.iterable.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.scripthost.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/tslib/tslib.d.ts","mtime":1560261193267},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/ts-md5/dist/md5.d.ts","mtime":1560260225015},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/babel-loader/lib/index.js","mtime":1560261191357},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/ts-loader/index.js","mtime":1560261210667},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatTime = formatTime;\nexports.previewImage = exports.redirectTo = exports.navigateBack = exports.navigateTo = exports.defaultShowModal = exports.showModal = exports.showToast = exports.showErrorToast = exports.upload = exports.request = void 0;\n\nvar _md = require(\"ts-md5/dist/md5\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction formatTime(date) {\n  var year = date.getFullYear();\n  var month = date.getMonth() + 1;\n  var day = date.getDate();\n  var hour = date.getHours();\n  var minute = date.getMinutes();\n  var second = date.getSeconds();\n  return [year, month, day].map(formatNumber).join('-') + ' ' + [hour, minute, second].map(formatNumber).join(':');\n}\n\nvar formatNumber = function formatNumber(n) {\n  var str = n.toString();\n  return str[1] ? str : '0' + str;\n};\n\nvar processing = function processing(api, data) {\n  var sessionkey = uni.getStorageSync('SessionKey');\n  var Appkey = \"3957399\",\n      AppSecert = \"2d2c443086630f6c2c804d11983729c8\",\n      url = \"https://api.tengpaisc.com/Rest.ashx\";\n  var paramkey = Object.keys(data),\n      paramdata = \"\",\n      sign = \"\";\n  paramkey.sort(function (a, b) {\n    if (a.toLowerCase() > b.toLowerCase()) {\n      return 1;\n    } else {\n      return -1;\n    }\n  });\n  paramkey.map(function (item) {\n    paramdata += data[item];\n  });\n  paramdata = \"\".concat(AppSecert).concat(paramdata).concat(AppSecert);\n  sign = _md.Md5.hashStr(paramdata).toString();\n  var systemdata = {\n    Appkey: Appkey,\n    V: 1,\n    AppVer: 1,\n    Format: \"json\",\n    SessionKey: sessionkey,\n    Method: api,\n    Sign: sign\n  };\n\n  var postdata = _objectSpread({}, systemdata, {}, data);\n\n  var handle = {\n    url: url,\n    postdata: postdata\n  };\n  return handle;\n};\n\nvar request = function request(api, data) {\n  return new Promise(function (resolve, reject) {\n    var handle = processing(api, data);\n    uni.showLoading({\n      title: '加载中'\n    });\n    uni.request({\n      url: handle.url,\n      data: handle.postdata,\n      method: \"POST\",\n      header: {\n        \"content-type\": \"application/x-www-form-urlencoded\"\n      },\n      success: function success(res) {\n        if (res.statusCode == 200) {\n          uni.hideLoading();\n          uni.stopPullDownRefresh();\n\n          if (!res.data.IsError) {\n            resolve(res.data);\n          } else {\n            if (res.data.ErrCode == \"Missing_Session\") {\n              navigateTo(\"../../ucenter/login/login\");\n            } else {\n              showToast(res.data.ErrMsg);\n            }\n          }\n        } else {\n          reject(res.errMsg);\n        }\n      },\n      fail: function fail(err) {\n        reject(err);\n        showToast(\"网络出错!\");\n      }\n    });\n  });\n};\n\nexports.request = request;\n\nvar upload = function upload(api, data, filePath) {\n  return new Promise(function (resolve, reject) {\n    var handle = processing(api, data);\n    console.log(api, data, filePath);\n    uni.uploadFile({\n      url: handle.url,\n      filePath: filePath,\n      name: 'file',\n      formData: handle.postdata,\n      success: function success(res) {\n        var data = res.data;\n        console.log(res);\n        resolve(res.data);\n      },\n      fail: function fail(err) {\n        reject(err);\n        showToast(\"网络出错!\");\n      }\n    });\n  });\n};\n\nexports.upload = upload;\n\nvar showErrorToast = function showErrorToast(msg) {\n  uni.showToast({\n    title: msg,\n    image: '/static/icon_error.png'\n  });\n};\n\nexports.showErrorToast = showErrorToast;\n\nvar showToast = function showToast(msg) {\n  uni.showToast({\n    title: msg,\n    icon: 'none',\n    duration: 2000,\n    mask: true\n  });\n};\n\nexports.showToast = showToast;\n\nvar showModal = function showModal(msg) {\n  uni.showModal({\n    content: msg,\n    confirmColor: '#fe7f00',\n    showCancel: false,\n    success: function success(res) {\n      console.log(res);\n    }\n  });\n};\n\nexports.showModal = showModal;\n\nvar defaultShowModal = function defaultShowModal(content) {\n  return new Promise(function (resolve, reject) {\n    uni.showModal({\n      content: content,\n      confirmColor: '#fe7f00',\n      success: function success(res) {\n        resolve(res);\n      }\n    });\n  });\n};\n\nexports.defaultShowModal = defaultShowModal;\n\nvar navigateTo = function navigateTo(url) {\n  uni.navigateTo({\n    url: url\n  });\n};\n\nexports.navigateTo = navigateTo;\n\nvar navigateBack = function navigateBack(delta) {\n  uni.navigateBack({\n    delta: delta\n  });\n};\n\nexports.navigateBack = navigateBack;\n\nvar redirectTo = function redirectTo(url) {\n  uni.redirectTo({\n    url: url\n  });\n};\n\nexports.redirectTo = redirectTo;\n\nvar previewImage = function previewImage(current, urls) {\n  return new Promise(function (resolve, reject) {\n    uni.previewImage({\n      current: current,\n      urls: urls\n    });\n  });\n};\n\nexports.previewImage = previewImage;",{"version":3,"sources":["/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-3!/Users/lee/Desktop/github/mall-project/src/common/utils/util.ts"],"names":[],"mappings":"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","sourcesContent":["import { Md5 } from \"ts-md5/dist/md5\"\r\n\r\nexport function formatTime(date: Date): string {\r\n  const year = date.getFullYear()\r\n  const month = date.getMonth() + 1\r\n  const day = date.getDate()\r\n  const hour = date.getHours()\r\n  const minute = date.getMinutes()\r\n  const second = date.getSeconds()\r\n  return [year, month, day].map(formatNumber).join('-') + ' ' + [hour, minute, second].map(formatNumber).join(':')\r\n}\r\n\r\nconst formatNumber = (n: number) => {\r\n  const str = n.toString()\r\n  return str[1] ? str : '0' + str\r\n}\r\n\r\nconst processing = (api: any, data: any) => {\r\n  const sessionkey = uni.getStorageSync('SessionKey')\r\n  let Appkey = \"3957399\",\r\n    AppSecert = \"2d2c443086630f6c2c804d11983729c8\",\r\n    url = \"https://api.tengpaisc.com/Rest.ashx\"\r\n  let paramkey = Object.keys(data),\r\n    paramdata = \"\",\r\n    sign = \"\"\r\n  paramkey.sort((a: string, b: string) => {\r\n    if (a.toLowerCase() > b.toLowerCase()) {\r\n      return 1\r\n    } else {\r\n      return -1\r\n    }\r\n  })\r\n  paramkey.map((item: string) => {\r\n    paramdata += data[item]\r\n  })\r\n  paramdata = `${AppSecert}${paramdata}${AppSecert}`\r\n  sign = Md5.hashStr(paramdata).toString()\r\n  let systemdata = {\r\n    Appkey: Appkey,\r\n    V: 1,\r\n    AppVer: 1,\r\n    Format: \"json\",\r\n    SessionKey: sessionkey,\r\n    Method: api,\r\n    Sign: sign\r\n  }\r\n  let postdata = {\r\n    ...systemdata,\r\n    ...data\r\n  }\r\n  let handle = {\r\n    url,\r\n    postdata\r\n  }\r\n  return handle\r\n}\r\n\r\nexport const request = (api: any, data: any) => {\r\n  return new Promise((resolve, reject) => {\r\n    let handle = processing(api, data)\r\n    uni.showLoading({\r\n      title: '加载中'\r\n    })\r\n    uni.request({\r\n      url: handle.url,\r\n      data: handle.postdata,\r\n      method: \"POST\",\r\n      header: {\r\n        \"content-type\": \"application/x-www-form-urlencoded\"\r\n      },\r\n      success: (res: any) => {\r\n        if (res.statusCode == 200) {\r\n          uni.hideLoading()\r\n          uni.stopPullDownRefresh()\r\n          if (!res.data.IsError) {\r\n            resolve(res.data)\r\n          } else {\r\n            if (res.data.ErrCode == \"Missing_Session\") {\r\n              navigateTo(\"../../ucenter/login/login\")\r\n            } else {\r\n              showToast(res.data.ErrMsg)\r\n            }\r\n          }\r\n        } else {\r\n          reject(res.errMsg)\r\n        }\r\n      },\r\n      fail: (err: any) => {\r\n        reject(err)\r\n        showToast(\"网络出错!\")\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nexport const upload = (api: any, data: any, filePath: any) => {\r\n  return new Promise((resolve, reject) => {\r\n    let handle = processing(api, data)\r\n    console.log(api, data, filePath)\r\n    uni.uploadFile({\r\n      url: handle.url,\r\n      filePath: filePath,\r\n      name: 'file',\r\n      formData: handle.postdata,\r\n      success(res: any) {\r\n        const data = res.data\r\n        console.log(res)\r\n        resolve(res.data)\r\n      },\r\n      fail(err: any) {\r\n        reject(err)\r\n        showToast(\"网络出错!\")\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nexport const showErrorToast = (msg: any) => {\r\n  uni.showToast({\r\n    title: msg,\r\n    image: '/static/icon_error.png'\r\n  })\r\n}\r\n\r\nexport const showToast = (msg: any) => {\r\n  uni.showToast({\r\n    title: msg,\r\n    icon: 'none',\r\n    duration: 2000,\r\n    mask: true\r\n  })\r\n}\r\n\r\nexport const showModal = (msg: any) => {\r\n  uni.showModal({\r\n    content: msg,\r\n    confirmColor: '#fe7f00',\r\n    showCancel: false,\r\n    success: (res: any) => {\r\n      console.log(res)\r\n    }\r\n  })\r\n}\r\n\r\nexport const defaultShowModal = (content: string) => {\r\n  return new Promise((resolve, reject) => {\r\n    uni.showModal({\r\n      content: content,\r\n      confirmColor: '#fe7f00',\r\n      success: (res: any) => {\r\n        resolve(res)\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nexport const navigateTo = (url: any) => {\r\n  uni.navigateTo({\r\n    url: url\r\n  })\r\n}\r\n\r\nexport const navigateBack = (delta: number) => {\r\n  uni.navigateBack({\r\n    delta: delta\r\n  });\r\n}\r\n\r\nexport const redirectTo = (url: any) => {\r\n  uni.redirectTo({\r\n    url: url\r\n  })\r\n}\r\n\r\nexport const previewImage = (current: any, urls: any) => {\r\n  return new Promise((resolve, reject) => {\r\n    uni.previewImage({\r\n      current: current,\r\n      urls: urls\r\n    });\r\n  })\r\n}"],"sourceRoot":""}]}