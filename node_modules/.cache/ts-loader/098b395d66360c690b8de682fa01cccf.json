{"remainingRequest":"/Users/lee/Desktop/github/mall-project/node_modules/babel-loader/lib/index.js!/Users/lee/Desktop/github/mall-project/node_modules/ts-loader/index.js??ref--13-2!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-3!/Users/lee/Desktop/github/mall-project/src/common/utils/util.ts","dependencies":[{"path":"/Users/lee/Desktop/github/mall-project/src/common/utils/util.ts","mtime":1565200702995},{"path":"/Users/lee/Desktop/github/mall-project/src/sfc.d.ts","mtime":1560261569183},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/tslib/tslib.d.ts","mtime":1560261193267},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/index.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/vue.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/options.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/vnode.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue/types/plugin.d.ts","mtime":1554990780697},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vuex/types/index.d.ts","mtime":1560261210230},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vuex/types/vue.d.ts","mtime":1560261210230},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vuex/types/helpers.d.ts","mtime":1560261210230},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/ts-md5/dist/md5.d.ts","mtime":1560260225015},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/index.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/app.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/common.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/page.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/uni.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/uni-app/vue.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/types/html5plus/plus.d.ts","mtime":1563798347908},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@types/webpack-env/index.d.ts","mtime":1563798348579},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.esnext.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2016.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es5.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.core.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.collection.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.generator.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.promise.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.iterable.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.symbol.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.proxy.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.reflect.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2015.symbol.wellknown.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2016.array.include.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.object.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.sharedmemory.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.string.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.intl.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2017.typedarrays.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.asynciterable.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.promise.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.regexp.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2018.intl.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.array.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.object.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.string.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.es2019.symbol.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.esnext.bigint.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.esnext.intl.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.dom.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.dom.iterable.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/typescript/lib/lib.scripthost.d.ts","mtime":1563798348876},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/tslib/tslib.d.ts","mtime":1560261193267},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/ts-md5/dist/md5.d.ts","mtime":1560260225015},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/babel-loader/lib/index.js","mtime":1560261191357},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/ts-loader/index.js","mtime":1560261210667},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatTime = formatTime;\nexports.previewImage = exports.switchTab = exports.redirectTo = exports.navigateBack = exports.navigateTo = exports.defaultShowModal = exports.showModal = exports.showToast = exports.showErrorToast = exports.upload = exports.request = exports.processing = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"/Users/lee/Desktop/github/mall-project/node_modules/@babel/runtime/regenerator\"));\n\nvar _md = require(\"ts-md5/dist/md5\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction formatTime(date) {\n  var year = date.getFullYear();\n  var month = date.getMonth() + 1;\n  var day = date.getDate();\n  var hour = date.getHours();\n  var minute = date.getMinutes();\n  var second = date.getSeconds();\n  return [year, month, day].map(formatNumber).join('-') + ' ' + [hour, minute, second].map(formatNumber).join(':');\n}\n\nvar formatNumber = function formatNumber(n) {\n  var str = n.toString();\n  return str[1] ? str : '0' + str;\n};\n\nvar processing = function processing(api, data) {\n  return new Promise(function (resolve, reject) {\n    try {\n      var sessionkey = uni.getStorageSync('SessionKey');\n      var Appkey = \"3957399\",\n          AppSecert = \"2d2c443086630f6c2c804d11983729c8\",\n          url = \"https://api.tengpaisc.com/Rest.ashx\";\n      var paramkey = Object.keys(data),\n          paramdata = \"\",\n          sign = \"\";\n      paramkey.sort(function (a, b) {\n        if (a.toLowerCase() > b.toLowerCase()) {\n          return 1;\n        } else {\n          return -1;\n        }\n      });\n      paramkey.map(function (item) {\n        paramdata += data[item];\n      });\n      paramdata = \"\".concat(AppSecert).concat(paramdata).concat(AppSecert);\n      sign = _md.Md5.hashStr(paramdata).toString();\n      var systemdata = {\n        Appkey: Appkey,\n        V: 1,\n        AppVer: 1,\n        Format: \"json\",\n        SessionKey: sessionkey,\n        Method: api,\n        Sign: sign\n      };\n\n      var postdata = _objectSpread({}, systemdata, {}, data);\n\n      var handle = {\n        url: url,\n        postdata: postdata\n      };\n      resolve(handle);\n    } catch (e) {\n      reject(e);\n    }\n  });\n};\n\nexports.processing = processing;\n\nvar request =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regenerator.default.mark(function _callee(api, data) {\n    var handle;\n    return _regenerator.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return processing(api, data);\n\n          case 2:\n            handle = _context.sent;\n            uni.showLoading({\n              title: '加载中'\n            });\n            uni.showNavigationBarLoading();\n            return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n              uni.request({\n                url: handle.url,\n                data: handle.postdata,\n                method: \"POST\",\n                header: {\n                  \"content-type\": \"application/x-www-form-urlencoded\"\n                },\n                success: function success(res) {\n                  if (res.statusCode == 200) {\n                    if (res.data.IsError) {\n                      if (res.data.ErrCode == \"Missing_Session\") {\n                        redirectTo(\"../../ucenter/login/login\");\n                      } else {\n                        showToast(res.data.ErrMsg);\n                      }\n                    } else {\n                      resolve(res.data);\n                    }\n                  } else {\n                    reject(res.errMsg);\n                  }\n                },\n                fail: function fail(err) {\n                  reject(err);\n                  showToast(\"网络出错!\");\n                },\n                complete: function complete() {\n                  uni.hideLoading();\n                  uni.hideNavigationBarLoading();\n                  uni.stopPullDownRefresh();\n                }\n              });\n            }));\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function request(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.request = request;\n\nvar upload =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regenerator.default.mark(function _callee2(api, data, filePath) {\n    var handle;\n    return _regenerator.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return processing(api, data);\n\n          case 2:\n            handle = _context2.sent;\n            return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n              uni.uploadFile({\n                url: handle.url,\n                filePath: filePath,\n                name: 'file',\n                formData: handle.postdata,\n                success: function success(res) {\n                  resolve(res.data);\n                },\n                fail: function fail(err) {\n                  reject(err);\n                  showToast(\"网络出错!\");\n                }\n              });\n            }));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function upload(_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexports.upload = upload;\n\nvar showErrorToast = function showErrorToast(msg) {\n  uni.showToast({\n    title: msg,\n    image: '/static/icon_error.png'\n  });\n};\n\nexports.showErrorToast = showErrorToast;\n\nvar showToast = function showToast(msg) {\n  uni.showToast({\n    title: msg,\n    icon: 'none',\n    duration: 2000,\n    mask: true\n  });\n};\n\nexports.showToast = showToast;\n\nvar showModal = function showModal(msg) {\n  uni.showModal({\n    content: msg,\n    confirmColor: '#fe7f00',\n    showCancel: false,\n    success: function success(res) {\n      console.log(res);\n    }\n  });\n};\n\nexports.showModal = showModal;\n\nvar defaultShowModal = function defaultShowModal(content) {\n  return new Promise(function (resolve, reject) {\n    uni.showModal({\n      content: content,\n      confirmColor: '#fe7f00',\n      success: function success(res) {\n        resolve(res);\n      }\n    });\n  });\n};\n\nexports.defaultShowModal = defaultShowModal;\n\nvar navigateTo = function navigateTo(url) {\n  uni.navigateTo({\n    url: url\n  });\n};\n\nexports.navigateTo = navigateTo;\n\nvar navigateBack = function navigateBack(delta) {\n  uni.navigateBack({\n    delta: delta\n  });\n};\n\nexports.navigateBack = navigateBack;\n\nvar redirectTo = function redirectTo(url) {\n  uni.redirectTo({\n    url: url\n  });\n};\n\nexports.redirectTo = redirectTo;\n\nvar switchTab = function switchTab(url) {\n  uni.switchTab({\n    url: url\n  });\n};\n\nexports.switchTab = switchTab;\n\nvar previewImage = function previewImage(current, urls) {\n  return new Promise(function (resolve, reject) {\n    uni.previewImage({\n      current: current,\n      urls: urls,\n      longPressActions: {\n        itemList: ['发送给朋友', '保存图片', '收藏'],\n        success: function success(data) {\n          resolve(data);\n          console.log('选中了第' + (data.tapIndex + 1) + '个按钮,第' + (data.index + 1) + '张图片');\n        },\n        fail: function fail() {\n          reject();\n        }\n      }\n    });\n  });\n};\n\nexports.previewImage = previewImage;",{"version":3,"sources":["/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-3!/Users/lee/Desktop/github/mall-project/src/common/utils/util.ts"],"names":[],"mappings":"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","sourcesContent":["import { Md5 } from \"ts-md5/dist/md5\"\r\n\r\nexport function formatTime(date: Date): string {\r\n  const year = date.getFullYear()\r\n  const month = date.getMonth() + 1\r\n  const day = date.getDate()\r\n  const hour = date.getHours()\r\n  const minute = date.getMinutes()\r\n  const second = date.getSeconds()\r\n  return [year, month, day].map(formatNumber).join('-') + ' ' + [hour, minute, second].map(formatNumber).join(':')\r\n}\r\n\r\nconst formatNumber = (n: number) => {\r\n  const str = n.toString()\r\n  return str[1] ? str : '0' + str\r\n}\r\n\r\nexport const processing = (api: any, data: any) => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      const sessionkey = uni.getStorageSync('SessionKey')\r\n      let Appkey = \"3957399\",\r\n        AppSecert = \"2d2c443086630f6c2c804d11983729c8\",\r\n        url = \"https://api.tengpaisc.com/Rest.ashx\"\r\n      let paramkey = Object.keys(data),\r\n        paramdata = \"\",\r\n        sign = \"\"\r\n      paramkey.sort((a: string, b: string) => {\r\n        if (a.toLowerCase() > b.toLowerCase()) {\r\n          return 1\r\n        } else {\r\n          return -1\r\n        }\r\n      })\r\n      paramkey.map((item: string) => {\r\n        paramdata += data[item]\r\n      })\r\n      paramdata = `${AppSecert}${paramdata}${AppSecert}`\r\n      sign = Md5.hashStr(paramdata).toString()\r\n      let systemdata = {\r\n        Appkey: Appkey,\r\n        V: 1,\r\n        AppVer: 1,\r\n        Format: \"json\",\r\n        SessionKey: sessionkey,\r\n        Method: api,\r\n        Sign: sign\r\n      }\r\n      let postdata = {\r\n        ...systemdata,\r\n        ...data\r\n      }\r\n      let handle: any = {\r\n        url,\r\n        postdata\r\n      }\r\n      resolve(handle)\r\n    } catch (e) {\r\n      reject(e)\r\n    }\r\n  })\r\n}\r\n\r\nexport const request = async (api: any, data: any) => {\r\n  let handle: any = await processing(api, data);\r\n\r\n  uni.showLoading({\r\n    title: '加载中'\r\n  })\r\n  uni.showNavigationBarLoading()\r\n\r\n\r\n\r\n\r\n  return new Promise((resolve, reject) => {\r\n    uni.request({\r\n      url: handle.url,\r\n      data: handle.postdata,\r\n      method: \"POST\",\r\n      header: {\r\n        \"content-type\": \"application/x-www-form-urlencoded\"\r\n      },\r\n      success: (res: any) => {\r\n        if (res.statusCode == 200) {\r\n          if (res.data.IsError) {\r\n            if (res.data.ErrCode == \"Missing_Session\") {\r\n              redirectTo(\"../../ucenter/login/login\")\r\n            } else {\r\n              showToast(res.data.ErrMsg)\r\n            }\r\n          } else {\r\n            resolve(res.data)\r\n          }\r\n        } else {\r\n          reject(res.errMsg)\r\n        }\r\n      },\r\n      fail: (err: any) => {\r\n        reject(err)\r\n        showToast(\"网络出错!\")\r\n      },\r\n      complete: () => {\r\n\r\n        uni.hideLoading()\r\n        uni.hideNavigationBarLoading()\r\n\r\n\r\n\r\n\r\n        uni.stopPullDownRefresh()\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nexport const upload = async (api: any, data: any, filePath: any) => {\r\n  let handle: any = await processing(api, data);\r\n  return new Promise((resolve, reject) => {\r\n    uni.uploadFile({\r\n      url: handle.url,\r\n      filePath: filePath,\r\n      name: 'file',\r\n      formData: handle.postdata,\r\n      success(res: any) {\r\n        resolve(res.data)\r\n      },\r\n      fail(err: any) {\r\n        reject(err)\r\n        showToast(\"网络出错!\")\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nexport const showErrorToast = (msg: any) => {\r\n  uni.showToast({\r\n    title: msg,\r\n    image: '/static/icon_error.png'\r\n  })\r\n}\r\n\r\nexport const showToast = (msg: any) => {\r\n  uni.showToast({\r\n    title: msg,\r\n    icon: 'none',\r\n    duration: 2000,\r\n    mask: true\r\n  })\r\n}\r\n\r\nexport const showModal = (msg: any) => {\r\n  uni.showModal({\r\n    content: msg,\r\n    confirmColor: '#fe7f00',\r\n    showCancel: false,\r\n    success: (res: any) => {\r\n      console.log(res)\r\n    }\r\n  })\r\n}\r\n\r\nexport const defaultShowModal = (content: string) => {\r\n  return new Promise((resolve, reject) => {\r\n    uni.showModal({\r\n      content: content,\r\n      confirmColor: '#fe7f00',\r\n      success: (res: any) => {\r\n        resolve(res)\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nexport const navigateTo = (url: any) => {\r\n  uni.navigateTo({\r\n    url: url\r\n  })\r\n}\r\n\r\nexport const navigateBack = (delta: number) => {\r\n  uni.navigateBack({\r\n    delta: delta\r\n  });\r\n}\r\n\r\nexport const redirectTo = (url: any) => {\r\n  uni.redirectTo({\r\n    url: url\r\n  })\r\n}\r\n\r\nexport const switchTab = (url: any) => {\r\n  uni.switchTab({\r\n    url: url\r\n  })\r\n}\r\n\r\nexport const previewImage = (current: any, urls: any) => {\r\n  return new Promise((resolve, reject) => {\r\n    uni.previewImage({\r\n      current: current,\r\n      urls: urls,\r\n      longPressActions: {\r\n        itemList: ['发送给朋友', '保存图片', '收藏'],\r\n        success(data: any) {\r\n          resolve(data)\r\n          console.log('选中了第' + (data.tapIndex + 1) + '个按钮,第' + (data.index + 1) + '张图片');\r\n        },\r\n        fail() {\r\n          reject()\r\n        }\r\n      }\r\n    })\r\n  })\r\n}"],"sourceRoot":""}]}