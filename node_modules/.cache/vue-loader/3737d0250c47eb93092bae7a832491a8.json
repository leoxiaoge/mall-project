{"remainingRequest":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lee/Desktop/github/mall-project/src/pages/index/home.vue?vue&type=style&index=0&id=03a62900&scoped=true&lang=css&","dependencies":[{"path":"/Users/lee/Desktop/github/mall-project/src/pages/index/home.vue","mtime":1565024881911},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/css-loader/index.js","mtime":1554990705185},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1563798333387},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/postcss-loader/src/index.js","mtime":1554990705524},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js","mtime":1563798333387},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":1563798331564}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.uni-swiper-dots-horizontal {\n  position: absolute;\n  font-size: 0;\n  margin-bottom: 40upx;\n  transform-origin:20% 40%;\n}\n\n.teng-option {\n  background-color: #fff;\n}\n\n.teng-options {\n  position: relative;\n  top: -14upx;\n  background-color: #fff;\n  padding-top: 28upx;\n  border-radius: 50%\n}\n\n.search-swiper {\n  position: relative;\n}\n\n.search {\n  position: absolute;\n  top: 20upx;\n  left: 50%;\n  transform: translate(-50%, 0);\n  width: 90%;\n  z-index: 999;\n}\n\n.search-icon {\n  position: absolute;\n  top: 12upx;\n  left: 4%;\n  width: 44upx;\n  height: 44upx;\n}\n\n.search input {\n  color: #a4a4a4;\n  background-color: rgba(160, 160, 160, .4);\n  border-radius: 100upx;\n  padding: 10upx 0 10upx 12%;\n}\n\n.placeholder {\n  color: #a4a4a4;\n}\n\n.teng-options-grid {\n  background-color: #fff;\n}\n\n.swiper-box {\n  height: 440upx;\n}\n\n.uni-swiper-msg {\n  border-top: 2upx solid #f4f4f4;\n}\n\n.uni-swiper-wrapper {\n  position: relative;\n  width: 90%;\n  border-left: 2upx solid #f4f4f4;\n  padding-left: 20upx;\n}\n\n.i-notice-original {\n  color: #fe7f00\n}\n\n.notice-more {\n  width: 120upx;\n  color: #6a6a6a;\n  border-left: 4upx solid #f4f4f4;\n  padding-left: 20upx;\n  z-index: 10;\n}\n\n.i-item-msg {\n  word-break: break-all;\n  display: -webkit-box;\n  overflow: hidden;\n  line-height:1.5;\n  text-overflow: ellipsis;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1\n}\n",{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqQA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"home.vue","sourceRoot":"src/pages/index","sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n    <mescroll-uni @down=\"downCallback\" @up=\"upCallback\">\r\n      <view class=\"content\">\r\n        <view class=\"search-swiper\">\r\n          <view class=\"search\" @click=\"search\">\r\n            <img class=\"search-icon\" :src=\"searchIcon\" />\r\n            <input placeholder=\"搜索好物\" placeholder-class=\"placeholder\" disabled=\"true\" />\r\n          </view>\r\n          <!-- 轮播 -->\r\n          <view class=\"i-padding-wrap\">\r\n            <view class=\"page-section swiper\">\r\n              <view class=\"page-section-spacing\">\r\n                <swiper\r\n                  class=\"swiper-box\"\r\n                  :indicator-dots=\"indicatorDots\"\r\n                  :autoplay=\"autoplay\"\r\n                  :interval=\"interval\"\r\n                  :duration=\"duration\"\r\n                  :circular=\"circular\"\r\n                  :indicator-active-color=\"indicatorActiveColor\"\r\n                >\r\n                  <swiper-item v-for=\"(item, index) in swiper\" :key=\"index\">\r\n                    <image :src=\"item.AdPicUrl\" mode=\"aspectFill\" />\r\n                  </swiper-item>\r\n                </swiper>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <!-- 分类导航 -->\r\n        <view class=\"teng-option\">\r\n          <view class=\"teng-options\"></view>\r\n          <view class=\"teng-options-grid\">\r\n            <uni-grid :options=\"list\" :show-border=\"false\" :show-out-border=\"false\" :column-num=\"4\" @click=\"listClick\" />\r\n          </view>\r\n        </view>\r\n        <!-- 滚动公告 -->\r\n        <view class=\"uni-swiper-msg\">\r\n          <view class=\"uni-swiper-msg-icon\">\r\n            <image src=\"/static/icon/icon_notice.png\" mode=\"widthFix\"></image>\r\n          </view>\r\n          <swiper class=\"uni-swiper-wrapper\" vertical=\"true\" autoplay=\"true\" circular=\"true\" interval=\"3000\" :display-multiple-items=\"multiple\">\r\n            <block v-for=\"(item, index) in LastTranActiveList\" :key=\"index\">\r\n              <swiper-item>\r\n                <view class=\"i-item-msg\">\r\n                  <view class=\"teng-notice-content\">恭喜<text class=\"i-notice-original\">{{item.OrderUserNick}}</text>以<text class=\"i-notice-original\">¥{{item.OrderMoney}}</text>元拍得{{item.ProductName}}</view>\r\n                </view>\r\n              </swiper-item>\r\n            </block>\r\n          </swiper>\r\n          <view class=\"notice-more\" @click=\"noticeList\">更多</view>\r\n        </view>\r\n        <!-- 正在竞拍 -->\r\n        <product-list-being :options=\"productListIng\" @lower=\"lower\" />\r\n        <!-- 即将开拍 -->\r\n        <product-list :options=\"productList\" />\r\n      </view>\r\n    </mescroll-uni>\r\n\t</view>\r\n</template>\r\n<script lang=\"ts\">\r\n  import Vue from 'vue'\r\n  import { request, navigateTo, formatTime } from '@/common/utils/util';\r\n  import { AdsListGet, LastTransactionListGet, HomeProductListGet } from '@/common/config/api';\r\n  import MescrollUni from \"@/components/mescroll-diy/mescroll-beibei.vue\";\r\n  import uniGrid from '@/components/uni-grid/uni-grid.vue';\r\n  import productListBeing from '@/components/product-list-being/product-list-being.vue';\r\n  import productList from '@/components/product-list/product-list.vue';\r\n  export default Vue.extend({\r\n\t\tcomponents: {\r\n      MescrollUni,\r\n      uniGrid,\r\n      productListBeing,\r\n      productList\r\n    },\r\n    data() {\r\n      return {\r\n        indicatorDots: true,\r\n        autoplay: true,\r\n        interval: 2000,\r\n        duration: 500,\r\n        circular: true,\r\n        indicatorActiveColor: '#fe7f00',\r\n        multiple: 1,\r\n        searchIcon: \"/static/icon/icon_search.png\",\r\n        productList: [], // 正在竞拍列表\r\n        productListIng: [], // 即将开拍列表\r\n        productListData: [], // 正在竞拍新列表\r\n        swiperGridHeight: '0px',\r\n        swiperGridWidth: '100%',\r\n        swiper:[],\r\n        LastTranActiveList: [], // 最新成交列表\r\n\r\n        PageCount: 1,\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n\r\n        list: [{\r\n          image: '/static/icon_experience.png',\r\n          text: '品类',\r\n          navigateTo: 'experience'\r\n        },\r\n        {\r\n          image: '/static/icon_show.png',\r\n          text: '晒单',\r\n          navigateTo: 'show'\r\n        },\r\n        {\r\n          image: '/static/icon_exchange.png',\r\n          text: '兑换',\r\n          navigateTo: 'exchange'\r\n        },\r\n        {\r\n          image: '/static/icon_guide.png',\r\n          text: '新手指南',\r\n          navigateTo: 'guide'\r\n        }],\r\n        mescroll: []\r\n      }\r\n    },\r\n    onLoad(options: any) {\r\n      if (options.scene) {\r\n        let scene = decodeURIComponent(options.scene);\r\n        console.log(\"scene:\" + scene);\r\n        let sessionKey: any = uni.getStorageSync(\"SessionKey\");\r\n        let userInfo: any = uni.getStorageSync(\"UserInfo\");\r\n        if (!sessionKey && !userInfo) {\r\n          uni.setStorageSync(\"scene\", scene)\r\n        }\r\n      }\r\n    },\r\n    onShow() {\r\n      this.getHomeProductList();\r\n    },\r\n    methods: {\r\n      /*下拉刷新的回调 */\r\n      downCallback(mescroll: any) {\r\n        // 下拉刷新的回调,默认重置上拉加载列表为第一页 (自动执行 mescroll.num=1, 再触发upCallback方法 )\r\n        this.getAdsList();\r\n        this.getLastTransactionList();\r\n        this.getLastTransactionList();\r\n        this.mescroll = mescroll;\r\n        mescroll.resetUpScroll();\r\n      },\r\n      /*上拉加载的回调: mescroll携带page的参数, 其中num:当前页 从1开始, size:每页数据条数,默认10 */\r\n      upCallback(mescroll: any) {\r\n        //联网加载数据\r\n        this.getListDataFromNet(mescroll.num,mescroll.size,(curPageData: any) => {\r\n            //联网成功的回调,隐藏下拉刷新和上拉加载的状态;\r\n            mescroll.endSuccess(curPageData.length);\r\n            //设置列表数据\r\n            console.log(curPageData)\r\n            if (mescroll.num == 1) this.productList = []; //如果是第一页需手动制空列表\r\n            console.log('productListIng', this.productList)\r\n            this.productList = this.productList.concat(curPageData); //追加新数据\r\n          },\r\n          () => {\r\n            //联网失败的回调,隐藏下拉刷新的状态\r\n            mescroll.endErr();\r\n          }\r\n        );\r\n      },\r\n      /*联网加载列表数据\r\n        实际项目以您服务器接口返回的数据为准,无需本地处理分页.\r\n        * */\r\n      async getListDataFromNet(\r\n        pageNum: any,\r\n        pageSize: any,\r\n        successCallback: any,\r\n        errorCallback: any\r\n      ) {\r\n        console.log(pageNum, pageSize);\r\n        try {\r\n          let productList: any = await this.getHomeProductListIng(pageNum, pageSize);\r\n          console.log(\"data\", this.productList);\r\n          //联网成功的回调\r\n          successCallback && successCallback(productList);\r\n        } catch (e) {\r\n          //联网失败的回调\r\n          errorCallback && errorCallback();\r\n        }\r\n      },\r\n      getAdsList() {\r\n        let data = {\r\n          AdName: '首页头部轮播'\r\n        }\r\n        request(AdsListGet, data).then((res: any) => {\r\n          console.log(res)\r\n          this.swiper = res.AdsList[0].AdsViewList\r\n        })\r\n      },\r\n      // 获取最新成交列表\r\n      getLastTransactionList() {\r\n        let data = {}\r\n        request(LastTransactionListGet, data).then((res: any) => {\r\n          console.log(res)\r\n          this.LastTranActiveList = res.LastTranActiveList\r\n          if (res.LastTranActiveList.length >= 2) {\r\n            this.multiple = 2;\r\n          }\r\n        })\r\n      },\r\n      // 首页获取正在竞拍与即将开拍的商品列表\r\n      // 查询类型 : home1=首页的正在竞拍列表, home2=首页的即将开拍列表\r\n      getHomeProductListIng(pageNum: number, pageSize: number) {\r\n        return new Promise((sesolve, reject) => {\r\n\t\t\t\t\tlet data = {\r\n            PageID: pageNum,\r\n            PageSize: pageSize,\r\n            SearchType: 'home2'\r\n          }\r\n          request(HomeProductListGet, data).then((res: any) => {\r\n            console.log(res.ProductList)\r\n            sesolve(res.ProductList)\r\n          }).catch((err: any) => {\r\n            console.log(err)\r\n            let mescroll: any = this.mescroll;\r\n            mescroll.endErr();\r\n          })\r\n\t\t\t\t})\r\n      },\r\n      getHomeProductList() {\r\n        let pageNum = this.pageNum;\r\n        let pageSize = this.pageSize\r\n        let data = {\r\n          PageID: pageNum,\r\n          PageSize: pageSize,\r\n          SearchType: 'home1'\r\n        }\r\n        request(HomeProductListGet, data).then((res: any) => {\r\n          console.log(res.ProductList)\r\n          if (pageNum === 1) {\r\n            this.productListIng = [];\r\n          }\r\n          this.productListIng = this.productListIng.concat(res.ProductList);\r\n          this.PageCount = res.PageCount;\r\n        })\r\n      },\r\n      lower(e: any) {\r\n        if (this.pageNum < this.PageCount) {\r\n          this.pageNum++;\r\n          this.getHomeProductList();\r\n        }\r\n      },\r\n      noticeList() {\r\n        navigateTo('../mall/notice/notice')\r\n      },\r\n      search() {\r\n        navigateTo('../mall/search/search')\r\n      },\r\n      // grid页面\r\n      listClick(item: any) {\r\n        let navigate = `../mall/${item.navigateTo}/${item.navigateTo}`\r\n        navigateTo(navigate)\r\n      }\r\n    }\r\n\t})\r\n</script>\r\n\r\n<style scoped>\r\n  .uni-swiper-dots-horizontal {\r\n    position: absolute;\r\n    font-size: 0;\r\n    margin-bottom: 40upx;\r\n    transform-origin:20% 40%;\r\n  }\r\n\r\n  .teng-option {\r\n    background-color: #fff;\r\n  }\r\n\r\n  .teng-options {\r\n    position: relative;\r\n    top: -14upx;\r\n    background-color: #fff;\r\n    padding-top: 28upx;\r\n    border-radius: 50%\r\n  }\r\n\r\n  .search-swiper {\r\n    position: relative;\r\n  }\r\n\r\n  .search {\r\n    position: absolute;\r\n    top: 20upx;\r\n    left: 50%;\r\n    transform: translate(-50%, 0);\r\n    width: 90%;\r\n    z-index: 999;\r\n  }\r\n\r\n  .search-icon {\r\n    position: absolute;\r\n    top: 12upx;\r\n    left: 4%;\r\n    width: 44upx;\r\n    height: 44upx;\r\n  }\r\n\r\n  .search input {\r\n    color: #a4a4a4;\r\n    background-color: rgba(160, 160, 160, .4);\r\n    border-radius: 100upx;\r\n    padding: 10upx 0 10upx 12%;\r\n  }\r\n\r\n  .placeholder {\r\n    color: #a4a4a4;\r\n  }\r\n\r\n  .teng-options-grid {\r\n    background-color: #fff;\r\n  }\r\n\r\n  .swiper-box {\r\n    height: 440upx;\r\n  }\r\n\r\n  .uni-swiper-msg {\r\n    border-top: 2upx solid #f4f4f4;\r\n  }\r\n\r\n  .uni-swiper-wrapper {\r\n    position: relative;\r\n    width: 90%;\r\n    border-left: 2upx solid #f4f4f4;\r\n    padding-left: 20upx;\r\n  }\r\n\r\n  .i-notice-original {\r\n    color: #fe7f00\r\n  }\r\n\r\n  .notice-more {\r\n    width: 120upx;\r\n    color: #6a6a6a;\r\n    border-left: 4upx solid #f4f4f4;\r\n    padding-left: 20upx;\r\n    z-index: 10;\r\n  }\r\n\r\n  .i-item-msg {\r\n    word-break: break-all;\r\n    display: -webkit-box;\r\n    overflow: hidden;\r\n    line-height:1.5;\r\n    text-overflow: ellipsis;\r\n    -webkit-box-orient: vertical;\r\n    -webkit-line-clamp: 1\r\n  }\r\n</style>"]}]}