{"remainingRequest":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lee/Desktop/github/mall-project/src/pages/mall/exchangeDetails/exchangeDetails.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/lee/Desktop/github/mall-project/src/pages/mall/exchangeDetails/exchangeDetails.vue","mtime":1572176633011},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1560261191357},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/ts-loader/index.js","mtime":1560261210667},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js","mtime":1563798333387},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":1563798331564}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport {\n\trequest,\n\tnavigateTo,\n\tshowToast,\n\tshowModal,\n\tdefaultShowModal,\n\tonShareAppMessage\n} from \"@/common/utils/util\";\nimport {\n\tProductGet,\n\tOrderExchangeSubmit,\n\tUserAddressListGet,\n\tGetLoginUser\n} from \"@/common/config/api\";\nimport uParse from \"@/components/uParse/src/wxParse.vue\";\nexport default Vue.extend({\n\tcomponents: {\n\t\tuParse\n\t},\n\tdata() {\n\t\treturn {\n\t\t\texchangeID: \"\",\n\t\t\tproductID: \"\",\n\t\t\taddressID: \"\",\n\t\t\tarticle: \"\",\n\t\t\tintegrals: \"\",\n\t\t\tuserInfo: \"\",\n\t\t\taddress: \"\",\n\t\t\tshow: false\n\t\t};\n\t},\n\tonLoad(options: any) {\n\t\tthis.exchangeID = options.exchangeID;\n\t\tthis.productID = options.productID;\n\t\tthis.integrals = options.integrals;\n\t},\n\tonShow() {\n\t\tthis.getProduct();\n\t},\n\tonPullDownRefresh() {\n\t\t\n\t},\n\tonShareAppMessage(e: any) {\n\t\treturn onShareAppMessage(e);\n\t},\n\tmethods: {\n\t\tasync getProduct() {\n\t\t\tlet ProductID = this.productID;\n\t\t\tlet data = {\n\t\t\t\tProductID: ProductID\n\t\t\t};\n\t\t\trequest(ProductGet, data).then((res: any) => {\n\t\t\t\tthis.article = res.Product.ProductDesc;\n\t\t\t});\n\t\t\tlet addressID: any = uni.getStorageSync(\"addressID\");\n\t\t\tlet userInfo: any = await this.getLoginUser();\n\t\t\tthis.userInfo = userInfo;\n\t\t\tlet addressList: any = await this.getUserAddressList();\n\t\t\tthis.address = addressList;\n\t\t\tif (addressList) {\n\t\t\t\tthis.addressID = addressList.ID;\n\t\t\t}\n\t\t\tif (addressID) {\n\t\t\t\tthis.addressID = addressID;\n\t\t\t}\n\t\t},\n\t\tpreview(src: any, e: any) {\n\t\t\t// do something\n\t\t\tconsole.log(\"src: \" + src);\n\t\t},\n\t\tnavigate(href: any, e: any) {\n\t\t\t// 如允许点击超链接跳转，则应该打开一个新页面，并传入href，由新页面内嵌webview组件负责显示该链接内容\n\t\t\tshowModal(\"点击链接为：\" + href);\n\t\t},\n\t\tisShow() {\n\t\t\tthis.show = true;\n\t\t},\n\t\t// 获取当前登录用户的信息\n\t\tgetLoginUser() {\n\t\t\treturn new Promise((sesolve, reject) => {\n\t\t\t\tlet data = {};\n\t\t\t\trequest(GetLoginUser, data).then((res: any) => {\n\t\t\t\t\tuni.setStorageSync(\"UserInfo\", res.UserInfo);\n\t\t\t\t\tsesolve(res.UserInfo);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetUserAddressList() {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet AddressID = this.addressID;\n\t\t\t\tlet data = {\n\t\t\t\t\tAddressID: AddressID\n\t\t\t\t};\n\t\t\t\trequest(UserAddressListGet, data).then((res: any) => {\n\t\t\t\t\tconsole.log(res.AddressList);\n\t\t\t\t\tlet addressList = res.AddressList;\n\t\t\t\t\taddressList.map((item: any) => {\n\t\t\t\t\t\tconsole.log(item);\n\t\t\t\t\t\tif (item.IsDefault === 1) {\n\t\t\t\t\t\t\tresolve(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\texchangeSubmit() {\n\t\t\tlet ExchangeID = this.exchangeID;\n\t\t\tlet AddressID = this.addressID;\n\t\t\tif (!AddressID) {\n\t\t\t\tlet msg: string = \"你还没有默认地址，请点击确定去填写地址信息！\";\n\t\t\t\tdefaultShowModal(msg).then((res: any) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tconsole.log(\"用户点击确定\");\n\t\t\t\t\t\tnavigateTo(\"../../ucenter/addressShipping/addressShipping\");\n\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\tconsole.log(\"用户点击取消\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tExchangeID: ExchangeID,\n\t\t\t\tAddressID: AddressID\n\t\t\t};\n\t\t\trequest(OrderExchangeSubmit, data).then((res: any) => {\n\t\t\t\tthis.show = false;\n\t\t\t\tlet content: string = \"兑换成功，请点击确定查看订单！\";\n\t\t\t\tdefaultShowModal(content).then((res: any) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tconsole.log(\"用户点击确定\");\n\t\t\t\t\t\tlet status = \"-1\";\n\t\t\t\t\t\tnavigateTo(\"../../ucenter/orderList/orderList?status=\" + status);\n\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\tconsole.log(\"用户点击取消\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\thide() {\n\t\t\tthis.show = false;\n\t\t},\n\t\tmoveHandle() {\n\t\t\tthis.show = false;\n\t\t},\n\t\taddressClick() {\n\t\t\tnavigateTo(\"../../ucenter/addressShipping/addressShipping\");\n\t\t}\n\t}\n});\n",{"version":3,"sources":["exchangeDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"exchangeDetails.vue","sourceRoot":"src/pages/mall/exchangeDetails","sourcesContent":["<template>\n\t<view class=\"content\">\n\t\t<view class=\"parse\">\n\t\t\t<uParse :content=\"article\" @preview=\"preview\" @navigate=\"navigate\" />\n\t\t</view>\n\t\t<view class=\"i-kong\"></view>\n\t\t<view class=\"mask-show\" :class=\"(show?'show':'hide')\">\n\t\t\t<view class=\"mask\" @click=\"hide\" @touchmove.stop.prevent=\"moveHandle\" />\n\t\t\t<view class=\"exchange\">\n\t\t\t\t<view class=\"exchange-now\" v-if=\"!show\">\n\t\t\t\t\t<button class=\"btn exchange-btn\" @click=\"isShow\">马上兑换</button>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"exchange-model mask-content\">\n\t\t\t\t\t<view class=\"exchange-model-head\">\n\t\t\t\t\t\t<text>订单信息确认</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"exchange-model-address\" @click=\"addressClick\">\n\t\t\t\t\t\t<view class=\"exchange-model-address-body\" v-if=\"address\">\n\t\t\t\t\t\t\t<view class=\"exchange-model-address-user\">\n\t\t\t\t\t\t\t\t<text>{{address.realName}}</text>\n\t\t\t\t\t\t\t\t<text class=\"exchange-model-mobile\">{{address.Mobile}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"exchange-model-address-list\">\n\t\t\t\t\t\t\t\t<text>{{address.Province}}</text>\n\t\t\t\t\t\t\t\t<text>{{address.City}}</text>\n\t\t\t\t\t\t\t\t<text>{{address.Area}}</text>\n\t\t\t\t\t\t\t\t<text>{{address.Address}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"exchange-model-address-body\" v-else>\n\t\t\t\t\t\t\t<text>请填写地址</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"exchange-model-arrow uni-icon uni-icon-arrowright\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"exchange-model-integrals\">\n\t\t\t\t\t\t<view class=\"exchange-model-remaining-integrals\" v-if=\"userInfo\">\n\t\t\t\t\t\t\t<text>剩余积分：</text>\n\t\t\t\t\t\t\t<text>{{userInfo.SeqIntegrals}}</text>\n\t\t\t\t\t\t\t<text>分</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"exchange-model-need-integrals\" v-if=\"integrals\">\n\t\t\t\t\t\t\t<text>所需积分：</text>\n\t\t\t\t\t\t\t<text>{{integrals}}</text>\n\t\t\t\t\t\t\t<text>分</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"exchange-submit\">\n\t\t\t\t\t\t<button class=\"submitBtn\" @click=\"exchangeSubmit\">确认订单</button>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script lang=\"ts\">\nimport Vue from \"vue\";\nimport {\n\trequest,\n\tnavigateTo,\n\tshowToast,\n\tshowModal,\n\tdefaultShowModal,\n\tonShareAppMessage\n} from \"@/common/utils/util\";\nimport {\n\tProductGet,\n\tOrderExchangeSubmit,\n\tUserAddressListGet,\n\tGetLoginUser\n} from \"@/common/config/api\";\nimport uParse from \"@/components/uParse/src/wxParse.vue\";\nexport default Vue.extend({\n\tcomponents: {\n\t\tuParse\n\t},\n\tdata() {\n\t\treturn {\n\t\t\texchangeID: \"\",\n\t\t\tproductID: \"\",\n\t\t\taddressID: \"\",\n\t\t\tarticle: \"\",\n\t\t\tintegrals: \"\",\n\t\t\tuserInfo: \"\",\n\t\t\taddress: \"\",\n\t\t\tshow: false\n\t\t};\n\t},\n\tonLoad(options: any) {\n\t\tthis.exchangeID = options.exchangeID;\n\t\tthis.productID = options.productID;\n\t\tthis.integrals = options.integrals;\n\t},\n\tonShow() {\n\t\tthis.getProduct();\n\t},\n\tonPullDownRefresh() {\n\t\t\n\t},\n\tonShareAppMessage(e: any) {\n\t\treturn onShareAppMessage(e);\n\t},\n\tmethods: {\n\t\tasync getProduct() {\n\t\t\tlet ProductID = this.productID;\n\t\t\tlet data = {\n\t\t\t\tProductID: ProductID\n\t\t\t};\n\t\t\trequest(ProductGet, data).then((res: any) => {\n\t\t\t\tthis.article = res.Product.ProductDesc;\n\t\t\t});\n\t\t\tlet addressID: any = uni.getStorageSync(\"addressID\");\n\t\t\tlet userInfo: any = await this.getLoginUser();\n\t\t\tthis.userInfo = userInfo;\n\t\t\tlet addressList: any = await this.getUserAddressList();\n\t\t\tthis.address = addressList;\n\t\t\tif (addressList) {\n\t\t\t\tthis.addressID = addressList.ID;\n\t\t\t}\n\t\t\tif (addressID) {\n\t\t\t\tthis.addressID = addressID;\n\t\t\t}\n\t\t},\n\t\tpreview(src: any, e: any) {\n\t\t\t// do something\n\t\t\tconsole.log(\"src: \" + src);\n\t\t},\n\t\tnavigate(href: any, e: any) {\n\t\t\t// 如允许点击超链接跳转，则应该打开一个新页面，并传入href，由新页面内嵌webview组件负责显示该链接内容\n\t\t\tshowModal(\"点击链接为：\" + href);\n\t\t},\n\t\tisShow() {\n\t\t\tthis.show = true;\n\t\t},\n\t\t// 获取当前登录用户的信息\n\t\tgetLoginUser() {\n\t\t\treturn new Promise((sesolve, reject) => {\n\t\t\t\tlet data = {};\n\t\t\t\trequest(GetLoginUser, data).then((res: any) => {\n\t\t\t\t\tuni.setStorageSync(\"UserInfo\", res.UserInfo);\n\t\t\t\t\tsesolve(res.UserInfo);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetUserAddressList() {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet AddressID = this.addressID;\n\t\t\t\tlet data = {\n\t\t\t\t\tAddressID: AddressID\n\t\t\t\t};\n\t\t\t\trequest(UserAddressListGet, data).then((res: any) => {\n\t\t\t\t\tconsole.log(res.AddressList);\n\t\t\t\t\tlet addressList = res.AddressList;\n\t\t\t\t\taddressList.map((item: any) => {\n\t\t\t\t\t\tconsole.log(item);\n\t\t\t\t\t\tif (item.IsDefault === 1) {\n\t\t\t\t\t\t\tresolve(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\texchangeSubmit() {\n\t\t\tlet ExchangeID = this.exchangeID;\n\t\t\tlet AddressID = this.addressID;\n\t\t\tif (!AddressID) {\n\t\t\t\tlet msg: string = \"你还没有默认地址，请点击确定去填写地址信息！\";\n\t\t\t\tdefaultShowModal(msg).then((res: any) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tconsole.log(\"用户点击确定\");\n\t\t\t\t\t\tnavigateTo(\"../../ucenter/addressShipping/addressShipping\");\n\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\tconsole.log(\"用户点击取消\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tExchangeID: ExchangeID,\n\t\t\t\tAddressID: AddressID\n\t\t\t};\n\t\t\trequest(OrderExchangeSubmit, data).then((res: any) => {\n\t\t\t\tthis.show = false;\n\t\t\t\tlet content: string = \"兑换成功，请点击确定查看订单！\";\n\t\t\t\tdefaultShowModal(content).then((res: any) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tconsole.log(\"用户点击确定\");\n\t\t\t\t\t\tlet status = \"-1\";\n\t\t\t\t\t\tnavigateTo(\"../../ucenter/orderList/orderList?status=\" + status);\n\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\tconsole.log(\"用户点击取消\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\thide() {\n\t\t\tthis.show = false;\n\t\t},\n\t\tmoveHandle() {\n\t\t\tthis.show = false;\n\t\t},\n\t\taddressClick() {\n\t\t\tnavigateTo(\"../../ucenter/addressShipping/addressShipping\");\n\t\t}\n\t}\n});\n</script>\n\n<style scoped>\n.mask {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tz-index: 10;\n\tbackground: rgba(0, 0, 0, 0.3);\n\tdisplay: none;\n\tz-index: 998;\n}\n\n.mask-content {\n\tposition: fixed;\n\tleft: 0;\n\tbottom: 0;\n\twidth: 100%;\n\tbackground-color: #fff;\n\ttransform: translateY(100%);\n\ttransition: all 0.4s ease;\n\tz-index: 999;\n}\n\n.show .mask-content {\n\ttransform: translateY(0);\n}\n\n.show .mask {\n\tdisplay: block;\n}\n\n.exchange {\n\tposition: fixed;\n\tbottom: 0;\n\twidth: 100%;\n\tz-index: 999;\n}\n\n.exchange-btn {\n\tcolor: #fff;\n\tbackground-color: #fe7f00;\n}\n\n.exchange-model {\n\tbackground-color: #fff;\n}\n\n.exchange-model-head {\n\tfont-size: 32upx;\n\tcolor: #767676;\n\ttext-align: center;\n\tpadding: 20upx 0;\n}\n\n.exchange-model-address {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tborder-top: 2upx solid #f4f4f4;\n\tborder-bottom: 2upx solid #f4f4f4;\n\tpadding: 20upx 30upx;\n}\n\n.exchange-model-address-user text {\n\tfont-size: 32upx;\n}\n\n.exchange-model-mobile {\n\tmargin-left: 60upx;\n}\n\n.exchange-model-integrals {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 20upx 30upx;\n}\n\n.exchange-model-need-integrals text {\n\tcolor: #fe7f00;\n}\n\n.exchange-submit {\n\tpadding: 20upx 30upx;\n}\n\n.submitBtn {\n\tline-height: 80upx;\n\tcolor: #fff;\n\tbackground-color: #fe7f00;\n\tborder-radius: 100upx;\n}\n</style>"]}]}