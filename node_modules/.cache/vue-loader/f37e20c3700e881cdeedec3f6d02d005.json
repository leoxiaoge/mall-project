{"remainingRequest":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lee/Desktop/github/mall-project/src/components/gaoyia-parse/parse.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lee/Desktop/github/mall-project/src/components/gaoyia-parse/parse.vue","mtime":1568125935178},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/babel-loader/lib/index.js","mtime":1560261191357},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js","mtime":1563798333387},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":1563798331564}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport HtmlToJson from './libs/html2json';\nimport wxParseTemplate from './components/wxParseTemplate0';\n\nexport default {\n\tname: 'wxParse',\n\tprops: {\n\t\t// user-select:none;\n\t\tuserSelect:{\n\t\t\ttype:String,\n\t\t\tdefault:'text'//none |text| all | element\n\t\t},\n\t\timgOptions:{\n\t\t\ttype:[Object,Boolean],\n\t\t\tdefault:function(){\n\t\t\t\treturn {\n\t\t\t\t\tloop: false,\n\t\t\t\t\tindicator:'number',\n\t\t\t\t\tlongPressActions:false\n\t\t\t\t\t// longPressActions: {\n\t\t\t\t\t// \t itemList: ['发送给朋友', '保存图片', '收藏'],\n\t\t\t\t\t// \t\tsuccess: function (res) {\n\t\t\t\t\t// \t\t\tconsole.log('选中了第' + (res.tapIndex + 1) + '个按钮');\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\tfail: function (res) {\n\t\t\t\t\t// \t\t\tconsole.log(res.errMsg);\n\t\t\t\t\t// \t\t}    \n\t\t\t\t\t// \t}\n\t\t\t\t\t// }\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tclassName: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tcontent: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tnoData: {\n\t\t\ttype: String,\n\t\t\tdefault: '<div style=\"color: red;\">数据不能为空</div>'\n\t\t},\n\t\tstartHandler: {\n\t\t\ttype: Function,\n\t\t\tdefault() {\n\t\t\t\treturn node => {\n\t\t\t\t\tnode.attr.class = null;\n\t\t\t\t\tnode.attr.style = null;\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\tendHandler: {\n\t\t\ttype: Function,\n\t\t\tdefault: null\n\t\t},\n\t\tcharsHandler: {\n\t\t\ttype: Function,\n\t\t\tdefault: null\n\t\t},\n\t\timageProp: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn {\n\t\t\t\t\tmode: 'aspectFit',\n\t\t\t\t\tpadding: 0,\n\t\t\t\t\tlazyLoad: false,\n\t\t\t\t\tdomain: ''\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t},\n\tcomponents: {\n\t\twxParseTemplate\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tnodes:{},\n\t\t\timageUrls: [],\n\t\t\twxParseWidth:{\n\t\t\t\tvalue:0\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t},\n\tmounted() {\n\t\tlet that = this\n\t\tthis.getWidth().then(function(data){\n\t\t\tthat.wxParseWidth.value = data;\n\t\t})\n\t\tthis.setHtml()\n\t},\n\tmethods: {\n\t\tsetHtml(){\n\t\t\tlet { content, noData, imageProp, startHandler, endHandler, charsHandler } = this;\n\t\t\tlet parseData = content || noData;\n\t\t\tlet customHandler = {\n\t\t\t\tstart: startHandler,\n\t\t\t\tend: endHandler,\n\t\t\t\tchars: charsHandler\n\t\t\t};\n\t\t\tlet results = HtmlToJson(parseData, customHandler, imageProp, this);\n\t\t\tthis.imageUrls = results.imageUrls;\n\t\t\tthis.nodes = results.nodes;\n\t\t},\n\t\tgetWidth() {\n                return new Promise((res, rej) => {\n\t\t\t\t\t// #ifndef MP-ALIPAY || MP-BAIDU\n\t\t\t\t\t\tuni.createSelectorQuery()\n\t\t\t\t\t\t.in(this)\n\t\t\t\t\t\t.select('.wxParse')\n\t\t\t\t\t\t.fields(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsize: true,\n\t\t\t\t\t\t\t\tscrollOffset: true\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdata => {\n\t\t\t\t\t\t\t\tres(data.width);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).exec();\n\t\t\t\t\t// #endif\n\t\t\t\t\t// #ifdef MP-BAIDU\n\t\t\t\t\t\tswan.createSelectorQuery().select('.wxParse').boundingClientRect(function(rect){\n\t\t\t\t\t\t\trect[0].width\n\t\t\t\t\t\t}).exec()\n\t\t\t\t\t// #endif\n\t\t\t\t\t// #ifdef MP-ALIPAY\n\t\t\t\t\t\tmy.createSelectorQuery()\n\t\t\t\t\t\t.select('.wxParse')\n\t\t\t\t\t\t.boundingClientRect().exec((ret) => {\n\t\t\t\t\t\t\tres(ret[0].width);\n\t\t\t\t\t\t});\n\t\t\t\t\t// #endif\n                });\n        },\n\t\tnavigate(href, $event, attr) {\n\t\t\tconsole.log(href,attr);\n\t\t\tthis.$emit('navigate', href, $event);\n\t\t},\n\t\tpreview(src, $event) {\n\t\t\tif (!this.imageUrls.length||typeof this.imgOptions==='boolean'){\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tuni.previewImage({\n\t\t\t\t\tcurrent: src,\n\t\t\t\t\turls: this.imageUrls,\n\t\t\t\t\tloop: this.imgOptions.loop,\n\t\t\t\t\tindicator: this.imgOptions.indicator,\n\t\t\t\t\tlongPressActions: this.imgOptions.longPressActions\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.$emit('preview', src, $event);\n\t\t},\n\t\tremoveImageUrl(src) {\n\t\t\tconst { imageUrls } = this;\n\t\t\timageUrls.splice(imageUrls.indexOf(src), 1);\n\t\t}\n\t},\n\t// 父组件中提供\n\tprovide() {\n\t\treturn {\n\t\t\tparseWidth: this.wxParseWidth,\n\t\t\tparseSelect: this.userSelect\n\t\t\t// 提示：provide 和 inject 绑定并不是可响应的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的属性还是可响应的。\n\t\t};\n\t},\n\twatch: {\n      content() {\n        this.setHtml()\n      }\n    }\n};\n",{"version":3,"sources":["parse.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"parse.vue","sourceRoot":"src/components/gaoyia-parse","sourcesContent":["<!--**\n * forked from：https://github.com/F-loat/mpvue-wxParse\n *\n * github地址: https://github.com/dcloudio/uParse\n *\n * for: uni-app框架下 富文本解析\n * \n * 优化 by gaoyia@qq.com  https://github.com/gaoyia/parse\n */-->\n\n<template>\n\t<!--基础元素-->\n\t<div class=\"wxParse\" :class=\"className\" :style=\"'user-select:' + userSelect\">\n\t\t<block v-for=\"(node, index) of nodes\" :key=\"index\" v-if=\"!loading\" ><wxParseTemplate :node=\"node\" /></block>\n\t</div>\n</template>\n\n<script>\nimport HtmlToJson from './libs/html2json';\nimport wxParseTemplate from './components/wxParseTemplate0';\n\nexport default {\n\tname: 'wxParse',\n\tprops: {\n\t\t// user-select:none;\n\t\tuserSelect:{\n\t\t\ttype:String,\n\t\t\tdefault:'text'//none |text| all | element\n\t\t},\n\t\timgOptions:{\n\t\t\ttype:[Object,Boolean],\n\t\t\tdefault:function(){\n\t\t\t\treturn {\n\t\t\t\t\tloop: false,\n\t\t\t\t\tindicator:'number',\n\t\t\t\t\tlongPressActions:false\n\t\t\t\t\t// longPressActions: {\n\t\t\t\t\t// \t itemList: ['发送给朋友', '保存图片', '收藏'],\n\t\t\t\t\t// \t\tsuccess: function (res) {\n\t\t\t\t\t// \t\t\tconsole.log('选中了第' + (res.tapIndex + 1) + '个按钮');\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\tfail: function (res) {\n\t\t\t\t\t// \t\t\tconsole.log(res.errMsg);\n\t\t\t\t\t// \t\t}    \n\t\t\t\t\t// \t}\n\t\t\t\t\t// }\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tclassName: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tcontent: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tnoData: {\n\t\t\ttype: String,\n\t\t\tdefault: '<div style=\"color: red;\">数据不能为空</div>'\n\t\t},\n\t\tstartHandler: {\n\t\t\ttype: Function,\n\t\t\tdefault() {\n\t\t\t\treturn node => {\n\t\t\t\t\tnode.attr.class = null;\n\t\t\t\t\tnode.attr.style = null;\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\tendHandler: {\n\t\t\ttype: Function,\n\t\t\tdefault: null\n\t\t},\n\t\tcharsHandler: {\n\t\t\ttype: Function,\n\t\t\tdefault: null\n\t\t},\n\t\timageProp: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn {\n\t\t\t\t\tmode: 'aspectFit',\n\t\t\t\t\tpadding: 0,\n\t\t\t\t\tlazyLoad: false,\n\t\t\t\t\tdomain: ''\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t},\n\tcomponents: {\n\t\twxParseTemplate\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tnodes:{},\n\t\t\timageUrls: [],\n\t\t\twxParseWidth:{\n\t\t\t\tvalue:0\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t},\n\tmounted() {\n\t\tlet that = this\n\t\tthis.getWidth().then(function(data){\n\t\t\tthat.wxParseWidth.value = data;\n\t\t})\n\t\tthis.setHtml()\n\t},\n\tmethods: {\n\t\tsetHtml(){\n\t\t\tlet { content, noData, imageProp, startHandler, endHandler, charsHandler } = this;\n\t\t\tlet parseData = content || noData;\n\t\t\tlet customHandler = {\n\t\t\t\tstart: startHandler,\n\t\t\t\tend: endHandler,\n\t\t\t\tchars: charsHandler\n\t\t\t};\n\t\t\tlet results = HtmlToJson(parseData, customHandler, imageProp, this);\n\t\t\tthis.imageUrls = results.imageUrls;\n\t\t\tthis.nodes = results.nodes;\n\t\t},\n\t\tgetWidth() {\n                return new Promise((res, rej) => {\n\t\t\t\t\t// #ifndef MP-ALIPAY || MP-BAIDU\n\t\t\t\t\t\tuni.createSelectorQuery()\n\t\t\t\t\t\t.in(this)\n\t\t\t\t\t\t.select('.wxParse')\n\t\t\t\t\t\t.fields(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsize: true,\n\t\t\t\t\t\t\t\tscrollOffset: true\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdata => {\n\t\t\t\t\t\t\t\tres(data.width);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).exec();\n\t\t\t\t\t// #endif\n\t\t\t\t\t// #ifdef MP-BAIDU\n\t\t\t\t\t\tswan.createSelectorQuery().select('.wxParse').boundingClientRect(function(rect){\n\t\t\t\t\t\t\trect[0].width\n\t\t\t\t\t\t}).exec()\n\t\t\t\t\t// #endif\n\t\t\t\t\t// #ifdef MP-ALIPAY\n\t\t\t\t\t\tmy.createSelectorQuery()\n\t\t\t\t\t\t.select('.wxParse')\n\t\t\t\t\t\t.boundingClientRect().exec((ret) => {\n\t\t\t\t\t\t\tres(ret[0].width);\n\t\t\t\t\t\t});\n\t\t\t\t\t// #endif\n                });\n        },\n\t\tnavigate(href, $event, attr) {\n\t\t\tconsole.log(href,attr);\n\t\t\tthis.$emit('navigate', href, $event);\n\t\t},\n\t\tpreview(src, $event) {\n\t\t\tif (!this.imageUrls.length||typeof this.imgOptions==='boolean'){\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tuni.previewImage({\n\t\t\t\t\tcurrent: src,\n\t\t\t\t\turls: this.imageUrls,\n\t\t\t\t\tloop: this.imgOptions.loop,\n\t\t\t\t\tindicator: this.imgOptions.indicator,\n\t\t\t\t\tlongPressActions: this.imgOptions.longPressActions\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.$emit('preview', src, $event);\n\t\t},\n\t\tremoveImageUrl(src) {\n\t\t\tconst { imageUrls } = this;\n\t\t\timageUrls.splice(imageUrls.indexOf(src), 1);\n\t\t}\n\t},\n\t// 父组件中提供\n\tprovide() {\n\t\treturn {\n\t\t\tparseWidth: this.wxParseWidth,\n\t\t\tparseSelect: this.userSelect\n\t\t\t// 提示：provide 和 inject 绑定并不是可响应的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的属性还是可响应的。\n\t\t};\n\t},\n\twatch: {\n      content() {\n        this.setHtml()\n      }\n    }\n};\n</script>"]}]}