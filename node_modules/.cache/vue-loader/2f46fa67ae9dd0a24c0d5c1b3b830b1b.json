{"remainingRequest":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lee/Desktop/github/mall-project/src/pages/mall/activeBilList/activeBilList.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/lee/Desktop/github/mall-project/src/pages/mall/activeBilList/activeBilList.vue","mtime":1566117712988},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/babel-loader/lib/index.js","mtime":1560261191357},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/ts-loader/index.js","mtime":1560261210667},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js","mtime":1563798333387},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":1563798331564}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\nimport { request, navigateTo, defaultShowModal } from \"@/common/utils/util\";\nimport { ActiveBillListGet } from \"@/common/config/api\";\nimport MescrollUni from \"@/components/mescroll-diy/mescroll-beibei.vue\";\nexport default Vue.extend({\n\tcomponents: {\n\t\tMescrollUni\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tactiveID: \"\",\n\t\t\tuserID: \"\",\n\t\t\tbillList: [],\n\t\t\tmescroll: []\n\t\t};\n\t},\n\tonLoad(options: any) {\n\t\tconsole.log(\"onLoad\", options);\n\t\tthis.activeID = options.activeID;\n\t\tthis.userID = options.userID;\n\t},\n\tmethods: {\n\t\t// 下拉刷新的回调\n\t\tdownCallback(mescroll: any) {\n\t\t\tmescroll.optUp.page.size = 20;\n\t\t\tthis.mescroll = mescroll;\n\t\t\tmescroll.resetUpScroll();\n\t\t},\n\t\t// 上拉加载的回调: mescroll携带page的参数, 其中num:当前页 从1开始, size:每页数据条数,默认10\n\t\tupCallback(mescroll: any) {\n\t\t\tthis.getListDataFromNet(\n\t\t\t\tmescroll.num,\n\t\t\t\tmescroll.size,\n\t\t\t\t(curPageData: any) => {\n\t\t\t\t\tmescroll.endSuccess(curPageData.length);\n\t\t\t\t\tif (mescroll.num == 1) this.billList = [];\n\t\t\t\t\tthis.billList = this.billList.concat(curPageData);\n\t\t\t\t\tthis.billList.map((item: any) => {\n\t\t\t\t\t\titem.UserMobile = item.UserMobile.substring(0, 3) + '****' + item.UserMobile.substring(7);\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tmescroll.endErr();\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t// 联网加载列表数据\n\t\tasync getListDataFromNet(\n\t\t\tpageNum: any,\n\t\t\tpageSize: any,\n\t\t\tsuccessCallback: any,\n\t\t\terrorCallback: any\n\t\t) {\n\t\t\tconsole.log(pageNum, pageSize);\n\t\t\ttry {\n\t\t\t\tlet billList: any = await this.getActiveBillList(pageNum, pageSize);\n\t\t\t\tsuccessCallback && successCallback(billList);\n\t\t\t} catch (e) {\n\t\t\t\terrorCallback && errorCallback();\n\t\t\t}\n\t\t},\n\t\tgetActiveBillList(pageNum: any, pageSize: any) {\n\t\t\tlet ActiveID = this.activeID;\n\t\t\tlet UserID = this.userID;\n\t\t\treturn new Promise((sesolve, reject) => {\n\t\t\t\tif (UserID) {\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\tActiveID: ActiveID,\n\t\t\t\t\t\tUserID: UserID,\n\t\t\t\t\t\tPageID: pageNum,\n\t\t\t\t\t\tPageSize: pageSize\n\t\t\t\t\t};\n\t\t\t\t\trequest(ActiveBillListGet, data)\n\t\t\t\t\t\t.then((res: any) => {\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tsesolve(res.BillList);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err: any) => {\n\t\t\t\t\t\t\tlet mescroll: any = this.mescroll;\n\t\t\t\t\t\t\tmescroll.endErr();\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\tActiveID: ActiveID,\n\t\t\t\t\t\tPageID: pageNum,\n\t\t\t\t\t\tPageSize: pageSize\n\t\t\t\t\t};\n\t\t\t\t\trequest(ActiveBillListGet, data)\n\t\t\t\t\t\t.then((res: any) => {\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tsesolve(res.BillList);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err: any) => {\n\t\t\t\t\t\t\tlet mescroll: any = this.mescroll;\n\t\t\t\t\t\t\tmescroll.endErr();\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});\n",{"version":3,"sources":["activeBilList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"activeBilList.vue","sourceRoot":"src/pages/mall/activeBilList","sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<mescroll-uni @down=\"downCallback\" @up=\"upCallback\">\n\t\t\t<view\n\t\t\t\tclass=\"i-bill\"\n\t\t\t\t:class=\"(item.IsWin === 0?'i-default':'i-active')\"\n\t\t\t\tv-for=\"(item, index) in billList\"\n\t\t\t\t:key=\"index\"\n\t\t\t>\n\t\t\t\t<view class=\"i-bill-image i-flex\">\n\t\t\t\t\t<img :src=\"item.UserFace\" />\n\t\t\t\t\t<view\n\t\t\t\t\t\tclass=\"i-bill-user\"\n\t\t\t\t\t\t:class=\"(item.IsWin === 0?'i-default':'i-active')\"\n\t\t\t\t\t>{{item.UserMobile}}</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"i-bill-IsWin\" :class=\"(item.IsWin === 0?'i-default':'i-active')\" v-if=\"item.IsWin === 0\">出局</view>\n\t\t\t\t<view class=\"i-bill-IsWin\" :class=\"(item.IsWin === 0?'i-default':'i-active')\" v-else>预选</view>\n\t\t\t\t<view\n\t\t\t\t\tclass=\"i-bill-province uni-ellipsis\"\n\t\t\t\t\t:class=\"(item.IsWin === 0?'i-default':'i-active')\"\n\t\t\t\t>{{item.Province}}</view>\n\t\t\t\t<view class=\"i-bill-price\" :class=\"(item.IsWin === 0?'i-default':'i-active')\">{{item.Price}}</view>\n\t\t\t</view>\n\t\t</mescroll-uni>\n\t</view>\n</template>\n\n<script lang=\"ts\">\nimport Vue from \"vue\";\nimport { request, navigateTo, defaultShowModal } from \"@/common/utils/util\";\nimport { ActiveBillListGet } from \"@/common/config/api\";\nimport MescrollUni from \"@/components/mescroll-diy/mescroll-beibei.vue\";\nexport default Vue.extend({\n\tcomponents: {\n\t\tMescrollUni\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tactiveID: \"\",\n\t\t\tuserID: \"\",\n\t\t\tbillList: [],\n\t\t\tmescroll: []\n\t\t};\n\t},\n\tonLoad(options: any) {\n\t\tconsole.log(\"onLoad\", options);\n\t\tthis.activeID = options.activeID;\n\t\tthis.userID = options.userID;\n\t},\n\tmethods: {\n\t\t// 下拉刷新的回调\n\t\tdownCallback(mescroll: any) {\n\t\t\tmescroll.optUp.page.size = 20;\n\t\t\tthis.mescroll = mescroll;\n\t\t\tmescroll.resetUpScroll();\n\t\t},\n\t\t// 上拉加载的回调: mescroll携带page的参数, 其中num:当前页 从1开始, size:每页数据条数,默认10\n\t\tupCallback(mescroll: any) {\n\t\t\tthis.getListDataFromNet(\n\t\t\t\tmescroll.num,\n\t\t\t\tmescroll.size,\n\t\t\t\t(curPageData: any) => {\n\t\t\t\t\tmescroll.endSuccess(curPageData.length);\n\t\t\t\t\tif (mescroll.num == 1) this.billList = [];\n\t\t\t\t\tthis.billList = this.billList.concat(curPageData);\n\t\t\t\t\tthis.billList.map((item: any) => {\n\t\t\t\t\t\titem.UserMobile = item.UserMobile.substring(0, 3) + '****' + item.UserMobile.substring(7);\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tmescroll.endErr();\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\t// 联网加载列表数据\n\t\tasync getListDataFromNet(\n\t\t\tpageNum: any,\n\t\t\tpageSize: any,\n\t\t\tsuccessCallback: any,\n\t\t\terrorCallback: any\n\t\t) {\n\t\t\tconsole.log(pageNum, pageSize);\n\t\t\ttry {\n\t\t\t\tlet billList: any = await this.getActiveBillList(pageNum, pageSize);\n\t\t\t\tsuccessCallback && successCallback(billList);\n\t\t\t} catch (e) {\n\t\t\t\terrorCallback && errorCallback();\n\t\t\t}\n\t\t},\n\t\tgetActiveBillList(pageNum: any, pageSize: any) {\n\t\t\tlet ActiveID = this.activeID;\n\t\t\tlet UserID = this.userID;\n\t\t\treturn new Promise((sesolve, reject) => {\n\t\t\t\tif (UserID) {\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\tActiveID: ActiveID,\n\t\t\t\t\t\tUserID: UserID,\n\t\t\t\t\t\tPageID: pageNum,\n\t\t\t\t\t\tPageSize: pageSize\n\t\t\t\t\t};\n\t\t\t\t\trequest(ActiveBillListGet, data)\n\t\t\t\t\t\t.then((res: any) => {\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tsesolve(res.BillList);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err: any) => {\n\t\t\t\t\t\t\tlet mescroll: any = this.mescroll;\n\t\t\t\t\t\t\tmescroll.endErr();\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\tActiveID: ActiveID,\n\t\t\t\t\t\tPageID: pageNum,\n\t\t\t\t\t\tPageSize: pageSize\n\t\t\t\t\t};\n\t\t\t\t\trequest(ActiveBillListGet, data)\n\t\t\t\t\t\t.then((res: any) => {\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\tsesolve(res.BillList);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err: any) => {\n\t\t\t\t\t\t\tlet mescroll: any = this.mescroll;\n\t\t\t\t\t\t\tmescroll.endErr();\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});\n</script>\n\n<style scoped>\n.container {\n\theight: 100%;\n\tbackground-color: #fff;\n\tpadding: 0 30upx;\n}\n\n.i-bill {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\theight: 120upx;\n\tfont-size: 32upx;\n\tline-height: 120upx;\n\tpadding: 0 30upx;\n\tborder-bottom: 2upx solid #f4f4f4;\n\tbackground-color: #fff;\n}\n\n.i-default {\n\tcolor: #30a900;\n}\n\n.i-active {\n\tcolor: #fe7f00;\n}\n\n.i-bill-image {\n\tmin-width: 260upx;\n}\n\n.i-bill-image img {\n\twidth: 84upx;\n\theight: 84upx;\n\tborder-radius: 50%;\n}\n\n.i-bill-user {\n\tmargin-left: 20upx;\n}\n</style>\n"]}]}