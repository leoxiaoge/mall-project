{"remainingRequest":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lee/Desktop/github/mall-project/src/pages/ucenter/setting/setting.vue?vue&type=style&index=0&id=2dc9d91f&scoped=true&lang=css&","dependencies":[{"path":"/Users/lee/Desktop/github/mall-project/src/pages/ucenter/setting/setting.vue","mtime":1569509321885},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/css-loader/index.js","mtime":1554990705185},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1563798333387},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/postcss-loader/src/index.js","mtime":1554990705524},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/postcss-loader/src/index.js","mtime":1554990705524},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js","mtime":1563798333387},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":1563798331564}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.list-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 10upx 30upx;\n\tbackground-color: #fff;\n}\n\n.userFace {\n\theight: 180upx;\n\tborder-bottom: 2upx solid #f4f4f4;\n}\n\n.userNick {\n\theight: 100upx;\n}\n\n.list-item-face {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: center;\n}\n\n.list-item-face image {\n\twidth: 120upx;\n\theight: 120upx;\n\tborder-radius: 50%;\n}\n\n.sign-out {\n\tmargin-top: 20upx;\n}\n\n.signBtn {\n\tcolor: #7a7a7a;\n\tbackground-color: #fff;\n}\n\n.popup-bottom {\n\twidth: 90%;\n\topacity: 0.9;\n}\n\n.popup-bottom button {\n\tcolor: #7a7a7a;\n}\n\n.previewImageFull {\n\tborder-top-left-radius: 10upx;\n\tborder-top-right-radius: 10upx;\n}\n\n.chooseImageAlbum {\n\tborder-bottom-left-radius: 10upx;\n\tborder-bottom-right-radius: 10upx;\n}\n\n.cancel {\n\tmargin-top: 20upx;\n\tmargin-bottom: 20upx;\n}\n\n.cancel button {\n\tborder-radius: 10upx;\n}\n",{"version":3,"sources":["setting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqNA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"setting.vue","sourceRoot":"src/pages/ucenter/setting","sourcesContent":["<template>\n\t<view class=\"content\">\n\t\t<view class=\"list-item userFace\" @click=\"userFaceClick\">\n\t\t\t<view class=\"list-item-user\">头像</view>\n\t\t\t<view class=\"list-item-face\">\n\t\t\t\t<image :src=\"userFace\" />\n\t\t\t\t<uni-icon :size=\"20\" color=\"#bbb\" type=\"arrowright\" />\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"list-item userNick\" @click=\"userNickClick\">\n\t\t\t<view class=\"list-item-user\">昵称</view>\n\t\t\t<view class=\"list-item-nick\">\n\t\t\t\t<text>{{userNick}}</text>\n\t\t\t\t<uni-icon :size=\"20\" color=\"#bbb\" type=\"arrowright\" />\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"sign-out\">\n\t\t\t<button class=\"signBtn\" @click=\"clear\">退出登录</button>\n\t\t</view>\n\t\t<i-popup-toggle :show=\"showPopup\" position=\"bottom\" @hidePopup=\"togglePopup('')\">\n\t\t\t<view class=\"popup-bottom\">\n\t\t\t\t<view class=\"popup-bottom-content\">\n\t\t\t\t\t<button class=\"previewImageFull\" @click=\"preview(userFace, userFace)\">查看大图</button>\n\t\t\t\t\t<button class=\"chooseImageCamera\" @click=\"chooseImageCamera\">拍照换头像</button>\n\t\t\t\t\t<button class=\"chooseImageAlbum\" @click=\"chooseImageAlbum\">从相册选择新头像</button>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"cancel\">\n\t\t\t\t\t<button @click=\"userFaceClick\">取消</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</i-popup-toggle>\n\t</view>\n</template>\n\n<script>\nimport {\n\trequest,\n\tnavigateTo,\n\tshowToast,\n\tdefaultShowModal,\n\tupload,\n\tpreviewImage,\n\tnavigateBack,\n\tonShareAppMessage\n} from \"@/common/utils/util\";\nimport {\n\tGetLoginUser,\n\tUpdateUserInfo,\n\tOrderDryingUpload\n} from \"@/common/config/api\";\nimport uniIcon from \"@/components/uni-icon/uni-icon.vue\";\nimport iPopupToggle from \"@/components/i-popup-toggle/i-popup-toggle.vue\";\nexport default {\n\tcomponents: {\n\t\tuniIcon,\n\t\tiPopupToggle\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuserInfo: \"\",\n\t\t\tuserNick: \"\",\n\t\t\tuserFace: \"\",\n\t\t\timageSrc: \"\",\n\t\t\tshowPopup: false\n\t\t};\n\t},\n\tonLoad(options) {\n\t\tconsole.log(\"onLoad\", options);\n\t},\n\tonShow() {\n\t\tthis.useInfo();\n\t},\n\tonShareAppMessage(e) {\n\t\treturn onShareAppMessage(e);\n\t},\n\tmethods: {\n\t\tasync useInfo() {\n\t\t\tlet userInfo = await this.getLoginUser();\n\t\t\tthis.userInfo = userInfo;\n\t\t\tthis.userFace = userInfo.userFace;\n\t\t\tthis.userNick = decodeURIComponent(userInfo.userNick);\n\t\t},\n\t\t// 获取当前登录用户的信息\n\t\tgetLoginUser() {\n\t\t\treturn new Promise((sesolve, reject) => {\n\t\t\t\tlet data = {};\n\t\t\t\trequest(GetLoginUser, data).then(res => {\n\t\t\t\t\tuni.setStorageSync(\"UserInfo\", res.UserInfo);\n\t\t\t\t\tsesolve(res.UserInfo);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tuserFaceClick() {\n\t\t\tthis.showPopup = !this.showPopup;\n\t\t},\n\t\ttogglePopup() {\n\t\t\tthis.showPopup = !this.showPopup;\n\t\t},\n\t\tpreview(current, urls) {\n\t\t\turls = [urls];\n\t\t\tpreviewImage(current, urls);\n\t\t},\n\t\tchooseImageCamera() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1,\n\t\t\t\tsizeType: [\"original\", \"compressed\"],\n\t\t\t\tsourceType: [\"camera\"],\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tvar imageSrc = res.tempFilePaths[0];\n\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\turl: \"https://unidemo.dcloud.net.cn/upload\",\n\t\t\t\t\t\tfilePath: imageSrc,\n\t\t\t\t\t\tfileType: \"image\",\n\t\t\t\t\t\tname: \"data\",\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconsole.log(\"uploadImage success, res is:\", res);\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: \"上传成功\",\n\t\t\t\t\t\t\t\ticon: \"success\",\n\t\t\t\t\t\t\t\tduration: 1000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.imageSrc = imageSrc;\n\t\t\t\t\t\t\tconsole.log(this.imageSrc);\n\t\t\t\t\t\t\tthis.uploadImage();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: err => {\n\t\t\t\t\t\t\tconsole.log(\"uploadImage fail\", err);\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\tcontent: err.errMsg,\n\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tfail: err => {\n\t\t\t\t\tconsole.log(\"chooseImage fail\", err);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tchooseImageAlbum() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1,\n\t\t\t\tsizeType: [\"original\", \"compressed\"],\n\t\t\t\tsourceType: [\"album\"],\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tvar imageSrc = res.tempFilePaths[0];\n\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\turl: \"https://unidemo.dcloud.net.cn/upload\",\n\t\t\t\t\t\tfilePath: imageSrc,\n\t\t\t\t\t\tfileType: \"image\",\n\t\t\t\t\t\tname: \"data\",\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconsole.log(\"uploadImage success, res is:\", res);\n\t\t\t\t\t\t\tshowToast(\"上传成功\")\n\t\t\t\t\t\t\tthis.imageSrc = imageSrc;\n\t\t\t\t\t\t\tconsole.log(this.imageSrc);\n\t\t\t\t\t\t\tthis.uploadImage();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: err => {\n\t\t\t\t\t\t\tconsole.log(\"uploadImage fail\", err);\n\t\t\t\t\t\t\tshowToast(err.errMsg)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tfail: err => {\n\t\t\t\t\tconsole.log(\"chooseImage fail\", err);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tuploadImage() {\n\t\t\tlet filePath = this.imageSrc;\n\t\t\tlet data = {};\n\t\t\tupload(OrderDryingUpload, data, filePath).then(res => {\n\t\t\t\tlet data = JSON.parse(res);\n\t\t\t\tlet picUrl = data.PicUrl;\n\t\t\t\tthis.updateUserInfo(picUrl);\n\t\t\t});\n\t\t},\n\t\tupdateUserInfo(event) {\n\t\t\tlet UserFace = event;\n\t\t\tlet data = {\n\t\t\t\tUserFace: UserFace\n\t\t\t};\n\t\t\trequest(UpdateUserInfo, data).then(res => {\n\t\t\t\tshowToast(\"更换头像成功！\");\n\t\t\t\tthis.showPopup = !this.showPopup;\n\t\t\t\tthis.useInfo();\n\t\t\t});\n\t\t},\n\t\tuserNickClick() {\n\t\t\tnavigateTo(\"../settingUserNick/settingUserNick\");\n\t\t},\n\t\tclear() {\n\t\t\tlet content = \"是否确定退出登录？\";\n\t\t\tdefaultShowModal(content).then(res => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tconsole.log(\"用户点击确定\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\tnavigateBack(1);\n\t\t\t\t\t\tuni.clearStorageSync();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tshowToast(\"退出登录失败\");\n\t\t\t\t\t}\n\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\tconsole.log(\"用户点击取消\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n\n<style scoped>\n.list-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 10upx 30upx;\n\tbackground-color: #fff;\n}\n\n.userFace {\n\theight: 180upx;\n\tborder-bottom: 2upx solid #f4f4f4;\n}\n\n.userNick {\n\theight: 100upx;\n}\n\n.list-item-face {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: center;\n}\n\n.list-item-face image {\n\twidth: 120upx;\n\theight: 120upx;\n\tborder-radius: 50%;\n}\n\n.sign-out {\n\tmargin-top: 20upx;\n}\n\n.signBtn {\n\tcolor: #7a7a7a;\n\tbackground-color: #fff;\n}\n\n.popup-bottom {\n\twidth: 90%;\n\topacity: 0.9;\n}\n\n.popup-bottom button {\n\tcolor: #7a7a7a;\n}\n\n.previewImageFull {\n\tborder-top-left-radius: 10upx;\n\tborder-top-right-radius: 10upx;\n}\n\n.chooseImageAlbum {\n\tborder-bottom-left-radius: 10upx;\n\tborder-bottom-right-radius: 10upx;\n}\n\n.cancel {\n\tmargin-top: 20upx;\n\tmargin-bottom: 20upx;\n}\n\n.cancel button {\n\tborder-radius: 10upx;\n}\n</style>"]}]}