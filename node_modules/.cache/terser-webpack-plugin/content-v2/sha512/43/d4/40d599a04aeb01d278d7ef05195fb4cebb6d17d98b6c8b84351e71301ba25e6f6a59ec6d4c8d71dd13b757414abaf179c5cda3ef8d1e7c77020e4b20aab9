{"map":"{\"version\":3,\"sources\":[\"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/src/components/robby-image-upload/robby-image-upload.vue?vue&type=template&id=1673d620&\",\"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!/Users/lee/Desktop/github/mall-project/src/components/robby-image-upload/robby-image-upload.vue?vue&type=template&id=1673d620&\",\"/Users/lee/Desktop/github/mall-project/src/components/robby-image-upload/robby-image-upload.vue\",\"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/src/components/robby-image-upload/robby-image-upload.vue\",\"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/Users/lee/Desktop/github/mall-project/node_modules/babel-loader/lib/index.js!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!/Users/lee/Desktop/github/mall-project/src/components/robby-image-upload/robby-image-upload.vue?vue&type=script&lang=js&\",\"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/Users/lee/Desktop/github/mall-project/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!/Users/lee/Desktop/github/mall-project/node_modules/css-loader/index.js??ref--6-oneOf-1-2!/Users/lee/Desktop/github/mall-project/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/src/components/robby-image-upload/robby-image-upload.vue?vue&type=style&index=0&lang=css&\"],\"names\":[\"render\",\"_vm\",\"this\",\"_h\",\"$createElement\",\"l0\",\"_self\",\"_c\",\"__map\",\"value\",\"path\",\"index\",\"m0\",\"isDragging\",\"$orig\",\"__get_orig\",\"$mp\",\"data\",\"Object\",\"assign\",\"$root\",\"staticRenderFns\",\"__webpack_require__\",\"d\",\"__webpack_exports__\",\"_util\",\"_api\",\"name\",\"props\",\"imageBasePos\",\"x0\",\"y0\",\"w\",\"h\",\"showMoveImage\",\"moveImagePath\",\"moveLeft\",\"moveTop\",\"deltaLeft\",\"deltaTop\",\"dragIndex\",\"targetImageIndex\",\"picUrl\",\"computed\",\"posMoveImageLeft\",\"posMoveImageTop\",\"isShowDel\",\"enableDel\",\"isShowAdd\",\"enableAdd\",\"limit\",\"length\",\"isDragable\",\"enableDrag\",\"methods\",\"selectImage\",\"uni\",\"chooseImage\",\"count\",\"success\",\"e\",\"imagePathArr\",\"tempFilePaths\",\"availableImageNumber\",\"showToast\",\"title\",\"icon\",\"mask\",\"duration\",\"filePath\",\"upload\",\"OrderDryingUpload\",\"then\",\"res\",\"console\",\"log\",\"JSON\",\"parse\",\"PicUrl\",\"i\",\"push\",\"$emit\",\"deleteImage\",\"imageIndex\",\"currentTarget\",\"dataset\",\"deletedImagePath\",\"splice\",\"serverUrlDeleteImage\",\"request\",\"url\",\"method\",\"imagePath\",\"currentImage\",\"allImages\",\"previewImage\",\"current\",\"indicator\",\"loop\",\"urls\",\"initImageBasePos\",\"paddingRate\",\"getSystemInfo\",\"obj\",\"screenWidth\",\"leftPadding\",\"Math\",\"ceil\",\"imageWidth\",\"findOverlapImage\",\"posX\",\"posY\",\"rows\",\"floor\",\"cols\",\"indx\",\"start\",\"basePosY\",\"currentImageOffsetTop\",\"offsetTop\",\"target\",\"offsetLeft\",\"move\",\"touch\",\"touches\",\"clientX\",\"clientY\",\"stop\",\"r\",\"_robby_image_upload_vue_vue_type_template_id_1673d620___WEBPACK_IMPORTED_MODULE_0__\",\"_robby_image_upload_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__\",\"__WEBPACK_IMPORT_KEY__\",\"key\",\"_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__\",\"component\",\"_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_robby_image_upload_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__\",\"_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_robby_image_upload_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default\",\"n\",\"_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_robby_image_upload_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__\",\"_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_robby_image_upload_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default\"],\"mappings\":\"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\",\"sourcesContent\":[\"var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\\n  var l0 = _vm.__map(_vm.value, function (path, index) {\\n    var m0 = _vm.isDragging(index);\\n    return {\\n      $orig: _vm.__get_orig(path),\\n      m0: m0\\n    };\\n  });\\n\\n  _vm.$mp.data = Object.assign({}, {\\n    $root: {\\n      l0: l0\\n    }\\n  });\\n}\\nvar staticRenderFns = []\\n\\nexport { render, staticRenderFns }\",\"export * from \\\"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./robby-image-upload.vue?vue&type=template&id=1673d620&\\\"\",\"//\\n//\\n//\\n//\\n//\\n//\\n//\\n//\\n//\\n//\\n//\\n//\\n//\\n\\n\\tvar _self;\\n\\timport { upload, navigateTo } from \\\"@/common/utils/util\\\";\\n  import { OrderDryingUpload } from \\\"@/common/config/api\\\";\\n\\texport default {\\n\\t\\tname:'robby-image-upload',\\n\\t\\tprops: ['value','enableDel','enableAdd','enableDrag','serverUrl','formData','limit','fileKeyName','showUploadProgress','serverUrlDeleteImage'],\\n\\t\\tdata() {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\timageBasePos:{\\n\\t\\t\\t\\t\\tx0: -1,\\n\\t\\t\\t\\t\\ty0: -1,\\n\\t\\t\\t\\t\\tw:-1,\\n\\t\\t\\t\\t\\th:-1,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tshowMoveImage: false,\\n\\t\\t\\t\\tmoveImagePath: '',\\n\\t\\t\\t\\tmoveLeft: 0,\\n\\t\\t\\t\\tmoveTop: 0,\\n\\t\\t\\t\\tdeltaLeft: 0,\\n\\t\\t\\t\\tdeltaTop: 0,\\n\\t\\t\\t\\tdragIndex: null,\\n\\t\\t\\t\\ttargetImageIndex: null,\\n\\t\\t\\t\\tpicUrl: []\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tcomputed:{\\n\\t\\t\\tposMoveImageLeft: function(){ \\n\\t\\t\\t\\treturn this.moveLeft + 'px'\\n\\t\\t\\t},\\n\\t\\t\\tposMoveImageTop: function(){\\n\\t\\t\\t\\treturn this.moveTop + 'px'\\n\\t\\t\\t},\\n\\t\\t\\tisShowDel: function(){\\n\\t\\t\\t\\tif(this.enableDel === false){\\n\\t\\t\\t\\t\\treturn false\\n\\t\\t\\t\\t}else{\\n\\t\\t\\t\\t\\treturn true\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\tisShowAdd: function(){\\n\\t\\t\\t\\tif(this.enableAdd === false){\\n\\t\\t\\t\\t\\treturn false\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tif(this.limit && this.value.length >= this.limit){\\n\\t\\t\\t\\t\\treturn false\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\treturn true\\n\\t\\t\\t},\\n\\t\\t\\tisDragable: function(){\\n\\t\\t\\t\\tif(this.enableDrag === false){\\n\\t\\t\\t\\t\\treturn false\\n\\t\\t\\t\\t}else{\\n\\t\\t\\t\\t\\treturn true\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tmethods:{\\n\\t\\t\\tselectImage: function(){\\n\\t\\t\\t\\t_self = this\\n\\t\\t\\t\\tif(!_self.value){\\n\\t\\t\\t\\t\\t_self.value = []\\n\\t\\t\\t\\t} \\n\\t\\t\\t\\t\\n\\t\\t\\t\\tuni.chooseImage({\\n\\t\\t\\t\\t\\tcount: _self.limit ? (_self.limit - _self.value.length) : 999,\\n\\t\\t\\t\\t\\tsuccess: function(e){\\n\\t\\t\\t\\t\\t\\tvar imagePathArr = e.tempFilePaths\\n\\t\\t\\t\\t\\t\\t//如果设置了limit限制，在web上count参数无效，这里做判断控制选择的数量是否合要求\\n\\t\\t\\t\\t\\t\\t//在非微信小程序里，虽然可以选多张，但选择的结果会被截掉\\n\\t\\t\\t\\t\\t\\t//在app里，会自动做选择数量的限制\\n\\t\\t\\t\\t\\t\\tif(_self.limit){\\n\\t\\t\\t\\t\\t\\t\\tvar availableImageNumber = _self.limit - _self.value.length\\n\\t\\t\\t\\t\\t\\t\\tif(availableImageNumber < imagePathArr.length){\\n\\t\\t\\t\\t\\t\\t\\t\\tuni.showToast({\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttitle: '图片总数限制为'+_self.limit+'张，当前还可以选'+availableImageNumber+'张',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ticon:'none',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tmask: false,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tduration: 2000\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\tlet filePath = imagePathArr[0]\\n\\t\\t\\t\\t\\t\\tlet data = {};\\n\\t\\t\\t\\t\\t\\tupload(OrderDryingUpload, data, filePath).then((res) => {\\n\\t\\t\\t\\t\\t\\t\\tconsole.log(res)\\n\\t\\t\\t\\t\\t\\t\\tlet data = JSON.parse(res)\\n\\t\\t\\t\\t\\t\\t\\tconsole.log(data.PicUrl)\\n\\t\\t\\t\\t\\t\\t\\tconsole.log(_self.picUrl)\\n\\t\\t\\t\\t\\t\\t\\tfor(let i=0; i<_self.picUrl.length;i++){\\n\\t\\t\\t\\t\\t\\t\\t\\t_self.picUrl.push(data.PicUrl)\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t// _self.picUrl = _self.picUrl.concat(data.PicUrl);\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\tconsole.log(_self.picUrl)\\n\\t\\t\\t\\t\\t\\tfor(let i=0; i<imagePathArr.length;i++){\\n\\t\\t\\t\\t\\t\\t\\t_self.value.push(imagePathArr[i])\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\tconsole.log('add', _self.picUrl)\\n\\t\\t\\t\\tthis.$emit('add', _self.picUrl)\\n\\t\\t\\t},\\n\\t\\t\\tdeleteImage: function(e){\\n\\t\\t\\t\\tvar imageIndex = e.currentTarget.dataset.index\\n\\t\\t\\t\\tvar deletedImagePath = this.value[imageIndex]\\n\\t\\t\\t\\tthis.value.splice(imageIndex, 1) \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//检查删除图片的服务器地址是否设置，如果设置则调用API，在服务器端删除该图片\\n\\t\\t\\t\\tif(this.serverUrlDeleteImage){\\n\\t\\t\\t\\t\\tuni.request({\\n\\t\\t\\t\\t\\t\\turl: this.serverUrlDeleteImage,\\n\\t\\t\\t\\t\\t\\tmethod: 'GET',\\n\\t\\t\\t\\t\\t\\tdata: {\\n\\t\\t\\t\\t\\t\\t\\timagePath: deletedImagePath\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tsuccess: res => {\\n\\t\\t\\t\\t\\t\\t\\tconsole.log(res.data)\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tthis.$emit('delete',{\\n\\t\\t\\t\\t\\tcurrentImage: deletedImagePath,\\n\\t\\t\\t\\t\\tallImages: this.value\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\tthis.$emit('input', this.value)\\n\\t\\t\\t},\\n\\t\\t\\tpreviewImage: function(e){\\n\\t\\t\\t\\tvar imageIndex = e.currentTarget.dataset.index\\n\\t\\t\\t\\tuni.previewImage({\\n\\t\\t\\t\\t\\tcurrent: this.value[imageIndex],\\n\\t\\t\\t\\t\\tindicator: \\\"number\\\",\\n\\t\\t\\t\\t\\tloop: \\\"true\\\",\\n\\t\\t\\t\\t\\turls:this.value\\n\\t\\t\\t\\t})\\n\\t\\t\\t},\\n\\t\\t\\tinitImageBasePos: function(){\\n\\t\\t\\t\\tlet paddingRate = 0.024\\n\\t\\t\\t\\t_self = this\\n\\t\\t\\t\\t//计算图片基准位置\\n\\t\\t\\t\\tuni.getSystemInfo({\\n\\t\\t\\t\\t\\tsuccess: function(obj) {\\n\\t\\t\\t\\t\\t\\tlet screenWidth = obj.screenWidth\\n\\t\\t\\t\\t\\t\\tlet leftPadding = Math.ceil(paddingRate * screenWidth)\\n\\t\\t\\t\\t\\t\\tlet imageWidth = Math.ceil((screenWidth - 2*leftPadding)/4)\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t_self.imageBasePos.x0 = leftPadding\\n\\t\\t\\t\\t\\t\\t_self.imageBasePos.w = imageWidth\\n\\t\\t\\t\\t\\t\\t_self.imageBasePos.h = imageWidth\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t})\\n\\t\\t\\t},\\n\\t\\t\\tfindOverlapImage: function(posX, posY){\\n\\t\\t\\t\\tlet rows = Math.floor((posX-this.imageBasePos.x0)/this.imageBasePos.w)\\n\\t\\t\\t\\tlet cols = Math.floor((posY-this.imageBasePos.y0)/this.imageBasePos.h)\\n\\t\\t\\t\\tlet indx = cols*4 + rows\\n\\t\\t\\t\\treturn indx\\n\\t\\t\\t},\\n\\t\\t\\tisDragging: function(indx){\\n\\t\\t\\t\\treturn this.dragIndex === indx\\n\\t\\t\\t},\\n\\t\\t\\tstart: function(e){\\n\\t\\t\\t\\tif(!this.isDragable){\\n\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tthis.dragIndex = e.currentTarget.dataset.index\\n\\t\\t\\t\\tthis.moveImagePath = this.value[this.dragIndex]\\n\\t\\t\\t\\tthis.showMoveImage = true\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//计算纵向图片基准位置\\n\\t\\t\\t\\tif(this.imageBasePos.y0 === -1){\\n\\t\\t\\t\\t\\tthis.initImageBasePos()\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tlet basePosY = Math.floor(this.dragIndex / 4) * this.imageBasePos.h\\n\\t\\t\\t\\t\\tlet currentImageOffsetTop = e.currentTarget.offsetTop\\n\\t\\t\\t\\t\\tthis.imageBasePos.y0 = currentImageOffsetTop - basePosY\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//设置选中图片当前左上角的坐标\\n\\t\\t\\t\\tthis.moveLeft = e.target.offsetLeft\\n\\t\\t\\t\\tthis.moveTop = e.target.offsetTop\\n\\t\\t\\t},\\n\\t\\t\\tmove: function(e){\\n\\t\\t\\t\\tif(!this.isDragable){\\n\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tconst touch = e.touches[0]\\n\\t\\t\\t\\tthis.targetImageIndex = this.findOverlapImage(touch.clientX, touch.clientY)\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//初始化deltaLeft/deltaTop\\n\\t\\t\\t\\tif(this.deltaLeft === 0){\\n\\t\\t\\t\\t\\tthis.deltaLeft = touch.clientX - this.moveLeft\\n\\t\\t\\t\\t\\tthis.deltaTop = touch.clientY - this.moveTop \\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//设置移动图片位置\\n\\t\\t\\t\\tthis.moveLeft = touch.clientX - this.deltaLeft\\n\\t\\t\\t\\tthis.moveTop = touch.clientY - this.deltaTop\\n\\t\\t\\t},\\n\\t\\t\\tstop: function(e){\\n\\t\\t\\t\\tif(!this.isDragable){\\n\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif(this.dragIndex !== null && this.targetImageIndex !== null){\\n\\t\\t\\t\\t\\tif(this.targetImageIndex<0){\\n\\t\\t\\t\\t\\t\\tthis.targetImageIndex = 0\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tif(this.targetImageIndex>=this.value.length){\\n\\t\\t\\t\\t\\t\\tthis.targetImageIndex = this.value.length-1\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t//交换图片\\n\\t\\t\\t\\t\\tif(this.dragIndex !== this.targetImageIndex){\\n\\t\\t\\t\\t\\t\\tthis.value[this.dragIndex] = this.value[this.targetImageIndex]\\n\\t\\t\\t\\t\\t\\tthis.value[this.targetImageIndex] = this.moveImagePath\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tthis.dragIndex = null\\n\\t\\t\\t\\tthis.targetImageIndex = null\\n\\t\\t\\t\\tthis.deltaLeft = 0\\n\\t\\t\\t\\tthis.deltaTop = 0\\n\\t\\t\\t\\tthis.showMoveImage = false\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tthis.$emit('input', this.value)\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\",\"import { render, staticRenderFns } from \\\"./robby-image-upload.vue?vue&type=template&id=1673d620&\\\"\\nimport script from \\\"./robby-image-upload.vue?vue&type=script&lang=js&\\\"\\nexport * from \\\"./robby-image-upload.vue?vue&type=script&lang=js&\\\"\\nimport style0 from \\\"./robby-image-upload.vue?vue&type=style&index=0&lang=css&\\\"\\n\\n\\n/* normalize component */\\nimport normalizer from \\\"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\\\"\\nvar component = normalizer(\\n  script,\\n  render,\\n  staticRenderFns,\\n  false,\\n  null,\\n  null,\\n  null\\n  \\n)\\n\\nexport default component.exports\",\"import mod from \\\"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./robby-image-upload.vue?vue&type=script&lang=js&\\\"; export default mod; export * from \\\"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./robby-image-upload.vue?vue&type=script&lang=js&\\\"\",\"import mod from \\\"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./robby-image-upload.vue?vue&type=style&index=0&lang=css&\\\"; export default mod; export * from \\\"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./robby-image-upload.vue?vue&type=style&index=0&lang=css&\\\"\"]}","code":"(global[\"webpackJsonp\"]=global[\"webpackJsonp\"]||[]).push([[\"components/robby-image-upload/robby-image-upload\"],{\"134b\":function(e,t,a){\"use strict\";var i=function(){var e=this,t=e.$createElement,a=(e._self._c,e.__map(e.value,function(t,a){var i=e.isDragging(a);return{$orig:e.__get_orig(t),m0:i}}));e.$mp.data=Object.assign({},{$root:{l0:a}})},s=[];a.d(t,\"a\",function(){return i}),a.d(t,\"b\",function(){return s})},\"1e18\":function(e,t,a){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var i,s=a(\"c440\"),n=a(\"5177\"),r={name:\"robby-image-upload\",props:[\"value\",\"enableDel\",\"enableAdd\",\"enableDrag\",\"serverUrl\",\"formData\",\"limit\",\"fileKeyName\",\"showUploadProgress\",\"serverUrlDeleteImage\"],data:function(){return{imageBasePos:{x0:-1,y0:-1,w:-1,h:-1},showMoveImage:!1,moveImagePath:\"\",moveLeft:0,moveTop:0,deltaLeft:0,deltaTop:0,dragIndex:null,targetImageIndex:null,picUrl:[]}},computed:{posMoveImageLeft:function(){return this.moveLeft+\"px\"},posMoveImageTop:function(){return this.moveTop+\"px\"},isShowDel:function(){return!1!==this.enableDel},isShowAdd:function(){return!1!==this.enableAdd&&!(this.limit&&this.value.length>=this.limit)},isDragable:function(){return!1!==this.enableDrag}},methods:{selectImage:function(){i=this,i.value||(i.value=[]),e.chooseImage({count:i.limit?i.limit-i.value.length:999,success:function(t){var a=t.tempFilePaths;if(i.limit){var r=i.limit-i.value.length;if(r<a.length)return void e.showToast({title:\"图片总数限制为\"+i.limit+\"张，当前还可以选\"+r+\"张\",icon:\"none\",mask:!1,duration:2e3})}var o=a[0],l={};(0,s.upload)(n.OrderDryingUpload,l,o).then(function(e){console.log(e);var t=JSON.parse(e);console.log(t.PicUrl),console.log(i.picUrl);for(var a=0;a<i.picUrl.length;a++)i.picUrl.push(t.PicUrl)}),console.log(i.picUrl);for(var u=0;u<a.length;u++)i.value.push(a[u])}}),console.log(\"add\",i.picUrl),this.$emit(\"add\",i.picUrl)},deleteImage:function(t){var a=t.currentTarget.dataset.index,i=this.value[a];this.value.splice(a,1),this.serverUrlDeleteImage&&e.request({url:this.serverUrlDeleteImage,method:\"GET\",data:{imagePath:i},success:function(e){console.log(e.data)}}),this.$emit(\"delete\",{currentImage:i,allImages:this.value}),this.$emit(\"input\",this.value)},previewImage:function(t){var a=t.currentTarget.dataset.index;e.previewImage({current:this.value[a],indicator:\"number\",loop:\"true\",urls:this.value})},initImageBasePos:function(){var t=.024;i=this,e.getSystemInfo({success:function(e){var a=e.screenWidth,s=Math.ceil(t*a),n=Math.ceil((a-2*s)/4);i.imageBasePos.x0=s,i.imageBasePos.w=n,i.imageBasePos.h=n}})},findOverlapImage:function(e,t){var a=Math.floor((e-this.imageBasePos.x0)/this.imageBasePos.w),i=Math.floor((t-this.imageBasePos.y0)/this.imageBasePos.h),s=4*i+a;return s},isDragging:function(e){return this.dragIndex===e},start:function(e){if(this.isDragable){if(this.dragIndex=e.currentTarget.dataset.index,this.moveImagePath=this.value[this.dragIndex],this.showMoveImage=!0,-1===this.imageBasePos.y0){this.initImageBasePos();var t=Math.floor(this.dragIndex/4)*this.imageBasePos.h,a=e.currentTarget.offsetTop;this.imageBasePos.y0=a-t}this.moveLeft=e.target.offsetLeft,this.moveTop=e.target.offsetTop}},move:function(e){if(this.isDragable){var t=e.touches[0];this.targetImageIndex=this.findOverlapImage(t.clientX,t.clientY),0===this.deltaLeft&&(this.deltaLeft=t.clientX-this.moveLeft,this.deltaTop=t.clientY-this.moveTop),this.moveLeft=t.clientX-this.deltaLeft,this.moveTop=t.clientY-this.deltaTop}},stop:function(e){this.isDragable&&(null!==this.dragIndex&&null!==this.targetImageIndex&&(this.targetImageIndex<0&&(this.targetImageIndex=0),this.targetImageIndex>=this.value.length&&(this.targetImageIndex=this.value.length-1),this.dragIndex!==this.targetImageIndex&&(this.value[this.dragIndex]=this.value[this.targetImageIndex],this.value[this.targetImageIndex]=this.moveImagePath)),this.dragIndex=null,this.targetImageIndex=null,this.deltaLeft=0,this.deltaTop=0,this.showMoveImage=!1,this.$emit(\"input\",this.value))}}};t.default=r}).call(this,a(\"543d\")[\"default\"])},\"73ba\":function(e,t,a){\"use strict\";a.r(t);var i=a(\"134b\"),s=a(\"d1b1\");for(var n in s)\"default\"!==n&&function(e){a.d(t,e,function(){return s[e]})}(n);a(\"f94b\");var r=a(\"2877\"),o=Object(r[\"a\"])(s[\"default\"],i[\"a\"],i[\"b\"],!1,null,null,null);t[\"default\"]=o.exports},\"957c\":function(e,t,a){},d1b1:function(e,t,a){\"use strict\";a.r(t);var i=a(\"1e18\"),s=a.n(i);for(var n in i)\"default\"!==n&&function(e){a.d(t,e,function(){return i[e]})}(n);t[\"default\"]=s.a},f94b:function(e,t,a){\"use strict\";var i=a(\"957c\"),s=a.n(i);s.a}}]);","extractedComments":[]}