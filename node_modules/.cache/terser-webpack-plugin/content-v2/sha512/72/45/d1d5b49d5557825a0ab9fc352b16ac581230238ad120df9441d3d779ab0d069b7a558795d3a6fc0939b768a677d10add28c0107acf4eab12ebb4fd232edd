{"map":"{\"version\":3,\"sources\":[\"/Users/lee/Desktop/github/mall-project/src/components/robby-image-upload/robby-image-upload.vue\",\"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/src/components/robby-image-upload/robby-image-upload.vue?vue&type=template&id=032cf4ee&\",\"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!/Users/lee/Desktop/github/mall-project/src/components/robby-image-upload/robby-image-upload.vue?vue&type=template&id=032cf4ee&\",\"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/src/components/robby-image-upload/robby-image-upload.vue\",\"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/Users/lee/Desktop/github/mall-project/node_modules/babel-loader/lib/index.js!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!/Users/lee/Desktop/github/mall-project/src/components/robby-image-upload/robby-image-upload.vue?vue&type=script&lang=js&\",\"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/Users/lee/Desktop/github/mall-project/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!/Users/lee/Desktop/github/mall-project/node_modules/css-loader/index.js??ref--6-oneOf-1-2!/Users/lee/Desktop/github/mall-project/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/src/components/robby-image-upload/robby-image-upload.vue?vue&type=style&index=0&lang=css&\"],\"names\":[\"_self\",\"_util\",\"__webpack_require__\",\"_api\",\"name\",\"props\",\"data\",\"imageBasePos\",\"x0\",\"y0\",\"w\",\"h\",\"showMoveImage\",\"moveImagePath\",\"moveLeft\",\"moveTop\",\"deltaLeft\",\"deltaTop\",\"dragIndex\",\"targetImageIndex\",\"computed\",\"posMoveImageLeft\",\"this\",\"posMoveImageTop\",\"isShowDel\",\"enableDel\",\"isShowAdd\",\"enableAdd\",\"limit\",\"value\",\"length\",\"isDragable\",\"enableDrag\",\"methods\",\"selectImage\",\"uni\",\"chooseImage\",\"count\",\"success\",\"e\",\"imagePathArr\",\"tempFilePaths\",\"availableImageNumber\",\"showToast\",\"title\",\"icon\",\"mask\",\"duration\",\"filePath\",\"upload\",\"OrderDryingUpload\",\"then\",\"res\",\"console\",\"log\",\"i\",\"push\",\"deleteImage\",\"imageIndex\",\"currentTarget\",\"dataset\",\"index\",\"deletedImagePath\",\"splice\",\"serverUrlDeleteImage\",\"request\",\"url\",\"method\",\"imagePath\",\"$emit\",\"currentImage\",\"allImages\",\"previewImage\",\"current\",\"indicator\",\"loop\",\"urls\",\"initImageBasePos\",\"paddingRate\",\"getSystemInfo\",\"obj\",\"screenWidth\",\"leftPadding\",\"Math\",\"ceil\",\"imageWidth\",\"findOverlapImage\",\"posX\",\"posY\",\"rows\",\"floor\",\"cols\",\"indx\",\"isDragging\",\"start\",\"basePosY\",\"currentImageOffsetTop\",\"offsetTop\",\"target\",\"offsetLeft\",\"move\",\"touch\",\"touches\",\"clientX\",\"clientY\",\"stop\",\"render\",\"_vm\",\"_h\",\"$createElement\",\"l0\",\"_c\",\"__map\",\"path\",\"m0\",\"$orig\",\"__get_orig\",\"$mp\",\"Object\",\"assign\",\"$root\",\"staticRenderFns\",\"d\",\"__webpack_exports__\",\"r\",\"_robby_image_upload_vue_vue_type_template_id_032cf4ee___WEBPACK_IMPORTED_MODULE_0__\",\"_robby_image_upload_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__\",\"__WEBPACK_IMPORT_KEY__\",\"key\",\"_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__\",\"component\",\"_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_robby_image_upload_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__\",\"_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_robby_image_upload_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default\",\"n\",\"_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_robby_image_upload_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__\",\"_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_1_node_modules_css_loader_index_js_ref_6_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_modules_vue_loader_lib_index_js_vue_loader_options_robby_image_upload_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default\"],\"mappings\":\"mOAeC,IADIA,EACJC,EAAAC,EAAA,QACCC,EAAAD,EAAA,UACc,CACdE,KAAK,qBACLC,MAAO,CAAC,QAAQ,YAAY,YAAY,aAAa,YAAY,WAAW,QAAQ,cAAc,qBAAqB,wBACvHC,KAHc,WAIb,MAAO,CACNC,aAAa,CACZC,IAAK,EACLC,IAAK,EACLC,GAAG,EACHC,GAAG,GAEJC,eAAe,EACfC,cAAe,GACfC,SAAU,EACVC,QAAS,EACTC,UAAW,EACXC,SAAU,EACVC,UAAW,KACXC,iBAAkB,OAGpBC,SAAS,CACRC,iBAAkB,WACjB,OAAOC,KAAKR,SAAW,MAExBS,gBAAiB,WAChB,OAAOD,KAAKP,QAAU,MAEvBS,UAAW,WACV,OAAsB,IAAnBF,KAAKG,WAMTC,UAAW,WACV,OAAsB,IAAnBJ,KAAKK,aAILL,KAAKM,OAASN,KAAKO,MAAMC,QAAUR,KAAKM,QAM5CG,WAAY,WACX,OAAuB,IAApBT,KAAKU,aAOVC,QAAQ,CACPC,YAAa,WACZlC,EAAQsB,KACJtB,EAAM6B,QACT7B,EAAM6B,MAAQ,IAGfM,EAAIC,YAAY,CACfC,MAAOrC,EAAM4B,MAAS5B,EAAM4B,MAAQ5B,EAAM6B,MAAMC,OAAU,IAC1DQ,QAAS,SAASC,GACjB,IAAIC,EAAeD,EAAEE,cAIrB,GAAGzC,EAAM4B,MAAM,CACd,IAAIc,EAAuB1C,EAAM4B,MAAQ5B,EAAM6B,MAAMC,OACrD,GAAGY,EAAuBF,EAAaV,OAOtC,YANAK,EAAIQ,UAAU,CACbC,MAAO,UAAU5C,EAAM4B,MAAM,WAAWc,EAAqB,IAC7DG,KAAK,OACLC,MAAM,EACNC,SAAU,MAMb,IAAIC,EAAWR,EAAa,GACxBlC,EAAO,IACX,EAAAL,EAAAgD,QAAOC,EAAAA,kBAAmB5C,EAAM0C,GAAUG,KAAK,SAACC,GAC/CC,QAAQC,IAAIF,KAGb,IAAI,IAAIG,EAAE,EAAGA,EAAEf,EAAaV,OAAOyB,IAClCvD,EAAM6B,MAAM2B,KAAKhB,EAAae,QAKlCE,YAAa,SAASlB,GACrB,IAAImB,EAAanB,EAAEoB,cAAcC,QAAQC,MACrCC,EAAmBxC,KAAKO,MAAM6B,GAClCpC,KAAKO,MAAMkC,OAAOL,EAAY,GAG3BpC,KAAK0C,sBACP7B,EAAI8B,QAAQ,CACXC,IAAK5C,KAAK0C,qBACVG,OAAQ,MACR7D,KAAM,CACL8D,UAAWN,GAEZxB,QAAS,SAAAc,GACRC,QAAQC,IAAIF,EAAI9C,SAKnBgB,KAAK+C,MAAM,SAAS,CACnBC,aAAcR,EACdS,UAAWjD,KAAKO,QAEjBP,KAAK+C,MAAM,QAAS/C,KAAKO,QAE1B2C,aAAc,SAASjC,GACtB,IAAImB,EAAanB,EAAEoB,cAAcC,QAAQC,MACzC1B,EAAIqC,aAAa,CAChBC,QAASnD,KAAKO,MAAM6B,GACpBgB,UAAW,SACXC,KAAM,OACNC,KAAKtD,KAAKO,SAGZgD,iBAAkB,WACjB,IAAIC,EAAc,KAClB9E,EAAQsB,KAERa,EAAI4C,cAAc,CACjBzC,QAAS,SAAS0C,GACjB,IAAIC,EAAcD,EAAIC,YAClBC,EAAcC,KAAKC,KAAKN,EAAcG,GACtCI,EAAaF,KAAKC,MAAMH,EAAc,EAAEC,GAAa,GAEzDlF,EAAMO,aAAaC,GAAK0E,EACxBlF,EAAMO,aAAaG,EAAI2E,EACvBrF,EAAMO,aAAaI,EAAI0E,MAI1BC,iBAAkB,SAASC,EAAMC,GAChC,IAAIC,EAAON,KAAKO,OAAOH,EAAKjE,KAAKf,aAAaC,IAAIc,KAAKf,aAAaG,GAChEiF,EAAOR,KAAKO,OAAOF,EAAKlE,KAAKf,aAAaE,IAAIa,KAAKf,aAAaI,GAChEiF,EAAY,EAALD,EAASF,EACpB,OAAOG,GAERC,WAAY,SAASD,GACpB,OAAOtE,KAAKJ,YAAc0E,GAE3BE,MAAO,SAASvD,GACf,GAAIjB,KAAKS,WAAT,CAQA,GALAT,KAAKJ,UAAYqB,EAAEoB,cAAcC,QAAQC,MACzCvC,KAAKT,cAAgBS,KAAKO,MAAMP,KAAKJ,WACrCI,KAAKV,eAAgB,GAGQ,IAA1BU,KAAKf,aAAaE,GAAU,CAC9Ba,KAAKuD,mBAEL,IAAIkB,EAAWZ,KAAKO,MAAMpE,KAAKJ,UAAY,GAAKI,KAAKf,aAAaI,EAC9DqF,EAAwBzD,EAAEoB,cAAcsC,UAC5C3E,KAAKf,aAAaE,GAAKuF,EAAwBD,EAIhDzE,KAAKR,SAAWyB,EAAE2D,OAAOC,WACzB7E,KAAKP,QAAUwB,EAAE2D,OAAOD,YAEzBG,KAAM,SAAS7D,GACd,GAAIjB,KAAKS,WAAT,CAGA,IAAMsE,EAAQ9D,EAAE+D,QAAQ,GACxBhF,KAAKH,iBAAmBG,KAAKgE,iBAAiBe,EAAME,QAASF,EAAMG,SAG7C,IAAnBlF,KAAKN,YACPM,KAAKN,UAAYqF,EAAME,QAAUjF,KAAKR,SACtCQ,KAAKL,SAAWoF,EAAMG,QAAUlF,KAAKP,SAItCO,KAAKR,SAAWuF,EAAME,QAAUjF,KAAKN,UACrCM,KAAKP,QAAUsF,EAAMG,QAAUlF,KAAKL,WAErCwF,KAAM,SAASlE,GACVjB,KAAKS,aAGa,OAAnBT,KAAKJ,WAAgD,OAA1BI,KAAKH,mBAC/BG,KAAKH,iBAAiB,IACxBG,KAAKH,iBAAmB,GAGtBG,KAAKH,kBAAkBG,KAAKO,MAAMC,SACpCR,KAAKH,iBAAmBG,KAAKO,MAAMC,OAAO,GAGxCR,KAAKJ,YAAcI,KAAKH,mBAC1BG,KAAKO,MAAMP,KAAKJ,WAAaI,KAAKO,MAAMP,KAAKH,kBAC7CG,KAAKO,MAAMP,KAAKH,kBAAoBG,KAAKT,gBAI3CS,KAAKJ,UAAY,KACjBI,KAAKH,iBAAmB,KACxBG,KAAKN,UAAY,EACjBM,KAAKL,SAAW,EAChBK,KAAKV,eAAgB,EAErBU,KAAK+C,MAAM,QAAS/C,KAAKO,8FCxO7B,IAAA6E,EAAA,WAA0B,IAAAC,EAAArF,KAAasF,EAAAD,EAAAE,eACvCC,GADiEH,EAAA3G,MAAA+G,GACjEJ,EAAAK,MAAAL,EAAA9E,MAAA,SAAAoF,EAAApD,GACA,IAAAqD,EAAAP,EAAAd,WAAAhC,GACA,MAAA,CACAsD,MAAAR,EAAAS,WAAAH,GACAC,GAAAA,MAIAP,EAAAU,IAAA/G,KAAAgH,OAAAC,OAAA,GAAiC,CACjCC,MAAA,CACAV,GAAAA,MAIAW,EAAA,GCfAvH,EAAAwH,EAAAC,EAAA,IAAA,WAAA,OAAAjB,IAAAxG,EAAAwH,EAAAC,EAAA,IAAA,WAAA,OAAAF,yCCAAvH,EAAA0H,EAAAD,GAAA,IAAAE,EAAA3H,EAAA,QAAA4H,EAAA5H,EAAA,QAAA,IAAA,IAAA6H,KAAAD,EAAA,YAAAC,GAAA,SAAAC,GAAA9H,EAAAwH,EAAAC,EAAAK,EAAA,WAAA,OAAAF,EAAAE,KAAA,CAAAD,GAAA7H,EAAA,QAAA,IAAA+H,EAAA/H,EAAA,QAQAgI,EAAgBZ,OAAAW,EAAA,KAAAX,CACdQ,EAAA,WACAD,EAAA,KACAA,EAAA,MACF,EACA,KACA,KACA,MAIeF,EAAA,WAAAO,sECnBfhI,EAAA0H,EAAAD,GAAA,IAAAQ,EAAAjI,EAAA,QAAAkI,EAAAlI,EAAAmI,EAAAF,GAAA,IAAA,IAAAJ,KAAAI,EAAA,YAAAJ,GAAA,SAAAC,GAAA9H,EAAAwH,EAAAC,EAAAK,EAAA,WAAA,OAAAG,EAAAH,KAAA,CAAAD,GAAsXJ,EAAA,WAAAS,EAAG,qCCAzX,IAAAE,EAAApI,EAAA,QAAAqI,EAAArI,EAAAmI,EAAAC,GAAgiBC,EAAG\",\"sourcesContent\":[\"//\\n//\\n//\\n//\\n//\\n//\\n//\\n//\\n//\\n//\\n//\\n//\\n//\\n\\n\\tvar _self;\\n\\timport { upload, navigateTo } from \\\"@/common/utils/util\\\";\\n  import { OrderDryingUpload } from \\\"@/common/config/api\\\";\\n\\texport default {\\n\\t\\tname:'robby-image-upload',\\n\\t\\tprops: ['value','enableDel','enableAdd','enableDrag','serverUrl','formData','limit','fileKeyName','showUploadProgress','serverUrlDeleteImage'],\\n\\t\\tdata() {\\n\\t\\t\\treturn {\\n\\t\\t\\t\\timageBasePos:{\\n\\t\\t\\t\\t\\tx0: -1,\\n\\t\\t\\t\\t\\ty0: -1,\\n\\t\\t\\t\\t\\tw:-1,\\n\\t\\t\\t\\t\\th:-1,\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\tshowMoveImage: false,\\n\\t\\t\\t\\tmoveImagePath: '',\\n\\t\\t\\t\\tmoveLeft: 0,\\n\\t\\t\\t\\tmoveTop: 0,\\n\\t\\t\\t\\tdeltaLeft: 0,\\n\\t\\t\\t\\tdeltaTop: 0,\\n\\t\\t\\t\\tdragIndex: null,\\n\\t\\t\\t\\ttargetImageIndex: null\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tcomputed:{\\n\\t\\t\\tposMoveImageLeft: function(){ \\n\\t\\t\\t\\treturn this.moveLeft + 'px'\\n\\t\\t\\t},\\n\\t\\t\\tposMoveImageTop: function(){\\n\\t\\t\\t\\treturn this.moveTop + 'px'\\n\\t\\t\\t},\\n\\t\\t\\tisShowDel: function(){\\n\\t\\t\\t\\tif(this.enableDel === false){\\n\\t\\t\\t\\t\\treturn false\\n\\t\\t\\t\\t}else{\\n\\t\\t\\t\\t\\treturn true\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\tisShowAdd: function(){\\n\\t\\t\\t\\tif(this.enableAdd === false){\\n\\t\\t\\t\\t\\treturn false\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tif(this.limit && this.value.length >= this.limit){\\n\\t\\t\\t\\t\\treturn false\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\treturn true\\n\\t\\t\\t},\\n\\t\\t\\tisDragable: function(){\\n\\t\\t\\t\\tif(this.enableDrag === false){\\n\\t\\t\\t\\t\\treturn false\\n\\t\\t\\t\\t}else{\\n\\t\\t\\t\\t\\treturn true\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tmethods:{\\n\\t\\t\\tselectImage: function(){\\n\\t\\t\\t\\t_self = this\\n\\t\\t\\t\\tif(!_self.value){\\n\\t\\t\\t\\t\\t_self.value = []\\n\\t\\t\\t\\t} \\n\\t\\t\\t\\t\\n\\t\\t\\t\\tuni.chooseImage({\\n\\t\\t\\t\\t\\tcount: _self.limit ? (_self.limit - _self.value.length) : 999,\\n\\t\\t\\t\\t\\tsuccess: function(e){\\n\\t\\t\\t\\t\\t\\tvar imagePathArr = e.tempFilePaths\\n\\t\\t\\t\\t\\t\\t//如果设置了limit限制，在web上count参数无效，这里做判断控制选择的数量是否合要求\\n\\t\\t\\t\\t\\t\\t//在非微信小程序里，虽然可以选多张，但选择的结果会被截掉\\n\\t\\t\\t\\t\\t\\t//在app里，会自动做选择数量的限制\\n\\t\\t\\t\\t\\t\\tif(_self.limit){\\n\\t\\t\\t\\t\\t\\t\\tvar availableImageNumber = _self.limit - _self.value.length\\n\\t\\t\\t\\t\\t\\t\\tif(availableImageNumber < imagePathArr.length){\\n\\t\\t\\t\\t\\t\\t\\t\\tuni.showToast({\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ttitle: '图片总数限制为'+_self.limit+'张，当前还可以选'+availableImageNumber+'张',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ticon:'none',\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tmask: false,\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tduration: 2000\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\tlet filePath = imagePathArr[0]\\n\\t\\t\\t\\t\\t\\tlet data = {};\\n\\t\\t\\t\\t\\t\\tupload(OrderDryingUpload, data, filePath).then((res) => {\\n\\t\\t\\t\\t\\t\\t\\tconsole.log(res)\\n\\t\\t\\t      });\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\tfor(let i=0; i<imagePathArr.length;i++){\\n\\t\\t\\t\\t\\t\\t\\t_self.value.push(imagePathArr[i])\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t})\\n\\t\\t\\t},\\n\\t\\t\\tdeleteImage: function(e){\\n\\t\\t\\t\\tvar imageIndex = e.currentTarget.dataset.index\\n\\t\\t\\t\\tvar deletedImagePath = this.value[imageIndex]\\n\\t\\t\\t\\tthis.value.splice(imageIndex, 1) \\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//检查删除图片的服务器地址是否设置，如果设置则调用API，在服务器端删除该图片\\n\\t\\t\\t\\tif(this.serverUrlDeleteImage){\\n\\t\\t\\t\\t\\tuni.request({\\n\\t\\t\\t\\t\\t\\turl: this.serverUrlDeleteImage,\\n\\t\\t\\t\\t\\t\\tmethod: 'GET',\\n\\t\\t\\t\\t\\t\\tdata: {\\n\\t\\t\\t\\t\\t\\t\\timagePath: deletedImagePath\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\tsuccess: res => {\\n\\t\\t\\t\\t\\t\\t\\tconsole.log(res.data)\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tthis.$emit('delete',{\\n\\t\\t\\t\\t\\tcurrentImage: deletedImagePath,\\n\\t\\t\\t\\t\\tallImages: this.value\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\tthis.$emit('input', this.value)\\n\\t\\t\\t},\\n\\t\\t\\tpreviewImage: function(e){\\n\\t\\t\\t\\tvar imageIndex = e.currentTarget.dataset.index\\n\\t\\t\\t\\tuni.previewImage({\\n\\t\\t\\t\\t\\tcurrent: this.value[imageIndex],\\n\\t\\t\\t\\t\\tindicator: \\\"number\\\",\\n\\t\\t\\t\\t\\tloop: \\\"true\\\",\\n\\t\\t\\t\\t\\turls:this.value\\n\\t\\t\\t\\t})\\n\\t\\t\\t},\\n\\t\\t\\tinitImageBasePos: function(){\\n\\t\\t\\t\\tlet paddingRate = 0.024\\n\\t\\t\\t\\t_self = this\\n\\t\\t\\t\\t//计算图片基准位置\\n\\t\\t\\t\\tuni.getSystemInfo({\\n\\t\\t\\t\\t\\tsuccess: function(obj) {\\n\\t\\t\\t\\t\\t\\tlet screenWidth = obj.screenWidth\\n\\t\\t\\t\\t\\t\\tlet leftPadding = Math.ceil(paddingRate * screenWidth)\\n\\t\\t\\t\\t\\t\\tlet imageWidth = Math.ceil((screenWidth - 2*leftPadding)/4)\\n\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t_self.imageBasePos.x0 = leftPadding\\n\\t\\t\\t\\t\\t\\t_self.imageBasePos.w = imageWidth\\n\\t\\t\\t\\t\\t\\t_self.imageBasePos.h = imageWidth\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t})\\n\\t\\t\\t},\\n\\t\\t\\tfindOverlapImage: function(posX, posY){\\n\\t\\t\\t\\tlet rows = Math.floor((posX-this.imageBasePos.x0)/this.imageBasePos.w)\\n\\t\\t\\t\\tlet cols = Math.floor((posY-this.imageBasePos.y0)/this.imageBasePos.h)\\n\\t\\t\\t\\tlet indx = cols*4 + rows\\n\\t\\t\\t\\treturn indx\\n\\t\\t\\t},\\n\\t\\t\\tisDragging: function(indx){\\n\\t\\t\\t\\treturn this.dragIndex === indx\\n\\t\\t\\t},\\n\\t\\t\\tstart: function(e){\\n\\t\\t\\t\\tif(!this.isDragable){\\n\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tthis.dragIndex = e.currentTarget.dataset.index\\n\\t\\t\\t\\tthis.moveImagePath = this.value[this.dragIndex]\\n\\t\\t\\t\\tthis.showMoveImage = true\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//计算纵向图片基准位置\\n\\t\\t\\t\\tif(this.imageBasePos.y0 === -1){\\n\\t\\t\\t\\t\\tthis.initImageBasePos()\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tlet basePosY = Math.floor(this.dragIndex / 4) * this.imageBasePos.h\\n\\t\\t\\t\\t\\tlet currentImageOffsetTop = e.currentTarget.offsetTop\\n\\t\\t\\t\\t\\tthis.imageBasePos.y0 = currentImageOffsetTop - basePosY\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//设置选中图片当前左上角的坐标\\n\\t\\t\\t\\tthis.moveLeft = e.target.offsetLeft\\n\\t\\t\\t\\tthis.moveTop = e.target.offsetTop\\n\\t\\t\\t},\\n\\t\\t\\tmove: function(e){\\n\\t\\t\\t\\tif(!this.isDragable){\\n\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tconst touch = e.touches[0]\\n\\t\\t\\t\\tthis.targetImageIndex = this.findOverlapImage(touch.clientX, touch.clientY)\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//初始化deltaLeft/deltaTop\\n\\t\\t\\t\\tif(this.deltaLeft === 0){\\n\\t\\t\\t\\t\\tthis.deltaLeft = touch.clientX - this.moveLeft\\n\\t\\t\\t\\t\\tthis.deltaTop = touch.clientY - this.moveTop \\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//设置移动图片位置\\n\\t\\t\\t\\tthis.moveLeft = touch.clientX - this.deltaLeft\\n\\t\\t\\t\\tthis.moveTop = touch.clientY - this.deltaTop\\n\\t\\t\\t},\\n\\t\\t\\tstop: function(e){\\n\\t\\t\\t\\tif(!this.isDragable){\\n\\t\\t\\t\\t\\treturn\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif(this.dragIndex !== null && this.targetImageIndex !== null){\\n\\t\\t\\t\\t\\tif(this.targetImageIndex<0){\\n\\t\\t\\t\\t\\t\\tthis.targetImageIndex = 0\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tif(this.targetImageIndex>=this.value.length){\\n\\t\\t\\t\\t\\t\\tthis.targetImageIndex = this.value.length-1\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t//交换图片\\n\\t\\t\\t\\t\\tif(this.dragIndex !== this.targetImageIndex){\\n\\t\\t\\t\\t\\t\\tthis.value[this.dragIndex] = this.value[this.targetImageIndex]\\n\\t\\t\\t\\t\\t\\tthis.value[this.targetImageIndex] = this.moveImagePath\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tthis.dragIndex = null\\n\\t\\t\\t\\tthis.targetImageIndex = null\\n\\t\\t\\t\\tthis.deltaLeft = 0\\n\\t\\t\\t\\tthis.deltaTop = 0\\n\\t\\t\\t\\tthis.showMoveImage = false\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tthis.$emit('input', this.value)\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\",\"var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\\n  var l0 = _vm.__map(_vm.value, function (path, index) {\\n    var m0 = _vm.isDragging(index);\\n    return {\\n      $orig: _vm.__get_orig(path),\\n      m0: m0\\n    };\\n  });\\n\\n  _vm.$mp.data = Object.assign({}, {\\n    $root: {\\n      l0: l0\\n    }\\n  });\\n}\\nvar staticRenderFns = []\\n\\nexport { render, staticRenderFns }\",\"export * from \\\"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./robby-image-upload.vue?vue&type=template&id=032cf4ee&\\\"\",\"import { render, staticRenderFns } from \\\"./robby-image-upload.vue?vue&type=template&id=032cf4ee&\\\"\\nimport script from \\\"./robby-image-upload.vue?vue&type=script&lang=js&\\\"\\nexport * from \\\"./robby-image-upload.vue?vue&type=script&lang=js&\\\"\\nimport style0 from \\\"./robby-image-upload.vue?vue&type=style&index=0&lang=css&\\\"\\n\\n\\n/* normalize component */\\nimport normalizer from \\\"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\\\"\\nvar component = normalizer(\\n  script,\\n  render,\\n  staticRenderFns,\\n  false,\\n  null,\\n  null,\\n  null\\n  \\n)\\n\\nexport default component.exports\",\"import mod from \\\"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./robby-image-upload.vue?vue&type=script&lang=js&\\\"; export default mod; export * from \\\"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./robby-image-upload.vue?vue&type=script&lang=js&\\\"\",\"import mod from \\\"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./robby-image-upload.vue?vue&type=style&index=0&lang=css&\\\"; export default mod; export * from \\\"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./robby-image-upload.vue?vue&type=style&index=0&lang=css&\\\"\"]}","code":"(global[\"webpackJsonp\"]=global[\"webpackJsonp\"]||[]).push([[\"components/robby-image-upload/robby-image-upload\"],{\"1e18\":function(e,t,a){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=void 0;var i,s=a(\"c440\"),n=a(\"5177\"),r={name:\"robby-image-upload\",props:[\"value\",\"enableDel\",\"enableAdd\",\"enableDrag\",\"serverUrl\",\"formData\",\"limit\",\"fileKeyName\",\"showUploadProgress\",\"serverUrlDeleteImage\"],data:function(){return{imageBasePos:{x0:-1,y0:-1,w:-1,h:-1},showMoveImage:!1,moveImagePath:\"\",moveLeft:0,moveTop:0,deltaLeft:0,deltaTop:0,dragIndex:null,targetImageIndex:null}},computed:{posMoveImageLeft:function(){return this.moveLeft+\"px\"},posMoveImageTop:function(){return this.moveTop+\"px\"},isShowDel:function(){return!1!==this.enableDel},isShowAdd:function(){return!1!==this.enableAdd&&!(this.limit&&this.value.length>=this.limit)},isDragable:function(){return!1!==this.enableDrag}},methods:{selectImage:function(){i=this,i.value||(i.value=[]),e.chooseImage({count:i.limit?i.limit-i.value.length:999,success:function(t){var a=t.tempFilePaths;if(i.limit){var r=i.limit-i.value.length;if(r<a.length)return void e.showToast({title:\"图片总数限制为\"+i.limit+\"张，当前还可以选\"+r+\"张\",icon:\"none\",mask:!1,duration:2e3})}var o=a[0],l={};(0,s.upload)(n.OrderDryingUpload,l,o).then(function(e){console.log(e)});for(var u=0;u<a.length;u++)i.value.push(a[u])}})},deleteImage:function(t){var a=t.currentTarget.dataset.index,i=this.value[a];this.value.splice(a,1),this.serverUrlDeleteImage&&e.request({url:this.serverUrlDeleteImage,method:\"GET\",data:{imagePath:i},success:function(e){console.log(e.data)}}),this.$emit(\"delete\",{currentImage:i,allImages:this.value}),this.$emit(\"input\",this.value)},previewImage:function(t){var a=t.currentTarget.dataset.index;e.previewImage({current:this.value[a],indicator:\"number\",loop:\"true\",urls:this.value})},initImageBasePos:function(){var t=.024;i=this,e.getSystemInfo({success:function(e){var a=e.screenWidth,s=Math.ceil(t*a),n=Math.ceil((a-2*s)/4);i.imageBasePos.x0=s,i.imageBasePos.w=n,i.imageBasePos.h=n}})},findOverlapImage:function(e,t){var a=Math.floor((e-this.imageBasePos.x0)/this.imageBasePos.w),i=Math.floor((t-this.imageBasePos.y0)/this.imageBasePos.h),s=4*i+a;return s},isDragging:function(e){return this.dragIndex===e},start:function(e){if(this.isDragable){if(this.dragIndex=e.currentTarget.dataset.index,this.moveImagePath=this.value[this.dragIndex],this.showMoveImage=!0,-1===this.imageBasePos.y0){this.initImageBasePos();var t=Math.floor(this.dragIndex/4)*this.imageBasePos.h,a=e.currentTarget.offsetTop;this.imageBasePos.y0=a-t}this.moveLeft=e.target.offsetLeft,this.moveTop=e.target.offsetTop}},move:function(e){if(this.isDragable){var t=e.touches[0];this.targetImageIndex=this.findOverlapImage(t.clientX,t.clientY),0===this.deltaLeft&&(this.deltaLeft=t.clientX-this.moveLeft,this.deltaTop=t.clientY-this.moveTop),this.moveLeft=t.clientX-this.deltaLeft,this.moveTop=t.clientY-this.deltaTop}},stop:function(e){this.isDragable&&(null!==this.dragIndex&&null!==this.targetImageIndex&&(this.targetImageIndex<0&&(this.targetImageIndex=0),this.targetImageIndex>=this.value.length&&(this.targetImageIndex=this.value.length-1),this.dragIndex!==this.targetImageIndex&&(this.value[this.dragIndex]=this.value[this.targetImageIndex],this.value[this.targetImageIndex]=this.moveImagePath)),this.dragIndex=null,this.targetImageIndex=null,this.deltaLeft=0,this.deltaTop=0,this.showMoveImage=!1,this.$emit(\"input\",this.value))}}};t.default=r}).call(this,a(\"543d\")[\"default\"])},\"4b55\":function(e,t,a){\"use strict\";var i=function(){var e=this,t=e.$createElement,a=(e._self._c,e.__map(e.value,function(t,a){var i=e.isDragging(a);return{$orig:e.__get_orig(t),m0:i}}));e.$mp.data=Object.assign({},{$root:{l0:a}})},s=[];a.d(t,\"a\",function(){return i}),a.d(t,\"b\",function(){return s})},\"73ba\":function(e,t,a){\"use strict\";a.r(t);var i=a(\"4b55\"),s=a(\"d1b1\");for(var n in s)\"default\"!==n&&function(e){a.d(t,e,function(){return s[e]})}(n);a(\"f94b\");var r=a(\"2877\"),o=Object(r[\"a\"])(s[\"default\"],i[\"a\"],i[\"b\"],!1,null,null,null);t[\"default\"]=o.exports},\"957c\":function(e,t,a){},d1b1:function(e,t,a){\"use strict\";a.r(t);var i=a(\"1e18\"),s=a.n(i);for(var n in i)\"default\"!==n&&function(e){a.d(t,e,function(){return i[e]})}(n);t[\"default\"]=s.a},f94b:function(e,t,a){\"use strict\";var i=a(\"957c\"),s=a.n(i);s.a}}]);","extractedComments":[]}