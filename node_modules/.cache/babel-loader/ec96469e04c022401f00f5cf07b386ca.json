{"remainingRequest":"/Users/lee/Desktop/github/mall-project/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-2!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lee/Desktop/github/mall-project/src/pages/ucenter/setting/setting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lee/Desktop/github/mall-project/src/pages/ucenter/setting/setting.vue","mtime":1572277947613},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1560261191357},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js","mtime":1563798333387},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":1563798331564}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"/Users/lee/Desktop/github/mall-project/node_modules/@babel/runtime/regenerator\"));\n\nvar _util = require(\"@/common/utils/util\");\n\nvar _api = require(\"@/common/config/api\");\n\nvar _uniIcon = _interopRequireDefault(require(\"@/components/uni-icon/uni-icon.vue\"));\n\nvar _iPopupToggle = _interopRequireDefault(require(\"@/components/i-popup-toggle/i-popup-toggle.vue\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar _default = {\n  components: {\n    uniIcon: _uniIcon.default,\n    iPopupToggle: _iPopupToggle.default\n  },\n  data: function data() {\n    return {\n      userInfo: \"\",\n      userNick: \"\",\n      userFace: \"\",\n      imageSrc: \"\",\n      showPopup: false\n    };\n  },\n  onLoad: function onLoad(options) {\n    console.log(\"onLoad\", options);\n  },\n  onShow: function onShow() {\n    this.useInfo();\n  },\n  onPullDownRefresh: function onPullDownRefresh() {\n    this.useInfo();\n  },\n  onShareAppMessage: function onShareAppMessage(e) {\n    return (0, _util.onShareAppMessage)(e);\n  },\n  methods: {\n    useInfo: function () {\n      var _useInfo = _asyncToGenerator(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee() {\n        var userInfo;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.getLoginUser();\n\n              case 2:\n                userInfo = _context.sent;\n                this.userInfo = userInfo;\n                this.userFace = userInfo.userFace;\n                this.userNick = decodeURIComponent(userInfo.userNick);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function useInfo() {\n        return _useInfo.apply(this, arguments);\n      }\n\n      return useInfo;\n    }(),\n    // 获取当前登录用户的信息\n    getLoginUser: function getLoginUser() {\n      return new Promise(function (sesolve, reject) {\n        var data = {};\n        (0, _util.request)(_api.GetLoginUser, data).then(function (res) {\n          uni.setStorageSync(\"UserInfo\", res.UserInfo);\n          sesolve(res.UserInfo);\n        });\n      });\n    },\n    userFaceClick: function userFaceClick() {\n      this.showPopup = !this.showPopup;\n    },\n    togglePopup: function togglePopup() {\n      this.showPopup = !this.showPopup;\n    },\n    preview: function preview(current, urls) {\n      urls = [urls];\n      (0, _util.previewImage)(current, urls);\n    },\n    chooseImageCamera: function chooseImageCamera() {\n      var _this = this;\n\n      uni.chooseImage({\n        count: 1,\n        sizeType: [\"original\", \"compressed\"],\n        sourceType: [\"camera\"],\n        success: function success(res) {\n          var imageSrc = res.tempFilePaths[0];\n          uni.uploadFile({\n            url: \"https://unidemo.dcloud.net.cn/upload\",\n            filePath: imageSrc,\n            fileType: \"image\",\n            name: \"data\",\n            success: function success(res) {\n              console.log(\"uploadImage success, res is:\", res);\n              uni.showToast({\n                title: \"上传成功\",\n                icon: \"success\",\n                duration: 1000\n              });\n              _this.imageSrc = imageSrc;\n              console.log(_this.imageSrc);\n\n              _this.uploadImage();\n            },\n            fail: function fail(err) {\n              console.log(\"uploadImage fail\", err);\n              uni.showModal({\n                content: err.errMsg,\n                showCancel: false\n              });\n            }\n          });\n        },\n        fail: function fail(err) {\n          console.log(\"chooseImage fail\", err);\n        }\n      });\n    },\n    chooseImageAlbum: function chooseImageAlbum() {\n      var _this2 = this;\n\n      uni.chooseImage({\n        count: 1,\n        sizeType: [\"original\", \"compressed\"],\n        sourceType: [\"album\"],\n        success: function success(res) {\n          var imageSrc = res.tempFilePaths[0];\n          uni.uploadFile({\n            url: \"https://unidemo.dcloud.net.cn/upload\",\n            filePath: imageSrc,\n            fileType: \"image\",\n            name: \"data\",\n            success: function success(res) {\n              console.log(\"uploadImage success, res is:\", res);\n              (0, _util.showToast)(\"上传成功\");\n              _this2.imageSrc = imageSrc;\n              console.log(_this2.imageSrc);\n\n              _this2.uploadImage();\n            },\n            fail: function fail(err) {\n              console.log(\"uploadImage fail\", err);\n              (0, _util.showToast)(err.errMsg);\n            }\n          });\n        },\n        fail: function fail(err) {\n          console.log(\"chooseImage fail\", err);\n        }\n      });\n    },\n    uploadImage: function uploadImage() {\n      var _this3 = this;\n\n      var filePath = this.imageSrc;\n      var data = {};\n      (0, _util.upload)(_api.OrderDryingUpload, data, filePath).then(function (res) {\n        var data = JSON.parse(res);\n        var picUrl = data.PicUrl;\n\n        _this3.updateUserInfo(picUrl);\n      });\n    },\n    updateUserInfo: function updateUserInfo(event) {\n      var _this4 = this;\n\n      var UserFace = event;\n      var data = {\n        UserFace: UserFace\n      };\n      (0, _util.request)(_api.UpdateUserInfo, data).then(function (res) {\n        (0, _util.showToast)(\"更换头像成功！\");\n        _this4.showPopup = !_this4.showPopup;\n\n        _this4.useInfo();\n      });\n    },\n    userNickClick: function userNickClick() {\n      (0, _util.navigateTo)(\"../settingUserNick/settingUserNick\");\n    },\n    clear: function clear() {\n      var content = \"是否确定退出登录？\";\n      (0, _util.defaultShowModal)(content).then(function (res) {\n        if (res.confirm) {\n          console.log(\"用户点击确定\");\n\n          try {\n            (0, _util.navigateBack)(1);\n            uni.clearStorageSync();\n          } catch (e) {\n            (0, _util.showToast)(\"退出登录失败\");\n          }\n        } else if (res.cancel) {\n          console.log(\"用户点击取消\");\n        }\n      });\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["setting.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<view class=\"content\">\n\t\t<view class=\"list-item userFace\" @click=\"userFaceClick\">\n\t\t\t<view class=\"list-item-user\">头像</view>\n\t\t\t<view class=\"list-item-face\">\n\t\t\t\t<image :src=\"userFace\" />\n\t\t\t\t<uni-icon :size=\"20\" color=\"#bbb\" type=\"arrowright\" />\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"list-item userNick\" @click=\"userNickClick\">\n\t\t\t<view class=\"list-item-user\">昵称</view>\n\t\t\t<view class=\"list-item-nick\">\n\t\t\t\t<text>{{userNick}}</text>\n\t\t\t\t<uni-icon :size=\"20\" color=\"#bbb\" type=\"arrowright\" />\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"sign-out\">\n\t\t\t<button class=\"signBtn\" @click=\"clear\">退出登录</button>\n\t\t</view>\n\t\t<i-popup-toggle :show=\"showPopup\" position=\"bottom\" @hidePopup=\"togglePopup('')\">\n\t\t\t<view class=\"popup-bottom\">\n\t\t\t\t<view class=\"popup-bottom-content\">\n\t\t\t\t\t<button class=\"previewImageFull\" @click=\"preview(userFace, userFace)\">查看大图</button>\n\t\t\t\t\t<button class=\"chooseImageCamera\" @click=\"chooseImageCamera\">拍照换头像</button>\n\t\t\t\t\t<button class=\"chooseImageAlbum\" @click=\"chooseImageAlbum\">从相册选择新头像</button>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"cancel\">\n\t\t\t\t\t<button @click=\"userFaceClick\">取消</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</i-popup-toggle>\n\t</view>\n</template>\n\n<script>\nimport {\n\trequest,\n\tnavigateTo,\n\tshowToast,\n\tdefaultShowModal,\n\tupload,\n\tpreviewImage,\n\tnavigateBack,\n\tonShareAppMessage\n} from \"@/common/utils/util\";\nimport {\n\tGetLoginUser,\n\tUpdateUserInfo,\n\tOrderDryingUpload\n} from \"@/common/config/api\";\nimport uniIcon from \"@/components/uni-icon/uni-icon.vue\";\nimport iPopupToggle from \"@/components/i-popup-toggle/i-popup-toggle.vue\";\nexport default {\n\tcomponents: {\n\t\tuniIcon,\n\t\tiPopupToggle\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuserInfo: \"\",\n\t\t\tuserNick: \"\",\n\t\t\tuserFace: \"\",\n\t\t\timageSrc: \"\",\n\t\t\tshowPopup: false\n\t\t};\n\t},\n\tonLoad(options) {\n\t\tconsole.log(\"onLoad\", options);\n\t},\n\tonShow() {\n\t\tthis.useInfo();\n\t},\n\tonPullDownRefresh() {\n\t\tthis.useInfo();\n\t},\n\tonShareAppMessage(e) {\n\t\treturn onShareAppMessage(e);\n\t},\n\tmethods: {\n\t\tasync useInfo() {\n\t\t\tlet userInfo = await this.getLoginUser();\n\t\t\tthis.userInfo = userInfo;\n\t\t\tthis.userFace = userInfo.userFace;\n\t\t\tthis.userNick = decodeURIComponent(userInfo.userNick);\n\t\t},\n\t\t// 获取当前登录用户的信息\n\t\tgetLoginUser() {\n\t\t\treturn new Promise((sesolve, reject) => {\n\t\t\t\tlet data = {};\n\t\t\t\trequest(GetLoginUser, data).then(res => {\n\t\t\t\t\tuni.setStorageSync(\"UserInfo\", res.UserInfo);\n\t\t\t\t\tsesolve(res.UserInfo);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tuserFaceClick() {\n\t\t\tthis.showPopup = !this.showPopup;\n\t\t},\n\t\ttogglePopup() {\n\t\t\tthis.showPopup = !this.showPopup;\n\t\t},\n\t\tpreview(current, urls) {\n\t\t\turls = [urls];\n\t\t\tpreviewImage(current, urls);\n\t\t},\n\t\tchooseImageCamera() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1,\n\t\t\t\tsizeType: [\"original\", \"compressed\"],\n\t\t\t\tsourceType: [\"camera\"],\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tvar imageSrc = res.tempFilePaths[0];\n\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\turl: \"https://unidemo.dcloud.net.cn/upload\",\n\t\t\t\t\t\tfilePath: imageSrc,\n\t\t\t\t\t\tfileType: \"image\",\n\t\t\t\t\t\tname: \"data\",\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconsole.log(\"uploadImage success, res is:\", res);\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: \"上传成功\",\n\t\t\t\t\t\t\t\ticon: \"success\",\n\t\t\t\t\t\t\t\tduration: 1000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.imageSrc = imageSrc;\n\t\t\t\t\t\t\tconsole.log(this.imageSrc);\n\t\t\t\t\t\t\tthis.uploadImage();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: err => {\n\t\t\t\t\t\t\tconsole.log(\"uploadImage fail\", err);\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\tcontent: err.errMsg,\n\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tfail: err => {\n\t\t\t\t\tconsole.log(\"chooseImage fail\", err);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tchooseImageAlbum() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1,\n\t\t\t\tsizeType: [\"original\", \"compressed\"],\n\t\t\t\tsourceType: [\"album\"],\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tvar imageSrc = res.tempFilePaths[0];\n\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\turl: \"https://unidemo.dcloud.net.cn/upload\",\n\t\t\t\t\t\tfilePath: imageSrc,\n\t\t\t\t\t\tfileType: \"image\",\n\t\t\t\t\t\tname: \"data\",\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tconsole.log(\"uploadImage success, res is:\", res);\n\t\t\t\t\t\t\tshowToast(\"上传成功\")\n\t\t\t\t\t\t\tthis.imageSrc = imageSrc;\n\t\t\t\t\t\t\tconsole.log(this.imageSrc);\n\t\t\t\t\t\t\tthis.uploadImage();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: err => {\n\t\t\t\t\t\t\tconsole.log(\"uploadImage fail\", err);\n\t\t\t\t\t\t\tshowToast(err.errMsg)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tfail: err => {\n\t\t\t\t\tconsole.log(\"chooseImage fail\", err);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tuploadImage() {\n\t\t\tlet filePath = this.imageSrc;\n\t\t\tlet data = {};\n\t\t\tupload(OrderDryingUpload, data, filePath).then(res => {\n\t\t\t\tlet data = JSON.parse(res);\n\t\t\t\tlet picUrl = data.PicUrl;\n\t\t\t\tthis.updateUserInfo(picUrl);\n\t\t\t});\n\t\t},\n\t\tupdateUserInfo(event) {\n\t\t\tlet UserFace = event;\n\t\t\tlet data = {\n\t\t\t\tUserFace: UserFace\n\t\t\t};\n\t\t\trequest(UpdateUserInfo, data).then(res => {\n\t\t\t\tshowToast(\"更换头像成功！\");\n\t\t\t\tthis.showPopup = !this.showPopup;\n\t\t\t\tthis.useInfo();\n\t\t\t});\n\t\t},\n\t\tuserNickClick() {\n\t\t\tnavigateTo(\"../settingUserNick/settingUserNick\");\n\t\t},\n\t\tclear() {\n\t\t\tlet content = \"是否确定退出登录？\";\n\t\t\tdefaultShowModal(content).then(res => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tconsole.log(\"用户点击确定\");\n\t\t\t\t\ttry {\n\t\t\t\t\t\tnavigateBack(1);\n\t\t\t\t\t\tuni.clearStorageSync();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tshowToast(\"退出登录失败\");\n\t\t\t\t\t}\n\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\tconsole.log(\"用户点击取消\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n\n<style scoped>\n.list-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 10upx 30upx;\n\tbackground-color: #fff;\n}\n\n.userFace {\n\theight: 180upx;\n\tborder-bottom: 2upx solid #f4f4f4;\n}\n\n.userNick {\n\theight: 100upx;\n}\n\n.list-item-face {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: center;\n}\n\n.list-item-face image {\n\twidth: 120upx;\n\theight: 120upx;\n\tborder-radius: 50%;\n}\n\n.sign-out {\n\tmargin-top: 20upx;\n}\n\n.signBtn {\n\tcolor: #7a7a7a;\n\tbackground-color: #fff;\n}\n\n.popup-bottom {\n\twidth: 90%;\n\topacity: 0.9;\n}\n\n.popup-bottom button {\n\tcolor: #7a7a7a;\n}\n\n.previewImageFull {\n\tborder-top-left-radius: 10upx;\n\tborder-top-right-radius: 10upx;\n}\n\n.chooseImageAlbum {\n\tborder-bottom-left-radius: 10upx;\n\tborder-bottom-right-radius: 10upx;\n}\n\n.cancel {\n\tmargin-top: 20upx;\n\tmargin-bottom: 20upx;\n}\n\n.cancel button {\n\tborder-radius: 10upx;\n}\n</style>"],"sourceRoot":"src/pages/ucenter/setting"}]}