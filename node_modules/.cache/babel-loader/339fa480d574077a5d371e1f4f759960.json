{"remainingRequest":"/Users/lee/Desktop/github/mall-project/node_modules/babel-loader/lib/index.js!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-2!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lee/Desktop/github/mall-project/src/pages/ucenter/login/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lee/Desktop/github/mall-project/src/pages/ucenter/login/login.vue","mtime":1562508058510},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/babel-loader/lib/index.js","mtime":1560261191357},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1561751947145},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1561751947145},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js","mtime":1554990705750},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":1561751947145}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _vuex = require(\"vuex\");\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _default = {\n  data: function data() {\n    return {\n      title: 'login',\n      providerList: []\n    };\n  },\n  computed: _objectSpread({}, (0, _vuex.mapState)(['hasLogin'])),\n  onLoad: function onLoad() {\n    var _this = this;\n\n    uni.getProvider({\n      service: 'oauth',\n      success: function success(result) {\n        _this.providerList = result.provider.map(function (value) {\n          var providerName = '';\n\n          switch (value) {\n            case 'weixin':\n              providerName = '微信登录';\n              break;\n\n            case 'qq':\n              providerName = 'QQ登录';\n              break;\n\n            case 'sinaweibo':\n              providerName = '新浪微博登录';\n              break;\n\n            case 'xiaomi':\n              providerName = '小米登录';\n              break;\n\n            case 'alipay':\n              providerName = '支付宝登录';\n              break;\n\n            case 'baidu':\n              providerName = '百度登录';\n              break;\n\n            case 'toutiao':\n              providerName = '头条登录';\n              break;\n          }\n\n          return {\n            name: providerName,\n            id: value\n          };\n        });\n      },\n      fail: function fail(error) {\n        console.log('获取登录通道失败', error);\n      }\n    });\n  },\n  methods: _objectSpread({}, (0, _vuex.mapMutations)(['login']), {\n    tologin: function tologin(provider) {\n      var _this2 = this;\n\n      uni.login({\n        provider: provider.id,\n        success: function success(res) {\n          console.log('login success:', res); // 更新保存在 store 中的登录状态\n\n          _this2.login(provider.id);\n        },\n        fail: function fail(err) {\n          console.log('login fail:', err);\n        }\n      });\n    }\n  })\n};\nexports.default = _default;",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;AAyBA;;;;;;eAKA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,OADA;AAEA,MAAA,YAAA,EAAA;AAFA,KAAA;AAIA,GANA;AAOA,EAAA,QAAA,oBACA,oBAAA,CAAA,UAAA,CAAA,CADA,CAPA;AAUA,EAAA,MAVA,oBAUA;AAAA;;AACA,IAAA,GAAA,CAAA,WAAA,CAAA;AACA,MAAA,OAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA,iBAAA,MAAA,EAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,UAAA,KAAA,EAAA;AACA,cAAA,YAAA,GAAA,EAAA;;AACA,kBAAA,KAAA;AACA,iBAAA,QAAA;AACA,cAAA,YAAA,GAAA,MAAA;AACA;;AACA,iBAAA,IAAA;AACA,cAAA,YAAA,GAAA,MAAA;AACA;;AACA,iBAAA,WAAA;AACA,cAAA,YAAA,GAAA,QAAA;AACA;;AACA,iBAAA,QAAA;AACA,cAAA,YAAA,GAAA,MAAA;AACA;;AACA,iBAAA,QAAA;AACA,cAAA,YAAA,GAAA,OAAA;AACA;;AACA,iBAAA,OAAA;AACA,cAAA,YAAA,GAAA,MAAA;AACA;;AACA,iBAAA,SAAA;AACA,cAAA,YAAA,GAAA,MAAA;AACA;AArBA;;AAuBA,iBAAA;AACA,YAAA,IAAA,EAAA,YADA;AAEA,YAAA,EAAA,EAAA;AAFA,WAAA;AAIA,SA7BA,CAAA;AA+BA,OAlCA;AAmCA,MAAA,IAAA,EAAA,cAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,UAAA,EAAA,KAAA;AACA;AArCA,KAAA;AAuCA,GAlDA;AAmDA,EAAA,OAAA,oBACA,wBAAA,CAAA,OAAA,CAAA,CADA;AAEA,IAAA,OAFA,mBAEA,QAFA,EAEA;AAAA;;AACA,MAAA,GAAA,CAAA,KAAA,CAAA;AACA,QAAA,QAAA,EAAA,QAAA,CAAA,EADA;AAKA,QAAA,OAAA,EAAA,iBAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,EAAA,GAAA,EADA,CAEA;;AACA,UAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA,EAAA;AACA,SATA;AAUA,QAAA,IAAA,EAAA,cAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,aAAA,EAAA,GAAA;AACA;AAZA,OAAA;AAcA;AAjBA;AAnDA,C","sourcesContent":["<template>\n\t<view>\n\t\t<page-head :title=\"title\"></page-head>\n\t\t<view class=\"uni-padding-wrap\">\n\t\t\t<view style=\"background:#FFF; padding:40upx;\">\n\t\t\t\t<block v-if=\"hasLogin === true\">\n\t\t\t\t\t<view class=\"uni-h3 uni-center uni-common-mt\">已登录</view>\n\t\t\t\t\t<view class=\"uni-hello-text uni-center\">\n\t\t\t\t\t\t<text>每个账号仅需登录 1 次，\\n后续每次进入页面即可自动拉取用户信息。</text>\n\t\t\t\t\t</view>\n\t\t\t\t</block>\n\t\t\t\t<block v-if=\"hasLogin === false\">\n\t\t\t\t\t<view class=\"uni-h3 uni-center uni-common-mt\">未登录</view>\n\t\t\t\t\t<view class=\"uni-hello-text uni-center\">\n\t\t\t\t\t\t请点击按钮登录\n\t\t\t\t\t</view>\n\t\t\t\t</block>\n\t\t\t</view>\n\t\t\t<view class=\"uni-btn-v uni- uni-common-mt\">\n\t\t\t\t<button type=\"primary\" class=\"page-body-button\" v-for=\"(value,key) in providerList\" @click=\"tologin(value)\" :key=\"key\">{{value.name}}</button>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n<script>\n\timport {\n\t\tmapState,\n\t\tmapMutations\n\t} from 'vuex'\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttitle: 'login',\n\t\t\t\tproviderList: []\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\t...mapState(['hasLogin'])\n\t\t},\n\t\tonLoad() {\n\t\t\tuni.getProvider({\n\t\t\t\tservice: 'oauth',\n\t\t\t\tsuccess: (result) => {\n\t\t\t\t\tthis.providerList = result.provider.map((value) => {\n\t\t\t\t\t\tlet providerName = '';\n\t\t\t\t\t\tswitch (value) {\n\t\t\t\t\t\t\tcase 'weixin':\n\t\t\t\t\t\t\t\tproviderName = '微信登录'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'qq':\n\t\t\t\t\t\t\t\tproviderName = 'QQ登录'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'sinaweibo':\n\t\t\t\t\t\t\t\tproviderName = '新浪微博登录'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'xiaomi':\n\t\t\t\t\t\t\t\tproviderName = '小米登录'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'alipay':\n\t\t\t\t\t\t\t\tproviderName = '支付宝登录'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'baidu':\n\t\t\t\t\t\t\t\tproviderName = '百度登录'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'toutiao':\n\t\t\t\t\t\t\t\tproviderName = '头条登录'\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tname: providerName,\n\t\t\t\t\t\t\tid: value\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t},\n\t\t\t\tfail: (error) => {\n\t\t\t\t\tconsole.log('获取登录通道失败', error);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tmethods: {\n\t\t\t...mapMutations(['login']),\n\t\t\ttologin(provider) {\n\t\t\t\tuni.login({\n\t\t\t\t\tprovider: provider.id,\n                    // #ifdef MP-ALIPAY\n                    scopes: 'auth_user',  //支付宝小程序需设置授权类型\n                    // #endif\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log('login success:', res);\n\t\t\t\t\t\t// 更新保存在 store 中的登录状态\n\t\t\t\t\t\tthis.login(provider.id);\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.log('login fail:', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\tbutton {\n\t\tbackground-color: #007aff;\n\t\tcolor: #ffffff;\n\t}\n</style>\n"],"sourceRoot":"src/pages/ucenter/login"}]}