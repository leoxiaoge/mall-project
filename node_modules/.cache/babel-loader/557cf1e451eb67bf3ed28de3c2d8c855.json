{"remainingRequest":"/Users/lee/Desktop/github/mall-project/node_modules/babel-loader/lib/index.js!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-2!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js!/Users/lee/Desktop/github/mall-project/src/components/gaoyia-parse/parse.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lee/Desktop/github/mall-project/src/components/gaoyia-parse/parse.vue","mtime":1568125935178},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/babel-loader/lib/index.js","mtime":1560261191357},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js","mtime":1563798331564},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/cache-loader/dist/cjs.js","mtime":1554990705312},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/vue-loader/lib/index.js","mtime":1563798333387},{"path":"/Users/lee/Desktop/github/mall-project/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-scoped-loader/index.js","mtime":1563798331564}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _html2json = _interopRequireDefault(require(\"./libs/html2json\"));\n\nvar _wxParseTemplate = _interopRequireDefault(require(\"./components/wxParseTemplate0\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default2 = {\n  name: 'wxParse',\n  props: {\n    // user-select:none;\n    userSelect: {\n      type: String,\n      default: 'text' //none |text| all | element\n\n    },\n    imgOptions: {\n      type: [Object, Boolean],\n      default: function _default() {\n        return {\n          loop: false,\n          indicator: 'number',\n          longPressActions: false // longPressActions: {\n          // \t itemList: ['发送给朋友', '保存图片', '收藏'],\n          // \t\tsuccess: function (res) {\n          // \t\t\tconsole.log('选中了第' + (res.tapIndex + 1) + '个按钮');\n          // \t\t},\n          // \t\tfail: function (res) {\n          // \t\t\tconsole.log(res.errMsg);\n          // \t\t}    \n          // \t}\n          // }\n\n        };\n      }\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    className: {\n      type: String,\n      default: ''\n    },\n    content: {\n      type: String,\n      default: ''\n    },\n    noData: {\n      type: String,\n      default: '<div style=\"color: red;\">数据不能为空</div>'\n    },\n    startHandler: {\n      type: Function,\n      default: function _default() {\n        return function (node) {\n          node.attr.class = null;\n          node.attr.style = null;\n        };\n      }\n    },\n    endHandler: {\n      type: Function,\n      default: null\n    },\n    charsHandler: {\n      type: Function,\n      default: null\n    },\n    imageProp: {\n      type: Object,\n      default: function _default() {\n        return {\n          mode: 'aspectFit',\n          padding: 0,\n          lazyLoad: false,\n          domain: ''\n        };\n      }\n    }\n  },\n  components: {\n    wxParseTemplate: _wxParseTemplate.default\n  },\n  data: function data() {\n    return {\n      nodes: {},\n      imageUrls: [],\n      wxParseWidth: {\n        value: 0\n      }\n    };\n  },\n  computed: {},\n  mounted: function mounted() {\n    var that = this;\n    this.getWidth().then(function (data) {\n      that.wxParseWidth.value = data;\n    });\n    this.setHtml();\n  },\n  methods: {\n    setHtml: function setHtml() {\n      var content = this.content,\n          noData = this.noData,\n          imageProp = this.imageProp,\n          startHandler = this.startHandler,\n          endHandler = this.endHandler,\n          charsHandler = this.charsHandler;\n      var parseData = content || noData;\n      var customHandler = {\n        start: startHandler,\n        end: endHandler,\n        chars: charsHandler\n      };\n      var results = (0, _html2json.default)(parseData, customHandler, imageProp, this);\n      this.imageUrls = results.imageUrls;\n      this.nodes = results.nodes;\n    },\n    getWidth: function getWidth() {\n      var _this = this;\n\n      return new Promise(function (res, rej) {\n        uni.createSelectorQuery().in(_this).select('.wxParse').fields({\n          size: true,\n          scrollOffset: true\n        }, function (data) {\n          res(data.width);\n        }).exec();\n      });\n    },\n    navigate: function navigate(href, $event, attr) {\n      console.log(href, attr);\n      this.$emit('navigate', href, $event);\n    },\n    preview: function preview(src, $event) {\n      if (!this.imageUrls.length || typeof this.imgOptions === 'boolean') {} else {\n        uni.previewImage({\n          current: src,\n          urls: this.imageUrls,\n          loop: this.imgOptions.loop,\n          indicator: this.imgOptions.indicator,\n          longPressActions: this.imgOptions.longPressActions\n        });\n      }\n\n      this.$emit('preview', src, $event);\n    },\n    removeImageUrl: function removeImageUrl(src) {\n      var imageUrls = this.imageUrls;\n      imageUrls.splice(imageUrls.indexOf(src), 1);\n    }\n  },\n  // 父组件中提供\n  provide: function provide() {\n    return {\n      parseWidth: this.wxParseWidth,\n      parseSelect: this.userSelect // 提示：provide 和 inject 绑定并不是可响应的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的属性还是可响应的。\n\n    };\n  },\n  watch: {\n    content: function content() {\n      this.setHtml();\n    }\n  }\n};\nexports.default = _default2;",{"version":3,"sources":["parse.vue"],"names":[],"mappings":"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","sourcesContent":["<!--**\n * forked from：https://github.com/F-loat/mpvue-wxParse\n *\n * github地址: https://github.com/dcloudio/uParse\n *\n * for: uni-app框架下 富文本解析\n * \n * 优化 by gaoyia@qq.com  https://github.com/gaoyia/parse\n */-->\n\n<template>\n\t<!--基础元素-->\n\t<div class=\"wxParse\" :class=\"className\" :style=\"'user-select:' + userSelect\">\n\t\t<block v-for=\"(node, index) of nodes\" :key=\"index\" v-if=\"!loading\" ><wxParseTemplate :node=\"node\" /></block>\n\t</div>\n</template>\n\n<script>\nimport HtmlToJson from './libs/html2json';\nimport wxParseTemplate from './components/wxParseTemplate0';\n\nexport default {\n\tname: 'wxParse',\n\tprops: {\n\t\t// user-select:none;\n\t\tuserSelect:{\n\t\t\ttype:String,\n\t\t\tdefault:'text'//none |text| all | element\n\t\t},\n\t\timgOptions:{\n\t\t\ttype:[Object,Boolean],\n\t\t\tdefault:function(){\n\t\t\t\treturn {\n\t\t\t\t\tloop: false,\n\t\t\t\t\tindicator:'number',\n\t\t\t\t\tlongPressActions:false\n\t\t\t\t\t// longPressActions: {\n\t\t\t\t\t// \t itemList: ['发送给朋友', '保存图片', '收藏'],\n\t\t\t\t\t// \t\tsuccess: function (res) {\n\t\t\t\t\t// \t\t\tconsole.log('选中了第' + (res.tapIndex + 1) + '个按钮');\n\t\t\t\t\t// \t\t},\n\t\t\t\t\t// \t\tfail: function (res) {\n\t\t\t\t\t// \t\t\tconsole.log(res.errMsg);\n\t\t\t\t\t// \t\t}    \n\t\t\t\t\t// \t}\n\t\t\t\t\t// }\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tclassName: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tcontent: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\tnoData: {\n\t\t\ttype: String,\n\t\t\tdefault: '<div style=\"color: red;\">数据不能为空</div>'\n\t\t},\n\t\tstartHandler: {\n\t\t\ttype: Function,\n\t\t\tdefault() {\n\t\t\t\treturn node => {\n\t\t\t\t\tnode.attr.class = null;\n\t\t\t\t\tnode.attr.style = null;\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\tendHandler: {\n\t\t\ttype: Function,\n\t\t\tdefault: null\n\t\t},\n\t\tcharsHandler: {\n\t\t\ttype: Function,\n\t\t\tdefault: null\n\t\t},\n\t\timageProp: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn {\n\t\t\t\t\tmode: 'aspectFit',\n\t\t\t\t\tpadding: 0,\n\t\t\t\t\tlazyLoad: false,\n\t\t\t\t\tdomain: ''\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t},\n\tcomponents: {\n\t\twxParseTemplate\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tnodes:{},\n\t\t\timageUrls: [],\n\t\t\twxParseWidth:{\n\t\t\t\tvalue:0\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t},\n\tmounted() {\n\t\tlet that = this\n\t\tthis.getWidth().then(function(data){\n\t\t\tthat.wxParseWidth.value = data;\n\t\t})\n\t\tthis.setHtml()\n\t},\n\tmethods: {\n\t\tsetHtml(){\n\t\t\tlet { content, noData, imageProp, startHandler, endHandler, charsHandler } = this;\n\t\t\tlet parseData = content || noData;\n\t\t\tlet customHandler = {\n\t\t\t\tstart: startHandler,\n\t\t\t\tend: endHandler,\n\t\t\t\tchars: charsHandler\n\t\t\t};\n\t\t\tlet results = HtmlToJson(parseData, customHandler, imageProp, this);\n\t\t\tthis.imageUrls = results.imageUrls;\n\t\t\tthis.nodes = results.nodes;\n\t\t},\n\t\tgetWidth() {\n                return new Promise((res, rej) => {\n\t\t\t\t\t// #ifndef MP-ALIPAY || MP-BAIDU\n\t\t\t\t\t\tuni.createSelectorQuery()\n\t\t\t\t\t\t.in(this)\n\t\t\t\t\t\t.select('.wxParse')\n\t\t\t\t\t\t.fields(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsize: true,\n\t\t\t\t\t\t\t\tscrollOffset: true\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdata => {\n\t\t\t\t\t\t\t\tres(data.width);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).exec();\n\t\t\t\t\t// #endif\n\t\t\t\t\t// #ifdef MP-BAIDU\n\t\t\t\t\t\tswan.createSelectorQuery().select('.wxParse').boundingClientRect(function(rect){\n\t\t\t\t\t\t\trect[0].width\n\t\t\t\t\t\t}).exec()\n\t\t\t\t\t// #endif\n\t\t\t\t\t// #ifdef MP-ALIPAY\n\t\t\t\t\t\tmy.createSelectorQuery()\n\t\t\t\t\t\t.select('.wxParse')\n\t\t\t\t\t\t.boundingClientRect().exec((ret) => {\n\t\t\t\t\t\t\tres(ret[0].width);\n\t\t\t\t\t\t});\n\t\t\t\t\t// #endif\n                });\n        },\n\t\tnavigate(href, $event, attr) {\n\t\t\tconsole.log(href,attr);\n\t\t\tthis.$emit('navigate', href, $event);\n\t\t},\n\t\tpreview(src, $event) {\n\t\t\tif (!this.imageUrls.length||typeof this.imgOptions==='boolean'){\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tuni.previewImage({\n\t\t\t\t\tcurrent: src,\n\t\t\t\t\turls: this.imageUrls,\n\t\t\t\t\tloop: this.imgOptions.loop,\n\t\t\t\t\tindicator: this.imgOptions.indicator,\n\t\t\t\t\tlongPressActions: this.imgOptions.longPressActions\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.$emit('preview', src, $event);\n\t\t},\n\t\tremoveImageUrl(src) {\n\t\t\tconst { imageUrls } = this;\n\t\t\timageUrls.splice(imageUrls.indexOf(src), 1);\n\t\t}\n\t},\n\t// 父组件中提供\n\tprovide() {\n\t\treturn {\n\t\t\tparseWidth: this.wxParseWidth,\n\t\t\tparseSelect: this.userSelect\n\t\t\t// 提示：provide 和 inject 绑定并不是可响应的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的属性还是可响应的。\n\t\t};\n\t},\n\twatch: {\n      content() {\n        this.setHtml()\n      }\n    }\n};\n</script>"],"sourceRoot":"src/components/gaoyia-parse"}]}