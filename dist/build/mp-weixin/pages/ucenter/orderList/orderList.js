(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ucenter/orderList/orderList"],{"059b":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r("a34a")),a=s(r("66fd")),i=r("c440"),o=r("5177");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function o(e){u(i,n,a,o,s,"next",e)}function s(e){u(i,n,a,o,s,"throw",e)}o(void 0)})}}var d=function(){return Promise.all([r.e("common/vendor"),r.e("components/mescroll-diy/mescroll-beibei")]).then(r.bind(null,"3e72"))},l=function(){return r.e("components/order-list/order-list").then(r.bind(null,"cc87"))},f=a.default.extend({components:{MescrollUni:d,mediaList:l},data:function(){return{current:"",OrderStatus:"",orderList:[],id:"",orderID:"",PayTypeID:1,tabBars:[{name:"全部",id:0,status:"-1"},{name:"待填地址",id:1,status:"0"},{name:"待付款",id:2,status:"1"},{name:"待发货",id:3,status:"2"},{name:"待收货",id:4,status:"3"},{name:"待晒单",id:5,status:"4"}],mescroll:[]}},onLoad:function(e){console.log(e);var t=e.status;this.current=t,this.OrderStatus=t,this.$store.dispatch("getUserOpenId")},methods:{tapTab:function(e){this.current=e;var t=this.mescroll;this.downCallback(t)},downCallback:function(e){this.mescroll=e,e.resetUpScroll()},upCallback:function(e){var t=this;this.getListDataFromNet(e.num,e.size,function(r){e.endSuccess(r.length),1==e.num&&(t.orderList=[]),t.orderList=t.orderList.concat(r),console.log("orderList",r,t.orderList)},function(){e.endErr()})},getListDataFromNet:function(){var e=c(n.default.mark(function e(t,r,a,i){var o;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getOrderList(t,r);case 3:o=e.sent,a&&a(o),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),i&&i();case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(t,r,n,a){return e.apply(this,arguments)}return t}(),getOrderList:function(e,t){var r=this;return new Promise(function(n,a){var s=r.current;if("-1"==s){var u={PageID:e,PageSize:t};(0,i.request)(o.OrderListGet,u).then(function(e){n(e.OrderList)}).catch(function(e){var t=r.mescroll;t.endErr()})}else{var c={OrderStatus:s,PageID:e,PageSize:t};(0,i.request)(o.OrderListGet,c).then(function(e){n(e.OrderList)}).catch(function(e){var t=r.mescroll;t.endErr()})}})},order:function(e){this.orderID=e},product:function(e){this.id=e},action:function(){var e=c(n.default.mark(function e(t){var r,a,o,s;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log("action",t),e.t0=t,e.next="填写地址"===e.t0?4:"确认收货"===e.t0?8:"去支付"===e.t0?14:"晒单"===e.t0?16:18;break;case 4:return r=!0,a=this.orderID,(0,i.navigateTo)("../addressShipping/addressShipping?disabled="+r+"&orderID="+a),e.abrupt("break",18);case 8:return e.next=10,this.orderConfirmReceiving();case 10:return o=e.sent,s=this.mescroll,o.IsError?(0,i.showToast)(o.ErrMsg):((0,i.showToast)("确认收货成功！"),this.downCallback(s)),e.abrupt("break",18);case 14:return this.payment(),e.abrupt("break",18);case 16:return(0,i.navigateTo)("../orderDryingUpload/orderDryingUpload?id="+this.orderID+"&OrderID="+this.orderID),e.abrupt("break",18);case 18:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),goDetail:function(e){console.log(e),(0,i.navigateTo)("../orderDetail/orderDetail?id="+e.ID+"&OrderID="+e.OrderID)},goOrderDrying:function(e){console.log(e),(0,i.navigateTo)("../orderDryingUpload/orderDryingUpload?id="+e.ID+"&OrderID="+e.OrderID)},orderConfirmReceiving:function(){var e=this;return new Promise(function(t,r){var n=e.orderID,a={OrderID:n};(0,i.request)(o.OrderConfirmReceiving,a).then(function(e){t(e),console.log(e)})})},payment:function(){var t=c(n.default.mark(function t(){var r,a,o;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.payMoneySubmit();case 2:r=t.sent,a=JSON.parse(r),o=this.mescroll,e.requestPayment({timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:"MD5",paySign:a.paySign,success:function(){(0,i.showToast)("支付成功！!"),o.resetUpScroll()},fail:function(){(0,i.showModal)("支付失败，用户取消支付!")}});case 6:case"end":return t.stop()}},t,this)}));function r(){return t.apply(this,arguments)}return r}(),payMoneySubmit:function(){var e=c(n.default.mark(function e(){var t,r,a,s;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$store.state,r=t.openid,a=this.orderID,s=this.PayTypeID,e.abrupt("return",new Promise(function(e,t){var n={OrderID:a,PayTypeID:s,OpenID:r};(0,i.request)(o.OrderPay,n).then(function(t){console.log(t),e(t.PayParam)})}));case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}});t.default=f}).call(this,r("543d")["default"])},"29e9":function(e,t,r){},"4f4d":function(e,t,r){"use strict";r.r(t);var n=r("74cd"),a=r("d54b");for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);r("b26e");var o=r("2877"),s=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=s.exports},"74cd":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},a=[];r.d(t,"a",function(){return n}),r.d(t,"b",function(){return a})},b26e:function(e,t,r){"use strict";var n=r("29e9"),a=r.n(n);a.a},d54b:function(e,t,r){"use strict";r.r(t);var n=r("059b"),a=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,function(){return n[e]})}(i);t["default"]=a.a}},[["e2f2","common/runtime","common/vendor"]]]);