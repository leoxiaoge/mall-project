(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ucenter/setting/setting"],{"33a8":function(e,n,o){},"3e2a":function(e,n,o){"use strict";(function(e){o("6cdc"),o("921b");var n=t(o("9786"));function t(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,o("543d")["createPage"])},"585d":function(e,n,o){"use strict";var t=function(){var e=this,n=e.$createElement;e._self._c},u=[];o.d(n,"a",(function(){return t})),o.d(n,"b",(function(){return u}))},7991:function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=a(o("a34a")),u=o("c440"),c=o("5177");function a(e){return e&&e.__esModule?e:{default:e}}function s(e,n,o,t,u,c,a){try{var s=e[c](a),i=s.value}catch(r){return void o(r)}s.done?n(i):Promise.resolve(i).then(t,u)}function i(e){return function(){var n=this,o=arguments;return new Promise((function(t,u){var c=e.apply(n,o);function a(e){s(c,t,u,a,i,"next",e)}function i(e){s(c,t,u,a,i,"throw",e)}a(void 0)}))}}var r=function(){return o.e("components/uni-icon/uni-icon").then(o.bind(null,"f0ab"))},l=function(){return o.e("components/i-popup-toggle/i-popup-toggle").then(o.bind(null,"6cc9"))},f={components:{uniIcon:r,iPopupToggle:l},data:function(){return{userInfo:"",userNick:"",userFace:"",imageSrc:"",showPopup:!1}},onLoad:function(e){console.log("onLoad",e)},onShow:function(){this.useInfo()},onShareAppMessage:function(e){return(0,u.onShareAppMessage)(e)},methods:{useInfo:function(){var e=i(t.default.mark((function e(){var n;return t.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getLoginUser();case 2:n=e.sent,this.userInfo=n,this.userFace=n.userFace,this.userNick=decodeURIComponent(n.userNick);case 6:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),getLoginUser:function(){return new Promise((function(n,o){var t={};(0,u.request)(c.GetLoginUser,t).then((function(o){e.setStorageSync("UserInfo",o.UserInfo),n(o.UserInfo)}))}))},userFaceClick:function(){this.showPopup=!this.showPopup},togglePopup:function(){this.showPopup=!this.showPopup},preview:function(e,n){n=[n],(0,u.previewImage)(e,n)},chooseImageCamera:function(){var n=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(o){var t=o.tempFilePaths[0];e.uploadFile({url:"https://unidemo.dcloud.net.cn/upload",filePath:t,fileType:"image",name:"data",success:function(o){console.log("uploadImage success, res is:",o),e.showToast({title:"上传成功",icon:"success",duration:1e3}),n.imageSrc=t,console.log(n.imageSrc),n.uploadImage()},fail:function(n){console.log("uploadImage fail",n),e.showModal({content:n.errMsg,showCancel:!1})}})},fail:function(e){console.log("chooseImage fail",e)}})},chooseImageAlbum:function(){var n=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(o){var t=o.tempFilePaths[0];e.uploadFile({url:"https://unidemo.dcloud.net.cn/upload",filePath:t,fileType:"image",name:"data",success:function(e){console.log("uploadImage success, res is:",e),(0,u.showToast)("上传成功"),n.imageSrc=t,console.log(n.imageSrc),n.uploadImage()},fail:function(e){console.log("uploadImage fail",e),(0,u.showToast)(e.errMsg)}})},fail:function(e){console.log("chooseImage fail",e)}})},uploadImage:function(){var e=this,n=this.imageSrc,o={};(0,u.upload)(c.OrderDryingUpload,o,n).then((function(n){var o=JSON.parse(n),t=o.PicUrl;e.updateUserInfo(t)}))},updateUserInfo:function(e){var n=this,o=e,t={UserFace:o};(0,u.request)(c.UpdateUserInfo,t).then((function(e){(0,u.showToast)("更换头像成功！"),n.showPopup=!n.showPopup,n.useInfo()}))},userNickClick:function(){(0,u.navigateTo)("../settingUserNick/settingUserNick")},clear:function(){var n="是否确定退出登录？";(0,u.defaultShowModal)(n).then((function(n){if(n.confirm){console.log("用户点击确定");try{(0,u.navigateBack)(1),e.clearStorageSync()}catch(o){(0,u.showToast)("退出登录失败")}}else n.cancel&&console.log("用户点击取消")}))}}};n.default=f}).call(this,o("543d")["default"])},"914c":function(e,n,o){"use strict";o.r(n);var t=o("7991"),u=o.n(t);for(var c in t)"default"!==c&&function(e){o.d(n,e,(function(){return t[e]}))}(c);n["default"]=u.a},9786:function(e,n,o){"use strict";o.r(n);var t=o("585d"),u=o("914c");for(var c in u)"default"!==c&&function(e){o.d(n,e,(function(){return u[e]}))}(c);o("d92b");var a=o("2877"),s=Object(a["a"])(u["default"],t["a"],t["b"],!1,null,null,null);n["default"]=s.exports},d92b:function(e,n,o){"use strict";var t=o("33a8"),u=o.n(t);u.a}},[["3e2a","common/runtime","common/vendor"]]]);