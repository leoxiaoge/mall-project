(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ucenter/setting/setting"],{"64fd":function(e,n,t){"use strict";t.r(n);var o=t("e3f8"),u=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,function(){return o[e]})}(r);n["default"]=u.a},"7dae":function(e,n,t){},9786:function(e,n,t){"use strict";t.r(n);var o=t("b31d"),u=t("64fd");for(var r in u)"default"!==r&&function(e){t.d(n,e,function(){return u[e]})}(r);t("d92b");var i=t("2877"),s=Object(i["a"])(u["default"],o["a"],o["b"],!1,null,null,null);n["default"]=s.exports},b31d:function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement;e._self._c},u=[];t.d(n,"a",function(){return o}),t.d(n,"b",function(){return u})},d92b:function(e,n,t){"use strict";var o=t("7dae"),u=t.n(o);u.a},e3f8:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=s(t("a34a")),u=s(t("66fd")),r=t("c440"),i=t("5177");function s(e){return e&&e.__esModule?e:{default:e}}function c(e,n,t,o,u,r,i){try{var s=e[r](i),c=s.value}catch(a){return void t(a)}s.done?n(c):Promise.resolve(c).then(o,u)}function a(e){return function(){var n=this,t=arguments;return new Promise(function(o,u){var r=e.apply(n,t);function i(e){c(r,o,u,i,s,"next",e)}function s(e){c(r,o,u,i,s,"throw",e)}i(void 0)})}}var f=function(){return t.e("components/uni-icon/uni-icon").then(t.bind(null,"f0ab"))},l=function(){return t.e("components/i-popup-toggle/i-popup-toggle").then(t.bind(null,"6cc9"))},p=u.default.extend({components:{uniIcon:f,iPopupToggle:l},data:function(){return{userInfo:"",userNick:"",userFace:"",showPopup:!1}},onLoad:function(e){console.log("onLoad",e)},onShow:function(){this.useInfo()},onShareAppMessage:function(e){return(0,r.onShareAppMessage)(e)},methods:{useInfo:function(){var e=a(o.default.mark(function e(){var n;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getLoginUser();case 2:n=e.sent,this.userInfo=n,this.userFace=n.userFace,this.userNick=decodeURIComponent(n.userNick);case 6:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),getLoginUser:function(){return new Promise(function(n,t){var o={};(0,r.request)(i.GetLoginUser,o).then(function(t){e.setStorageSync("UserInfo",t.UserInfo),n(t.UserInfo)})})},userFaceClick:function(){this.showPopup=!this.showPopup},togglePopup:function(){this.showPopup=!this.showPopup},preview:function(e,n){n=[n],(0,r.previewImage)(e,n)},chooseImageCamera:function(){var n=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(e){var t=JSON.stringify(e.tempFilePaths[0]);n.uploadImage(t)}})},chooseImageAlbum:function(){var n=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){var t=JSON.stringify(e.tempFilePaths[0]);n.uploadImage(t)}})},uploadImage:function(e){var n=this,t={};(0,r.upload)(i.OrderDryingUpload,t,e).then(function(e){var t=JSON.parse(e),o=t.PicUrl;n.updateUserInfo(o)})},updateUserInfo:function(e){var n=this,t=e,o={UserFace:t};(0,r.request)(i.UpdateUserInfo,o).then(function(e){(0,r.showToast)("更换头像成功！"),n.showPopup=!n.showPopup})},userNickClick:function(){(0,r.navigateTo)("../settingUserNick/settingUserNick")},clear:function(){var n="是否确定退出登录？";(0,r.defaultShowModal)(n).then(function(n){if(n.confirm){console.log("用户点击确定");try{(0,r.navigateBack)(1),e.clearStorageSync()}catch(t){(0,r.showToast)("退出登录失败")}}else n.cancel&&console.log("用户点击取消")})}}});n.default=p}).call(this,t("543d")["default"])}},[["3e2a","common/runtime","common/vendor"]]]);