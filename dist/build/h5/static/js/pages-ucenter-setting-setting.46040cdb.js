(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ucenter-setting-setting"],{"2ff1":function(t,e,n){"use strict";n.r(e);var i=n("738c"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},"34d2":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".list-item[data-v-2d17a6d6]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:%?10?% %?30?%;background-color:#fff}.userFace[data-v-2d17a6d6]{height:%?180?%;border-bottom:%?2?% solid #f4f4f4}.userNick[data-v-2d17a6d6]{height:%?100?%}.list-item-face[data-v-2d17a6d6]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.list-item-face uni-image[data-v-2d17a6d6]{width:%?120?%;height:%?120?%;border-radius:50%}.sign-out[data-v-2d17a6d6]{margin-top:%?20?%}.signBtn[data-v-2d17a6d6]{position:fixed;bottom:%?80?%;left:50%;right:50%;-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%);width:80%;height:%?80?%;line-height:%?80?%;font-size:%?36?%;border-radius:%?60?%;border:none;color:#fff;background:-o-linear-gradient(45deg,#eba866,#fe7f00);background:linear-gradient(45deg,#eba866,#fe7f00)}.popup-bottom[data-v-2d17a6d6]{width:90%;opacity:.9}.popup-bottom uni-button[data-v-2d17a6d6]{color:#7a7a7a}.previewImageFull[data-v-2d17a6d6]{border-top-left-radius:%?10?%;border-top-right-radius:%?10?%}.chooseImageAlbum[data-v-2d17a6d6]{border-bottom-left-radius:%?10?%;border-bottom-right-radius:%?10?%}.cancel[data-v-2d17a6d6]{margin-top:%?20?%;margin-bottom:%?20?%}.cancel uni-button[data-v-2d17a6d6]{border-radius:%?10?%}",""])},"380b":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("a34a")),o=n("c440"),a=n("5177"),s=r(n("f0ab")),c=r(n("6cc9"));function r(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,i,o,a,s){try{var c=t[a](s),r=c.value}catch(u){return void n(u)}c.done?e(r):Promise.resolve(r).then(i,o)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var a=t.apply(e,n);function s(t){u(a,i,o,s,c,"next",t)}function c(t){u(a,i,o,s,c,"throw",t)}s(void 0)})}}var d={components:{uniIcon:s.default,iPopupToggle:c.default},data:function(){return{userInfo:"",userNick:"",userFace:"",imageSrc:"",showPopup:!1}},onLoad:function(t){console.log("onLoad",t)},onShow:function(){this.useInfo()},onPullDownRefresh:function(){this.useInfo()},onShareAppMessage:function(t){return(0,o.onShareAppMessage)(t)},methods:{useInfo:function(){var t=l(i.default.mark(function t(){var e;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getLoginUser();case 2:e=t.sent,this.userInfo=e,this.userFace=e.userFace,this.userNick=decodeURIComponent(e.userNick);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getLoginUser:function(){return new Promise(function(t,e){var n={};(0,o.request)(a.GetLoginUser,n).then(function(e){uni.setStorageSync("UserInfo",e.UserInfo),t(e.UserInfo)})})},userFaceClick:function(){this.showPopup=!this.showPopup},togglePopup:function(){this.showPopup=!this.showPopup},preview:function(t,e){e=[e],(0,o.previewImage)(t,e)},chooseImageCamera:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(e){var n=e.tempFilePaths[0];uni.uploadFile({url:"https://unidemo.dcloud.net.cn/upload",filePath:n,fileType:"image",name:"data",success:function(e){console.log("uploadImage success, res is:",e),uni.showToast({title:"上传成功",icon:"success",duration:1e3}),t.imageSrc=n,console.log(t.imageSrc),t.uploadImage()},fail:function(t){console.log("uploadImage fail",t),uni.showModal({content:t.errMsg,showCancel:!1})}})},fail:function(t){console.log("chooseImage fail",t)}})},chooseImageAlbum:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){var n=e.tempFilePaths[0];uni.uploadFile({url:"https://unidemo.dcloud.net.cn/upload",filePath:n,fileType:"image",name:"data",success:function(e){console.log("uploadImage success, res is:",e),(0,o.showToast)("上传成功"),t.imageSrc=n,console.log(t.imageSrc),t.uploadImage()},fail:function(t){console.log("uploadImage fail",t),(0,o.showToast)(t.errMsg)}})},fail:function(t){console.log("chooseImage fail",t)}})},uploadImage:function(){var t=this,e=this.imageSrc,n={};(0,o.upload)(a.OrderDryingUpload,n,e).then(function(e){var n=JSON.parse(e),i=n.PicUrl;t.updateUserInfo(i)})},updateUserInfo:function(t){var e=this,n=t,i={UserFace:n};(0,o.request)(a.UpdateUserInfo,i).then(function(t){(0,o.showToast)("更换头像成功！"),e.showPopup=!e.showPopup,e.useInfo()})},userNickClick:function(){(0,o.navigateTo)("../settingUserNick/settingUserNick")},clear:function(){var t="是否确定退出登录？";(0,o.defaultShowModal)(t).then(function(t){if(t.confirm){console.log("用户点击确定");try{(0,o.navigateBack)(1),uni.clearStorageSync()}catch(e){(0,o.showToast)("退出登录失败")}}else t.cancel&&console.log("用户点击取消")})}}};e.default=d},"4cc3":function(t,e,n){"use strict";var i=n("7864"),o=n.n(i);o.a},"6cc9":function(t,e,n){"use strict";n.r(e);var i=n("9dd8"),o=n("2ff1");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("83b8");var s=n("2877"),c=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"c5c54104",null);e["default"]=c.exports},"738c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"iPopupToggle",props:{show:{type:Boolean,default:!1},position:{type:String,default:"middle"},mode:{type:String,default:"insert"},msg:{type:String,default:""},h5Top:{type:Boolean,default:!1},buttonMode:{type:String,default:"bottom"}},data:function(){return{offsetTop:0}},watch:{h5Top:function(t){this.offsetTop=t?44:0}},created:function(){var t=0;t=this.h5Top?0:44,this.offsetTop=t},methods:{hide:function(){"insert"===this.mode&&"middle"===this.position||this.$emit("hidePopup")},closeMask:function(){"insert"===this.mode&&this.$emit("hidePopup")},moveHandle:function(){}}};e.default=i},7864:function(t,e,n){var i=n("34d2");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("d66e66b0",i,!0,{sourceMap:!1,shadowMode:!1})},"83b8":function(t,e,n){"use strict";var i=n("a0bd"),o=n.n(i);o.a},"914c":function(t,e,n){"use strict";n.r(e);var i=n("380b"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},9786:function(t,e,n){"use strict";n.r(e);var i=n("e171"),o=n("914c");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("4cc3");var s=n("2877"),c=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"2d17a6d6",null);e["default"]=c.exports},9791:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'.uni-mask[data-v-c5c54104]{position:fixed;z-index:998;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.3)}.uni-popup[data-v-c5c54104]{position:fixed;z-index:999}.uni-popup-middle[data-v-c5c54104]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.uni-popup-middle.uni-popup-insert[data-v-c5c54104]{min-width:%?380?%;min-height:%?380?%;max-width:100%;max-height:80%;-webkit-transform:translate(-50%,-65%);-ms-transform:translate(-50%,-65%);transform:translate(-50%,-65%);background:none;-webkit-box-shadow:none;box-shadow:none}.uni-popup-middle.uni-popup-fixed[data-v-c5c54104]{border-radius:%?10?%;padding:%?30?%}.uni-close-bottom[data-v-c5c54104],.uni-close-right[data-v-c5c54104]{position:absolute;bottom:%?-180?%;text-align:center;border-radius:50%;color:#f5f5f5;font-size:%?60?%;font-weight:700;opacity:.8;z-index:-1}.uni-close-bottom[data-v-c5c54104]{margin:auto;left:0;right:0}.uni-close-right[data-v-c5c54104]{right:%?-60?%;top:%?-80?%}.uni-close-bottom[data-v-c5c54104]:after{content:"";position:absolute;width:0;border:1px #f5f5f5 solid;top:%?-200?%;bottom:%?56?%;left:50%;-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%);opacity:.8}.uni-popup-bottom[data-v-c5c54104],.uni-popup-top[data-v-c5c54104]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.uni-popup-top[data-v-c5c54104]{top:0;left:0;width:100%;height:%?100?%;line-height:%?100?%;text-align:center}.uni-popup-bottom[data-v-c5c54104]{left:0;bottom:0;width:100%;min-height:%?100?%;line-height:%?100?%;text-align:center}',""])},"9dd8":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"uni-mask",style:{top:t.offsetTop+"px"},on:{click:function(e){e=t.$handleEvent(e),t.hide(e)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),e=t.$handleEvent(e),t.moveHandle(e)}}}),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"uni-popup",class:"uni-popup-"+t.position+" uni-popup-"+t.mode},[t._v(t._s(t.msg)),t._t("default"),"middle"===t.position&&"insert"===t.mode?n("v-uni-view",{staticClass:" uni-icon uni-icon-close",class:{"uni-close-bottom":"bottom"===t.buttonMode,"uni-close-right":"right"===t.buttonMode},on:{click:function(e){e=t.$handleEvent(e),t.closeMask(e)}}}):t._e()],2)],1)},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},a0bd:function(t,e,n){var i=n("9791");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("75aca368",i,!0,{sourceMap:!1,shadowMode:!1})},e171:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"list-item userFace",on:{click:function(e){e=t.$handleEvent(e),t.userFaceClick(e)}}},[n("v-uni-view",{staticClass:"list-item-user"},[t._v("头像")]),n("v-uni-view",{staticClass:"list-item-face"},[n("v-uni-image",{attrs:{src:t.userFace}}),n("uni-icon",{attrs:{size:20,color:"#bbb",type:"arrowright"}})],1)],1),n("v-uni-view",{staticClass:"list-item userNick",on:{click:function(e){e=t.$handleEvent(e),t.userNickClick(e)}}},[n("v-uni-view",{staticClass:"list-item-user"},[t._v("昵称")]),n("v-uni-view",{staticClass:"list-item-nick"},[n("v-uni-text",[t._v(t._s(t.userNick))]),n("uni-icon",{attrs:{size:20,color:"#bbb",type:"arrowright"}})],1)],1),n("v-uni-view",{staticClass:"sign-out"},[n("v-uni-button",{staticClass:"signBtn",on:{click:function(e){e=t.$handleEvent(e),t.clear(e)}}},[t._v("退出登录")])],1),n("i-popup-toggle",{attrs:{show:t.showPopup,position:"bottom"},on:{hidePopup:function(e){e=t.$handleEvent(e),t.togglePopup("")}}},[n("v-uni-view",{staticClass:"popup-bottom"},[n("v-uni-view",{staticClass:"popup-bottom-content"},[n("v-uni-button",{staticClass:"previewImageFull",on:{click:function(e){e=t.$handleEvent(e),t.preview(t.userFace,t.userFace)}}},[t._v("查看大图")]),n("v-uni-button",{staticClass:"chooseImageCamera",on:{click:function(e){e=t.$handleEvent(e),t.chooseImageCamera(e)}}},[t._v("拍照换头像")]),n("v-uni-button",{staticClass:"chooseImageAlbum",on:{click:function(e){e=t.$handleEvent(e),t.chooseImageAlbum(e)}}},[t._v("从相册选择新头像")])],1),n("v-uni-view",{staticClass:"cancel"},[n("v-uni-button",{on:{click:function(e){e=t.$handleEvent(e),t.userFaceClick(e)}}},[t._v("取消")])],1)],1)],1)],1)},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})}}]);