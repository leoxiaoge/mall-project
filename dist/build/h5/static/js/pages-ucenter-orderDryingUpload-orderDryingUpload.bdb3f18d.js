(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ucenter-orderDryingUpload-orderDryingUpload"],{"121c":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,"uni-page-body[data-v-d3435164]{background-color:#fff}.list-cell[data-v-d3435164]{background-color:#fff}.teng-order-body[data-v-d3435164]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}.teng-order-list[data-v-d3435164]{margin:0 %?30?%;padding:%?20?% 0;border-bottom:%?2?% solid #f4f4f4}.teng-order-image[data-v-d3435164]{position:relative}.teng-order-image-src[data-v-d3435164]{width:%?200?%;height:%?200?%}.teng-order-show-status[data-v-d3435164]{position:absolute;left:0;top:0;width:%?100?%;height:%?100?%}.teng-order-text[data-v-d3435164]{width:100%;margin-left:%?20?%}.teng-order-title[data-v-d3435164]{padding:%?10?% 0}.teng-order-name[data-v-d3435164]{font-size:%?36?%;color:#757575;display:-webkit-box;overflow:hidden;line-height:1.5;-o-text-overflow:ellipsis;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:1}.teng-order-num[data-v-d3435164]{font-size:%?32?%;color:#757575;margin-left:%?20?%}.teng-order-placard-status[data-v-d3435164]{font-size:%?24?%;line-height:1.4;color:#fe7f00;border:%?2?% solid #fe7f00;border-radius:%?100?%;padding:%?2?% %?14?%}.teng-order-number[data-v-d3435164]{font-size:%?24?%;color:#909090;margin-top:%?10?%}.teng-order-msg[data-v-d3435164]{font-size:%?28?%}.teng-order-original[data-v-d3435164]{font-size:%?32?%;color:#fe7f00}.teng-order-status[data-v-d3435164]{font-size:%?28?%;color:#666}.textarea[data-v-d3435164]{margin:%?20?% %?30?%;border-bottom:%?2?% solid #f4f4f4}.common-submit[data-v-d3435164]{position:fixed;bottom:0;width:100%}.common-button[data-v-d3435164]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.common-button uni-button[data-v-d3435164]{height:%?98?%;line-height:%?98?%}.btn-reset[data-v-d3435164]{width:50%;color:#515151;background-color:#eee}.btn-submit[data-v-d3435164]{width:50%;color:#fff;background-color:#fe7f00}body.?%PAGE?%[data-v-d3435164]{background-color:#fff}",""])},"5df9":function(e,t,a){"use strict";var i=a("8767"),n=a.n(i);n.a},"6b91":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(a("e143")),n=a("c440"),o=a("5177"),s=r(a("73ba"));function r(e){return e&&e.__esModule?e:{default:e}}var l=i.default.extend({data:function(){return{chosen:"",order:[],productID:"",orderID:"",comment:"",commentPic:"",enableDel:!1,enableAdd:!1,enableDrag:!1,show:!0,limit:9,imageData:[],formData:{userId:2}}},components:{robbyImageUpload:s.default},onLoad:function(e){this.productID=e.productID,this.orderID=e.OrderID,this.getProduct(),console.log("onLoad",e)},onShareAppMessage:function(e){return(0,n.onShareAppMessage)(e)},methods:{getProduct:function(){var e=this,t=this.orderID,a={OrderID:t};(0,n.request)(o.OrderListGet,a).then(function(t){console.log(t),e.order=t.OrderList})},deleteImage:function(e){console.log(e),this.commentPic=e.allImages},addImage:function(e){console.log("addImage",e),this.commentPic=e.allImages},picUrlInput:function(e){this.commentPic=e},bindTextAreaBlur:function(e){console.log(e.detail.value),this.comment=e.detail.value},formSubmit:function(){console.log("提交数据");var e=this.orderID,t=this.comment,a=JSON.stringify(this.commentPic);if(console.log(a),t){var i={OrderID:e,Comment:t,CommentPic:a};(0,n.request)(o.OrderDrying,i).then(function(e){var t="提交晒单成功，点击确定返回订单中心！";(0,n.defaultShowModal)(t).then(function(e){console.log(e),e.confirm?(console.log("用户点击确定"),(0,n.navigateTo)("../../ucenter/orderList/orderList")):e.cancel&&console.log("用户点击取消")})})}else(0,n.showToast)("请填写晒单内容！")},formReset:function(){console.log("清空数据")}}});t.default=l},"73ba":function(e,t,a){"use strict";a.r(t);var i=a("cf7d"),n=a("d1b1");for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);a("f874");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"d9b2f234",null);t["default"]=r.exports},8767:function(e,t,a){var i=a("121c");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("41c806c1",i,!0,{sourceMap:!1,shadowMode:!1})},9723:function(e,t,a){var i=a("f0df");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("4077b5ec",i,!0,{sourceMap:!1,shadowMode:!1})},b6c7:function(e,t,a){"use strict";a.r(t);var i=a("d4c3"),n=a("ec53");for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);a("5df9");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"d3435164",null);t["default"]=r.exports},cf7d:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"imageUploadContainer"},[a("v-uni-view",{staticClass:"imageUploadList"},[e._l(e.value,function(t,i){return a("v-uni-view",{key:i,staticClass:"imageItem"},[a("v-uni-image",{class:{dragging:e.isDragging(i)},attrs:{src:t,draggable:"true","data-index":i},on:{touchstart:function(t){t=e.$handleEvent(t),e.start(t)},touchmove:function(t){t=e.$handleEvent(t),e.move(t)},touchend:function(t){t=e.$handleEvent(t),e.stop(t)},click:function(t){t=e.$handleEvent(t),e.previewImage(t)}}}),e.isShowDel?a("v-uni-view",{staticClass:"imageDel",attrs:{"data-index":i},on:{click:function(t){t=e.$handleEvent(t),e.deleteImage(t)}}},[e._v("x")]):e._e()],1)}),e.isShowAdd?a("v-uni-view",{staticClass:"imageUpload",on:{click:function(t){t=e.$handleEvent(t),e.selectImage(t)}}},[a("v-uni-view",{staticClass:"upload"},[a("img",{staticClass:"image-add",attrs:{src:e.imageUpload}}),a("v-uni-view",{staticClass:"image-upload-text"},[e._v("添加图片")])],1)],1):e._e()],2),e.showMoveImage?a("v-uni-image",{staticClass:"moveImage",style:{left:e.posMoveImageLeft,top:e.posMoveImageTop},attrs:{src:e.moveImagePath}}):e._e()],1)},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},d1b1:function(e,t,a){"use strict";a.r(t);var i=a("f6d0"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);t["default"]=n.a},d4c3:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container"},[a("v-uni-form",{on:{submit:function(t){t=e.$handleEvent(t),e.formSubmit(t)},reset:function(t){t=e.$handleEvent(t),e.formReset(t)}}},[a("v-uni-view",{staticClass:"order"},e._l(e.order,function(t,i){return a("v-uni-view",{key:i,staticClass:"list-cell view",attrs:{"hover-class":"uni-list-cell-hover"},on:{click:function(t){t=e.$handleEvent(t),e.bindClick(t)}}},[a("v-uni-view",{staticClass:"teng-order-list view"},[a("v-uni-view",{staticClass:"teng-order-body"},[a("v-uni-view",{staticClass:"teng-order-image"},[a("v-uni-image",{staticClass:"teng-order-image-src",attrs:{src:t.ProductPicList[0]}})],1),a("v-uni-view",{staticClass:"teng-order-text"},[a("v-uni-view",{staticClass:"teng-order-title teng-flex-between"},[a("v-uni-view",{staticClass:"teng-order-name"},[e._v(e._s(t.ProductName))]),a("v-uni-view",{staticClass:"teng-order-num"},[e._v("x1")])],1),a("v-uni-view",{staticClass:"teng-order-bodys"},[a("v-uni-text",{staticClass:"teng-order-placard-status"},[e._v(e._s(t.OrderTypeName))]),a("v-uni-view",{staticClass:"teng-order-number"},[e._v("订单编号："+e._s(t.OrderID))])],1),a("v-uni-view",{staticClass:"teng-order-footer teng-flex-between"},[t.OrderMoneys?a("v-uni-view",{staticClass:"teng-order-price"},[a("v-uni-text",{staticClass:"teng-order-msg"},[e._v("成交价：")]),a("v-uni-text",{staticClass:"teng-order-original"},[e._v("¥"+e._s(t.OrderMoneys))])],1):e._e(),a("v-uni-view",{staticClass:"teng-order-status"},[e._v(e._s(t.OrderStatusName))])],1)],1)],1)],1)],1)}),1),a("v-uni-view",{staticClass:"textarea"},[a("v-uni-textarea",{attrs:{placeholder:"说说你的喜悦心情吧！"},on:{blur:function(t){t=e.$handleEvent(t),e.bindTextAreaBlur(t)}}})],1),a("robby-image-upload",{attrs:{showUploadProgress:e.show,limit:e.limit,"form-data":e.formData},on:{delete:function(t){t=e.$handleEvent(t),e.deleteImage(t)},add:function(t){t=e.$handleEvent(t),e.addImage(t)},picUrlInput:function(t){t=e.$handleEvent(t),e.picUrlInput(t)}},model:{value:e.imageData,callback:function(t){e.imageData=t},expression:"imageData"}}),a("v-uni-view",{staticClass:"i-kong"}),a("v-uni-view",{staticClass:"common-submit"},[a("v-uni-view",{staticClass:"common-button"},[a("v-uni-button",{staticClass:"btn-reset",attrs:{formType:"reset"}},[e._v("重置")]),a("v-uni-button",{staticClass:"btn-submit",attrs:{formType:"submit"}},[e._v("提交")])],1)],1)],1)],1)},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},ec53:function(e,t,a){"use strict";a.r(t);var i=a("6b91"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);t["default"]=n.a},f0df:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".imageUploadContainer[data-v-d9b2f234]{padding:%?10?% %?5?%;margin:%?10?% %?5?%}.dragging[data-v-d9b2f234]{-webkit-transform:scale(1.2);-ms-transform:scale(1.2);transform:scale(1.2)}.imageUploadList[data-v-d9b2f234]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.imageItem[data-v-d9b2f234],.imageUpload[data-v-d9b2f234]{width:%?160?%;height:%?160?%;margin:%?10?%}.imageDel[data-v-d9b2f234]{position:relative;left:%?120?%;bottom:%?165?%;background-color:rgba(0,0,0,.5);width:%?36?%;text-align:center;line-height:%?35?%;border-radius:%?17?%;color:#fff;font-size:%?30?%;padding-bottom:%?2?%}.imageItem uni-image[data-v-d9b2f234],.moveImage[data-v-d9b2f234]{width:%?160?%;height:%?160?%;border-radius:%?8?%}.imageUpload[data-v-d9b2f234]{line-height:%?130?%;text-align:center;font-size:%?150?%;color:#d9d9d9;border:1px solid #d9d9d9;border-radius:%?8?%}.upload[data-v-d9b2f234]{padding:%?20?% 0}.image-add[data-v-d9b2f234]{width:%?48?%;height:%?48?%}.image-upload-text[data-v-d9b2f234]{font-size:%?24?%;color:#b0b0b0}.moveImage[data-v-d9b2f234]{position:absolute}",""])},f6d0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,n=a("c440"),o=a("5177"),s={name:"robby-image-upload",props:["value","enableDel","enableAdd","enableDrag","formData","limit","fileKeyName","showUploadProgress"],data:function(){return{imageBasePos:{x0:-1,y0:-1,w:-1,h:-1},showMoveImage:!1,moveImagePath:"",moveLeft:0,moveTop:0,deltaLeft:0,deltaTop:0,dragIndex:null,targetImageIndex:null,picUrl:[],imageUpload:"/static/icon/icon_image_upload.png"}},computed:{posMoveImageLeft:function(){return this.moveLeft+"px"},posMoveImageTop:function(){return this.moveTop+"px"},isShowDel:function(){return!1!==this.enableDel},isShowAdd:function(){return!1!==this.enableAdd&&!(this.limit&&this.value.length>=this.limit)},isDragable:function(){return!1!==this.enableDrag}},methods:{selectImage:function(){i=this,i.value||(i.value=[]),uni.chooseImage({count:i.limit?i.limit-i.value.length:999,success:function(e){var t=e.tempFilePaths;if(i.limit){var a=i.limit-i.value.length;if(a<t.length){var o="图片总数限制为".concat(i.limit,"张，当前还可以选").concat(a,"张");return void(0,n.showToast)(o)}}console.log(t),t.forEach(function(e){i.uploadImage(e)});for(var s=0;s<t.length;s++)i.value.push(t[s])}})},uploadImage:function(e){var t=this,a={};(0,n.upload)(o.OrderDryingUpload,a,e).then(function(e){console.log(e);var a=JSON.parse(e);console.log(a.PicUrl),console.log(i.picUrl);var n=a.PicUrl;console.log(i.picUrl,n),i.picUrl=i.picUrl.concat(a.PicUrl),t.$emit("add",{currentImage:n,allImages:i.picUrl})})},deleteImage:function(e){var t=e.currentTarget.dataset.index,a=this.value[t];this.value.splice(t,1),this.picUrl.splice(t,1),this.$emit("delete",{currentImage:a,allImages:this.picUrl}),this.$emit("input",this.value)},previewImage:function(e){var t=e.currentTarget.dataset.index;uni.previewImage({current:this.value[t],indicator:"number",loop:"true",urls:this.value})},initImageBasePos:function(){var e=.024;i=this,uni.getSystemInfo({success:function(t){var a=t.screenWidth,n=Math.ceil(e*a),o=Math.ceil((a-2*n)/4);i.imageBasePos.x0=n,i.imageBasePos.w=o,i.imageBasePos.h=o}})},findOverlapImage:function(e,t){var a=Math.floor((e-this.imageBasePos.x0)/this.imageBasePos.w),i=Math.floor((t-this.imageBasePos.y0)/this.imageBasePos.h),n=4*i+a;return n},isDragging:function(e){return this.dragIndex===e},start:function(e){if(this.isDragable){if(this.dragIndex=e.currentTarget.dataset.index,this.moveImagePath=this.value[this.dragIndex],this.movePicImagePath=this.picUrl[this.dragIndex],this.showMoveImage=!0,-1===this.imageBasePos.y0){this.initImageBasePos();var t=Math.floor(this.dragIndex/4)*this.imageBasePos.h,a=e.currentTarget.offsetTop;this.imageBasePos.y0=a-t}this.moveLeft=e.target.offsetLeft,this.moveTop=e.target.offsetTop}},move:function(e){if(this.isDragable){var t=e.touches[0];this.targetImageIndex=this.findOverlapImage(t.clientX,t.clientY),0===this.deltaLeft&&(this.deltaLeft=t.clientX-this.moveLeft,this.deltaTop=t.clientY-this.moveTop),this.moveLeft=t.clientX-this.deltaLeft,this.moveTop=t.clientY-this.deltaTop}},stop:function(e){this.isDragable&&(null!==this.dragIndex&&null!==this.targetImageIndex&&(this.targetImageIndex<0&&(this.targetImageIndex=0),this.targetImageIndex>=this.value.length&&(this.targetImageIndex=this.value.length-1),this.dragIndex!==this.targetImageIndex&&(this.value[this.dragIndex]=this.value[this.targetImageIndex],this.value[this.targetImageIndex]=this.moveImagePath,this.picUrl[this.dragIndex]=this.picUrl[this.targetImageIndex],this.picUrl[this.targetImageIndex]=this.movePicImagePath)),this.dragIndex=null,this.targetImageIndex=null,this.deltaLeft=0,this.deltaTop=0,this.showMoveImage=!1,console.log(this.value),console.log(this.picUrl),this.$emit("input",this.value),this.$emit("picUrlInput",this.picUrl))}}};t.default=s},f874:function(e,t,a){"use strict";var i=a("9723"),n=a.n(i);n.a}}]);