(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mall-exchangeDetails-exchangeDetails"],{1591:function(e,t,n){var s=n("f2a7");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var a=n("4f06").default;a("4c423cf2",s,!0,{sourceMap:!1,shadowMode:!1})},"47d4":function(e,t,n){"use strict";n.r(t);var s=n("b8a9"),a=n.n(s);for(var i in s)"default"!==i&&function(e){n.d(t,e,function(){return s[e]})}(i);t["default"]=a.a},"4cad":function(e,t,n){"use strict";var s=n("1591"),a=n.n(s);a.a},"7e19":function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"parse"},[n("uParse",{attrs:{content:e.article},on:{preview:function(t){t=e.$handleEvent(t),e.preview(t)},navigate:function(t){t=e.$handleEvent(t),e.navigate(t)}}})],1),n("v-uni-view",{staticClass:"i-kong"}),n("v-uni-view",{staticClass:"mask-show",class:e.show?"show":"hide"},[n("v-uni-view",{staticClass:"mask",on:{click:function(t){t=e.$handleEvent(t),e.hide(t)},touchmove:function(t){t.stopPropagation(),t.preventDefault(),t=e.$handleEvent(t),e.moveHandle(t)}}}),n("v-uni-view",{staticClass:"exchange"},[e.show?e._e():n("v-uni-view",{staticClass:"exchange-now"},[n("v-uni-button",{staticClass:"btn exchange-btn",on:{click:function(t){t=e.$handleEvent(t),e.isShow(t)}}},[e._v("马上兑换")])],1),n("v-uni-view",{staticClass:"exchange-model mask-content"},[n("v-uni-view",{staticClass:"exchange-model-head"},[n("v-uni-text",[e._v("订单信息确认")])],1),n("v-uni-view",{staticClass:"exchange-model-address",on:{click:function(t){t=e.$handleEvent(t),e.addressClick(t)}}},[e.address?n("v-uni-view",{staticClass:"exchange-model-address-body"},[n("v-uni-view",{staticClass:"exchange-model-address-user"},[n("v-uni-text",[e._v(e._s(e.address.realName))]),n("v-uni-text",{staticClass:"exchange-model-mobile"},[e._v(e._s(e.address.Mobile))])],1),n("v-uni-view",{staticClass:"exchange-model-address-list"},[n("v-uni-text",[e._v(e._s(e.address.Province))]),n("v-uni-text",[e._v(e._s(e.address.City))]),n("v-uni-text",[e._v(e._s(e.address.Area))]),n("v-uni-text",[e._v(e._s(e.address.Address))])],1)],1):n("v-uni-view",{staticClass:"exchange-model-address-body"},[n("v-uni-text",[e._v("请填写地址")])],1),n("v-uni-view",{staticClass:"exchange-model-arrow uni-icon uni-icon-arrowright"})],1),n("v-uni-view",{staticClass:"exchange-model-integrals"},[e.userInfo?n("v-uni-view",{staticClass:"exchange-model-remaining-integrals"},[n("v-uni-text",[e._v("剩余积分：")]),n("v-uni-text",[e._v(e._s(e.userInfo.SeqIntegrals))]),n("v-uni-text",[e._v("分")])],1):e._e(),e.integrals?n("v-uni-view",{staticClass:"exchange-model-need-integrals"},[n("v-uni-text",[e._v("所需积分：")]),n("v-uni-text",[e._v(e._s(e.integrals))]),n("v-uni-text",[e._v("分")])],1):e._e()],1),n("v-uni-view",{staticClass:"exchange-submit"},[n("v-uni-button",{staticClass:"submitBtn",on:{click:function(t){t=e.$handleEvent(t),e.exchangeSubmit(t)}}},[e._v("确认订单")])],1)],1)],1)],1)],1)},a=[];n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a})},b8a9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=c(n("a34a")),a=c(n("e143")),i=n("c440"),o=n("5177"),r=c(n("5f49"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,s,a,i,o){try{var r=e[i](o),c=r.value}catch(d){return void n(d)}r.done?t(c):Promise.resolve(c).then(s,a)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(s,a){var i=e.apply(t,n);function o(e){d(i,s,a,o,r,"next",e)}function r(e){d(i,s,a,o,r,"throw",e)}o(void 0)})}}var l=a.default.extend({components:{uParse:r.default},data:function(){return{exchangeID:"",productID:"",addressID:"",article:"",integrals:"",userInfo:"",address:"",show:!1}},onLoad:function(e){this.exchangeID=e.exchangeID,this.productID=e.productID,this.integrals=e.integrals},onShow:function(){this.getProduct()},onPullDownRefresh:function(){this.getProduct()},onShareAppMessage:function(e){return(0,i.onShareAppMessage)(e)},methods:{getProduct:function(){var e=u(s.default.mark(function e(){var t,n,a,r,c,d=this;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.productID,n={ProductID:t},(0,i.request)(o.ProductGet,n).then(function(e){d.article=e.Product.ProductDesc}),a=uni.getStorageSync("addressID"),e.next=6,this.getLoginUser();case 6:return r=e.sent,this.userInfo=r,e.next=10,this.getUserAddressList();case 10:c=e.sent,this.address=c,c&&(this.addressID=c.ID),a&&(this.addressID=a);case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),preview:function(e,t){console.log("src: "+e)},navigate:function(e,t){(0,i.showModal)("点击链接为："+e)},isShow:function(){this.show=!0},getLoginUser:function(){return new Promise(function(e,t){var n={};(0,i.request)(o.GetLoginUser,n).then(function(t){uni.setStorageSync("UserInfo",t.UserInfo),e(t.UserInfo)})})},getUserAddressList:function(){var e=this;return new Promise(function(t,n){var s=e.addressID,a={AddressID:s};(0,i.request)(o.UserAddressListGet,a).then(function(e){console.log(e.AddressList);var n=e.AddressList;n.map(function(e){console.log(e),1===e.IsDefault&&t(e)})})})},exchangeSubmit:function(){var e=this,t=this.exchangeID,n=this.addressID;if(!n){var s="你还没有默认地址，请点击确定去填写地址信息！";(0,i.defaultShowModal)(s).then(function(e){e.confirm?(console.log("用户点击确定"),(0,i.navigateTo)("../../ucenter/addressShipping/addressShipping")):e.cancel&&console.log("用户点击取消")})}var a={ExchangeID:t,AddressID:n};(0,i.request)(o.OrderExchangeSubmit,a).then(function(t){e.show=!1;var n="兑换成功，请点击确定查看订单！";(0,i.defaultShowModal)(n).then(function(e){if(e.confirm){console.log("用户点击确定");var t="-1";(0,i.navigateTo)("../../ucenter/orderList/orderList?status="+t)}else e.cancel&&console.log("用户点击取消")})})},hide:function(){this.show=!1},moveHandle:function(){this.show=!1},addressClick:function(){(0,i.navigateTo)("../../ucenter/addressShipping/addressShipping")}}});t.default=l},c4b6:function(e,t,n){"use strict";n.r(t);var s=n("7e19"),a=n("47d4");for(var i in a)"default"!==i&&function(e){n.d(t,e,function(){return a[e]})}(i);n("4cad");var o=n("2877"),r=Object(o["a"])(a["default"],s["a"],s["b"],!1,null,"4bf672c7",null);t["default"]=r.exports},f2a7:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".mask[data-v-4bf672c7]{position:fixed;top:0;left:0;right:0;bottom:0;z-index:10;background:rgba(0,0,0,.3);display:none;z-index:998}.mask-content[data-v-4bf672c7]{position:fixed;left:0;bottom:0;width:100%;background-color:#fff;-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%);-webkit-transition:all .4s ease;-o-transition:all .4s ease;transition:all .4s ease;z-index:999}.show .mask-content[data-v-4bf672c7]{-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)}.show .mask[data-v-4bf672c7]{display:block}.exchange[data-v-4bf672c7]{position:fixed;bottom:0;width:100%;z-index:999}.exchange-btn[data-v-4bf672c7]{color:#fff;background-color:#fe7f00}.exchange-model[data-v-4bf672c7]{background-color:#fff}.exchange-model-head[data-v-4bf672c7]{font-size:%?32?%;color:#767676;text-align:center;padding:%?20?% 0}.exchange-model-address[data-v-4bf672c7]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-top:%?2?% solid #f4f4f4;border-bottom:%?2?% solid #f4f4f4;padding:%?20?% %?30?%}.exchange-model-address-user uni-text[data-v-4bf672c7]{font-size:%?32?%}.exchange-model-mobile[data-v-4bf672c7]{margin-left:%?60?%}.exchange-model-integrals[data-v-4bf672c7]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:%?20?% %?30?%}.exchange-model-need-integrals uni-text[data-v-4bf672c7]{color:#fe7f00}.exchange-submit[data-v-4bf672c7]{padding:%?20?% %?30?%}.submitBtn[data-v-4bf672c7]{line-height:%?80?%;color:#fff;background-color:#fe7f00;border-radius:%?100?%}",""])}}]);