(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ucenter-login-login"],{"0124":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"i-header-logo"},[n("v-uni-image",{attrs:{src:e.logo}})],1),n("v-uni-view",{staticClass:"i-login-mobile i-border-bottom i-flex-between"},[n("v-uni-view",{staticClass:"i-login-content i-flex"},[n("v-uni-image",{staticClass:"i-login-mobile-image"}),n("v-uni-input",{staticClass:"i-login-mobile-input",attrs:{type:"number",focus:e.focus,value:e.Mobile,placeholder:"请输入手机号码"},on:{input:function(t){t=e.$handleEvent(t),e.mobileInput(t)}}})],1),n("v-uni-view",{staticClass:"i-login-set-code"},[n("v-uni-button",{staticClass:"i-button-get",attrs:{disabled:e.disabled},on:{click:function(t){t=e.$handleEvent(t),e.getCode(t)}}},[e._v(e._s(e.time))])],1)],1),n("v-uni-view",{staticClass:"i-login-code i-border-bottom"},[n("v-uni-view",{staticClass:"i-login-content i-flex"},[n("v-uni-image",{staticClass:"i-login-code-image"}),n("v-uni-input",{staticClass:"i-login-code-input",attrs:{type:"number",value:e.LoginCode,placeholder:"验证码"},on:{input:function(t){t=e.$handleEvent(t),e.codeInput(t)}}})],1)],1),n("v-uni-view",{staticClass:"i-login-radio"},[n("v-uni-radio-group",{attrs:{name:"radio"}},[n("v-uni-label",{staticClass:"radio"},[n("v-uni-radio",{attrs:{checked:e.checked,color:e.color},on:{click:function(t){t.stopPropagation(),t.preventDefault(),t=e.$handleEvent(t),e.radioClick(t)}}})],1),n("v-uni-text",{staticClass:"protocol-agree"},[e._v("我已阅读并同意")]),n("v-uni-text",{staticClass:"protocol-text",on:{click:function(t){t=e.$handleEvent(t),e.protocol(t)}}},[e._v("《腾拍商场购物协议》")])],1)],1),n("v-uni-view",{staticClass:"i-login-button-view"},[n("v-uni-button",{staticClass:"btn i-login-button",attrs:{loading:e.loading,disabled:!e.checked},on:{click:function(t){t=e.$handleEvent(t),e.userLogin(t)}}},[e._v("登录")])],1)],1)},o=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o})},"0e3f":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,'uni-page-body[data-v-685e0428]{background-color:#fff}.i-header-logo[data-v-685e0428]{padding:%?80?% 0 %?80?% 0;text-align:center}.i-header-logo uni-image[data-v-685e0428]{width:%?180?%;height:%?180?%}.i-border-bottom[data-v-685e0428]{border-bottom:%?2?% solid #f4f4f4}.i-login-mobile[data-v-685e0428]{margin:0 %?60?%;padding:%?20?% 0}.i-login-code[data-v-685e0428]{margin:0 %?60?%;padding:%?20?% 0}.i-login-mobile-image[data-v-685e0428]{background:url(https://api.tengpaisc.com/Resources/images/icon_login_mobile.png) 50% no-repeat;background-size:100%;width:%?36?%;height:%?52?%}.i-login-code-image[data-v-685e0428]{background:url(https://api.tengpaisc.com/Resources/images/icon_login_code.png) 50% no-repeat;background-size:100%;width:%?36?%;height:%?52?%}.i-login-mobile-input[data-v-685e0428]{margin-left:%?20?%}.i-login-code-input[data-v-685e0428]{margin-left:%?20?%}.i-login-radio[data-v-685e0428]{margin:0 %?60?%;padding:%?20?% 0}.radio[data-v-685e0428]{padding:0}.protocol-agree[data-v-685e0428]{margin-left:%?10?%}.protocol-text[data-v-685e0428]{color:#fe7f00}.i-button-get[data-v-685e0428]{background-color:#fff;font-size:%?32?%;color:#fe7f00}uni-button[data-v-685e0428]:after{content:" ";width:200%;height:200%;position:absolute;top:0;left:0;border:none;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:10px}uni-button[disabled][data-v-685e0428]:not([type]),uni-button[disabled][type=default][data-v-685e0428]{color:rgba(0,0,0,.3);background-color:#f4f4f4}.i-login-button[data-v-685e0428]{font-size:%?32?%;line-height:%?80?%;width:80%;color:#fff;background-color:#fe7f00;border-radius:%?100?%;margin-top:%?40?%}body.?%PAGE?%[data-v-685e0428]{background-color:#fff}',""])},"15e5":function(e,t,n){var i=n("0e3f");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("5891f316",i,!0,{sourceMap:!1,shadowMode:!1})},"17c0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(n("a34a")),o=u(n("e143")),a=n("2f62"),r=n("c440"),s=n("5177"),c=u(n("f0ab"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,i,o,a,r){try{var s=e[a](r),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(i,o)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function r(e){l(a,i,o,r,s,"next",e)}function s(e){l(a,i,o,r,s,"throw",e)}r(void 0)})}}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=o.default.extend({components:{uniIcon:c.default},computed:g({},(0,a.mapState)(["hasLogin"])),data:function(){return{wxFace:"",wxNick:"",refUserID:"",logo:"/static/icon/icon_login.png",checked:!0,color:"#fe7f00",focus:!0,Mobile:"",LoginCode:"",loading:!1,time:"获取验证码",currentTime:60,disabled:!1,interval:""}},onLoad:function(e){},onUnload:function(){var e=this.interval;clearInterval(e)},onShareAppMessage:function(e){return(0,r.onShareAppMessage)(e)},methods:g({},(0,a.mapMutations)(["login"]),{getProvider:function(){return new Promise(function(e,t){uni.getProvider({service:"oauth",success:function(t){e(t.provider)}})})},login:function(){var e=d(i.default.mark(function e(){var t;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:return t=e.sent,e.abrupt("return",new Promise(function(e,n){~t.indexOf("weixin")&&uni.login({provider:"weixin",success:function(t){var n=t.code;console.log(n);var i={JSCode:n};(0,r.request)(s.GetWXOpenID,i).then(function(t){e(t.OpenID)})}})}));case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),mobileInput:function(e){this.Mobile=e.detail.value},codeInput:function(e){this.LoginCode=e.detail.value},getCode:function(e){var t=this,n=this.Mobile;if(n){this.getLoginCode();var i=this.currentTime;this.time=i+"s后可重发",this.disabled=!0;var o=setInterval(function(){t.time=i-1+"s后可重发",i--,i<=0&&(clearInterval(o),t.time="重新获取",t.currentTime=60,t.disabled=!1)},1e3);this.interval=o}else(0,r.showToast)("手机号码不能为空！")},getLoginCode:function(){var e=this.Mobile,t={Mobile:e};(0,r.request)(s.GetLoginCode,t).then(function(e){console.log(e),(0,r.showToast)("发送成功！")})},radioClick:function(){this.checked=!this.checked},wxLogin:function(){var e=d(i.default.mark(function e(t){var n,o;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),n=t.detail.userInfo,this.wxFace=n.avatarUrl,this.wxNick=n.nickName,e.next=6,this.login();case 6:o=e.sent,uni.setStorageSync("OpenID",o),this.userLogin();case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),userLogin:function(){var e=d(i.default.mark(function e(){var t,n,o,a,c,u,l=this;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.Mobile,n=this.LoginCode,o=this.wxFace,a=encodeURIComponent(this.wxNick),c=this.refUserID,uni.getStorageSync("scene")&&(c=uni.getStorageSync("scene")),t){e.next=9;break}return(0,r.showToast)("手机号码不能为空！"),e.abrupt("return");case 9:if(n){e.next=12;break}return(0,r.showToast)("验证码不能为空！"),e.abrupt("return");case 12:this.loading=!0,u={Mobile:t,LoginCode:n,wxFace:o,wxNick:a,RefUserID:c},(0,r.request)(s.UserLogin,u).then(function(e){l.loading=!1;var t=e.SessionKey,n=e.UserInfo;uni.setStorageSync("SessionKey",t),uni.setStorageSync("UserInfo",n),(0,r.showToast)("登录成功！"),(0,r.navigateBack)(1)});case 15:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getuserinfo:function(e){console.log(e)},protocol:function(){(0,r.navigateTo)("../protocol/protocol")}})});t.default=p},"2a5f":function(e,t,n){"use strict";var i=n("15e5"),o=n.n(i);o.a},7461:function(e,t,n){"use strict";n.r(t);var i=n("0124"),o=n("d753");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("2a5f");var r=n("2877"),s=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,"685e0428",null);t["default"]=s.exports},d753:function(e,t,n){"use strict";n.r(t);var i=n("17c0"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);t["default"]=o.a}}]);