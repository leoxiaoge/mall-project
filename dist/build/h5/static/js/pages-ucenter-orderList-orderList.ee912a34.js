(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ucenter-orderList-orderList"],{"03c9":function(t,e,n){var r=n("61ed");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("4f06").default;i("2ef49cae",r,!0,{sourceMap:!1,shadowMode:!1})},"2a64":function(t,e,n){"use strict";var r=n("a9ad"),i=n.n(r);i.a},"2ed0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=d(n("a34a")),i=d(n("e143")),a=n("c440"),o=n("5177"),s=d(n("3e72")),c=d(n("cc87"));function d(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(d){return void n(d)}s.done?e(c):Promise.resolve(c).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){u(a,r,i,o,s,"next",t)}function s(t){u(a,r,i,o,s,"throw",t)}o(void 0)}))}}var f=i.default.extend({components:{MescrollUni:s.default,mediaList:c.default},data:function(){return{current:"",OrderStatus:"",orderList:[],productID:"",orderID:"",PayTypeID:1,tabBars:[{name:"全部",id:0,status:"-1"},{name:"待填地址",id:1,status:"0"},{name:"待付款",id:2,status:"1"},{name:"待发货",id:3,status:"2"},{name:"待收货",id:4,status:"3"},{name:"待晒单",id:5,status:"4"}],mescroll:null}},onLoad:function(t){console.log(t);var e=t.status;this.current=e,this.OrderStatus=e},onShow:function(){if(this.mescroll){var t=this.mescroll;this.downCallback(t)}},onShareAppMessage:function(t){return(0,a.onShareAppMessage)(t)},methods:{tapTab:function(t){this.current=t;var e=this.mescroll;this.downCallback(e)},downCallback:function(t){this.mescroll=t,t.resetUpScroll()},upCallback:function(t){var e=this;this.getListDataFromNet(t.num,t.size,(function(n){t.endSuccess(n.length),1==t.num&&(e.orderList=[]),e.orderList=e.orderList.concat(n),console.log("orderList",n,e.orderList)}),(function(){t.endErr()}))},getListDataFromNet:function(){var t=l(r.default.mark((function t(e,n,i,a){var o;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getOrderList(e,n);case 3:o=t.sent,i&&i(o),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),a&&a();case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e,n,r,i){return t.apply(this,arguments)}return e}(),getOrderList:function(t,e){var n=this;return new Promise((function(r,i){var s=n.current;if("-1"==s){var c={PageID:t,PageSize:e};(0,a.request)(o.OrderListGet,c).then((function(t){r(t.OrderList)})).catch((function(t){var e=n.mescroll;e.endErr()}))}else{var d={OrderStatus:s,PageID:t,PageSize:e};(0,a.request)(o.OrderListGet,d).then((function(t){r(t.OrderList)})).catch((function(t){var e=n.mescroll;e.endErr()}))}}))},order:function(t){this.orderID=t},product:function(t){this.productID=t},action:function(){var t=l(r.default.mark((function t(e){var n,i,o,s,c;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("action",e),t.t0=e,t.next="填写地址"===t.t0?4:"确认收货"===t.t0?9:"去支付"===t.t0?15:"晒单"===t.t0?17:19;break;case 4:return n=this.productID,i=!0,o=this.orderID,(0,a.navigateTo)("../addressShipping/addressShipping?disabled="+i+"&orderID="+o+"&productID="+n),t.abrupt("break",19);case 9:return t.next=11,this.orderConfirmReceiving();case 11:return s=t.sent,c=this.mescroll,s.IsError?(0,a.showToast)(s.ErrMsg):((0,a.showToast)("确认收货成功！"),this.downCallback(c)),t.abrupt("break",19);case 15:return this.payment(),t.abrupt("break",19);case 17:return(0,a.navigateTo)("../orderDryingUpload/orderDryingUpload?id="+this.orderID+"&OrderID="+this.orderID),t.abrupt("break",19);case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goDetail:function(t){console.log(t),(0,a.navigateTo)("../orderDetail/orderDetail?productID="+t.ID+"&OrderID="+t.OrderID)},goOrderDrying:function(t){console.log(t),(0,a.navigateTo)("../orderDryingUpload/orderDryingUpload?productID="+t.ID+"&OrderID="+t.OrderID)},orderConfirmReceiving:function(){var t=this;return new Promise((function(e,n){var r=t.orderID,i={OrderID:r};(0,a.request)(o.OrderConfirmReceiving,i).then((function(t){e(t),console.log(t)}))}))},payment:function(){var t=l(r.default.mark((function t(){var e,n,i,o;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.payMoneySubmit();case 2:e=t.sent,n=JSON.parse(e),i=this.productID,o=this.orderID,uni.requestPayment({timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:"MD5",paySign:n.paySign,success:function(){(0,a.showToast)("支付成功！!"),(0,a.navigateTo)("../orderDetail/orderDetail?productID="+i+"&OrderID="+o)},fail:function(){(0,a.showModal)("支付失败，用户取消支付!")}});case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),payMoneySubmit:function(){var t=l(r.default.mark((function t(){var e,n,i,s;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$store.state,n=e.openid,i=this.orderID,s=this.PayTypeID,t.abrupt("return",new Promise((function(t,e){var r={OrderID:i,PayTypeID:s,OpenID:n};(0,a.request)(o.OrderPay,r).then((function(e){console.log(e),t(e.PayParam)}))})));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}});e.default=f},"30d5":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-scroll-view",{staticClass:"i-swiper-tab",attrs:{id:"tab-bar","scroll-x":""}},t._l(t.tabBars,(function(e,r){return n("v-uni-view",{key:r,staticClass:"swiper-tab-list product-item",class:t.current===e.status?"active":"",on:{click:function(n){n=t.$handleEvent(n),t.tapTab(e.status)}}},[n("v-uni-view",{staticClass:"name"},[t._v(t._s(e.name))]),n("v-uni-view",{staticClass:"line"})],1)})),1),n("mescroll-uni",{attrs:{top:"100"},on:{down:function(e){e=t.$handleEvent(e),t.downCallback(e)},up:function(e){e=t.$handleEvent(e),t.upCallback(e)}}},[t._l(t.orderList,(function(e,r){return[n("media-list",{key:r+"_0",attrs:{options:e},on:{click:function(n){n=t.$handleEvent(n),t.goDetail(e)},action:function(e){e=t.$handleEvent(e),t.action(e)},order:function(e){e=t.$handleEvent(e),t.order(e)},product:function(e){e=t.$handleEvent(e),t.product(e)}}})]}))],2)],1)},i=[];n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}))},4528:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"list-cell view",attrs:{"hover-class":"uni-list-cell-hover"}},[n("v-uni-view",{staticClass:"teng-order-list view"},[n("v-uni-view",{staticClass:"teng-order-body teng-flex",on:{click:function(e){e=t.$handleEvent(e),t.bindClick(e)}}},[n("v-uni-view",{staticClass:"teng-order-image"},[n("v-uni-image",{staticClass:"teng-order-image-src",attrs:{src:t.options.ProductPicList[0]}}),t.showStatus?n("v-uni-image",{staticClass:"teng-order-show-status",attrs:{src:t.status}}):t._e()],1),n("v-uni-view",{staticClass:"teng-order-text"},[n("v-uni-view",{staticClass:"teng-order-title teng-flex-between"},[n("v-uni-view",{staticClass:"teng-order-name"},[t._v(t._s(t.options.ProductName))]),n("v-uni-view",{staticClass:"teng-order-num"},[t._v("x1")])],1),n("v-uni-view",{staticClass:"teng-order-bodys"},[n("v-uni-text",{staticClass:"teng-order-placard-status"},[t._v(t._s(t.options.OrderTypeName))]),n("v-uni-view",{staticClass:"teng-order-number"},[t._v("订单编号："+t._s(t.options.OrderID))])],1),n("v-uni-view",{staticClass:"teng-order-footer teng-flex-between"},[n("v-uni-view",{staticClass:"teng-order-price"},[n("v-uni-text",{staticClass:"teng-order-msg"},[t._v("成交价：")]),n("v-uni-text",{staticClass:"teng-order-original"},[t._v(t._s(t.options.OrderMoneys))])],1),n("v-uni-view",{staticClass:"teng-order-status"},[t._v(t._s(t.options.OrderStatusName))])],1)],1)],1),n("v-uni-view",{staticClass:"i-order-footer"},t._l(t.options.ActionButtons,(function(e,r){return n("v-uni-view",{key:r,staticClass:"teng-order-button teng-flex-end"},[n("v-uni-button",{staticClass:"btn",on:{click:function(n){n=t.$handleEvent(n),t.actionButton(t.options.OrderID,t.options.ID,e.btn)}}},[t._v(t._s(e.btn))])],1)})),1)],1)],1)],1)},i=[];n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}))},"4f4d":function(t,e,n){"use strict";n.r(e);var r=n("30d5"),i=n("d54b");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("2a64");var o=n("2877"),s=Object(o["a"])(i["default"],r["a"],r["b"],!1,null,"655e8020",null);e["default"]=s.exports},"61ed":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"uni-page-body[data-v-583b929e]{width:100%;height:100%}.view[data-v-583b929e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:border-box;box-sizing:border-box}.list-cell[data-v-583b929e]{background-color:#fff}.teng-order-list[data-v-583b929e]{margin:0 %?30?%;padding:%?20?% 0;border-bottom:%?2?% solid #f4f4f4}.teng-order-image[data-v-583b929e]{position:relative}.teng-order-image-src[data-v-583b929e]{width:%?200?%;height:%?200?%}.teng-order-show-status[data-v-583b929e]{position:absolute;left:0;top:0;width:%?100?%;height:%?100?%}.teng-order-text[data-v-583b929e]{width:100%;margin-left:%?20?%}.teng-order-name[data-v-583b929e]{font-size:%?36?%;color:#757575;display:-webkit-box;overflow:hidden;line-height:1.8;-o-text-overflow:ellipsis;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:1}.teng-order-num[data-v-583b929e]{font-size:%?32?%;color:#757575;margin-left:%?20?%}.teng-order-placard-status[data-v-583b929e]{font-size:%?24?%;line-height:1.4;color:#fe7f00;border:%?2?% solid #fe7f00;border-radius:%?100?%;padding:%?2?% %?14?%}.teng-order-number[data-v-583b929e]{font-size:%?24?%;line-height:1.8;color:#909090}.teng-order-msg[data-v-583b929e]{font-size:%?28?%}.teng-order-original[data-v-583b929e]{font-size:%?32?%;color:#fe7f00}.teng-order-status[data-v-583b929e]{font-size:%?28?%;color:#666}.i-order-footer[data-v-583b929e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.teng-order-button[data-v-583b929e]{margin:%?10?% 0 0 %?10?%}.teng-order-button uni-button[data-v-583b929e]{font-size:%?28?%;line-height:1.4;color:#fe7f00;background-color:#fff;border:%?2?% solid #fe7f00;border-radius:%?100?%;margin:0;padding:%?4?% %?14?%}",""])},"8a29":function(t,e,n){"use strict";var r=n("03c9"),i=n.n(r);i.a},"93f3":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={props:{options:{type:Object,default:function(){return{}}},showStatus:{type:Boolean,default:!1}},data:function(){return{status:"/static/icon/icon_done.png"}},methods:{close:function(t){this.$emit("close")},bindClick:function(){this.$emit("click")},actionButton:function(t,e,n){this.$emit("order",t),this.$emit("product",e),this.$emit("action",n)}}};e.default=r},a9ad:function(t,e,n){var r=n("bfd8");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("4f06").default;i("77b179bc",r,!0,{sourceMap:!1,shadowMode:!1})},bfd8:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"uni-page-body[data-v-655e8020]{width:100%;height:100%}.content[data-v-655e8020]{width:100%;height:100%}.swiper[data-v-655e8020]{-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;height:100%;overflow:scroll}.product-item[data-v-655e8020]{position:relative;display:inline-block;overflow:hidden;height:%?98?%;line-height:%?98?%}.product-item .name[data-v-655e8020]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-weight:600}.active .name[data-v-655e8020]{color:#fe7f00}.active .line[data-v-655e8020]{position:absolute;bottom:0;left:50%;-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%);width:%?100?%;height:%?6?%;background-color:#fe7f00;border-radius:%?8?%}.i-tab-bar-loading[data-v-655e8020]{text-align:center;font-size:%?28?%;color:#999}.i-swiper-tab[data-v-655e8020]{white-space:nowrap;height:%?98?%;line-height:%?98?%;background-color:#fff;border-bottom:%?2?% solid #f4f4f4}.scroll-view-list[data-v-655e8020]{width:100%;height:100%}",""])},cc87:function(t,e,n){"use strict";n.r(e);var r=n("4528"),i=n("de8f");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("8a29");var o=n("2877"),s=Object(o["a"])(i["default"],r["a"],r["b"],!1,null,"583b929e",null);e["default"]=s.exports},d54b:function(t,e,n){"use strict";n.r(e);var r=n("2ed0"),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=i.a},de8f:function(t,e,n){"use strict";n.r(e);var r=n("93f3"),i=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=i.a}}]);