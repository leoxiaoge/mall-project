(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ucenter/setting/setting"],{"087d":function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=c(o("a34a")),s=o("c440"),u=o("5177");function c(e){return e&&e.__esModule?e:{default:e}}function a(e,n,o,t,s,u,c){try{var a=e[u](c),i=a.value}catch(r){return void o(r)}a.done?n(i):Promise.resolve(i).then(t,s)}function i(e){return function(){var n=this,o=arguments;return new Promise(function(t,s){var u=e.apply(n,o);function c(e){a(u,t,s,c,i,"next",e)}function i(e){a(u,t,s,c,i,"throw",e)}c(void 0)})}}var r=function(){return o.e("components/uni-icon/uni-icon").then(o.bind(null,"f0ab"))},l=function(){return o.e("components/i-popup-toggle/i-popup-toggle").then(o.bind(null,"6cc9"))},f={components:{uniIcon:r,iPopupToggle:l},data:function(){return{userInfo:"",userNick:"",userFace:"",imageSrc:"",showPopup:!1}},onLoad:function(e){console.log("onLoad",e)},onShow:function(){this.useInfo()},onPullDownRefresh:function(){this.useInfo()},onShareAppMessage:function(e){return(0,s.onShareAppMessage)(e)},methods:{useInfo:function(){var e=i(t.default.mark(function e(){var n;return t.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getLoginUser();case 2:n=e.sent,this.userInfo=n,this.userFace=n.userFace,this.userNick=decodeURIComponent(n.userNick);case 6:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),getLoginUser:function(){return new Promise(function(n,o){var t={};(0,s.request)(u.GetLoginUser,t).then(function(o){e.setStorageSync("UserInfo",o.UserInfo),n(o.UserInfo)})})},userFaceClick:function(){this.showPopup=!this.showPopup},togglePopup:function(){this.showPopup=!this.showPopup},preview:function(e,n){n=[n],(0,s.previewImage)(e,n)},chooseImageCamera:function(){var n=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera"],success:function(o){var t=o.tempFilePaths[0];e.uploadFile({url:"https://unidemo.dcloud.net.cn/upload",filePath:t,fileType:"image",name:"data",success:function(o){console.log("uploadImage success, res is:",o),e.showToast({title:"上传成功",icon:"success",duration:1e3}),n.imageSrc=t,console.log(n.imageSrc),n.uploadImage()},fail:function(n){console.log("uploadImage fail",n),e.showModal({content:n.errMsg,showCancel:!1})}})},fail:function(e){console.log("chooseImage fail",e)}})},chooseImageAlbum:function(){var n=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(o){var t=o.tempFilePaths[0];e.uploadFile({url:"https://unidemo.dcloud.net.cn/upload",filePath:t,fileType:"image",name:"data",success:function(e){console.log("uploadImage success, res is:",e),(0,s.showToast)("上传成功"),n.imageSrc=t,console.log(n.imageSrc),n.uploadImage()},fail:function(e){console.log("uploadImage fail",e),(0,s.showToast)(e.errMsg)}})},fail:function(e){console.log("chooseImage fail",e)}})},uploadImage:function(){var e=this,n=this.imageSrc,o={};(0,s.upload)(u.OrderDryingUpload,o,n).then(function(n){var o=JSON.parse(n),t=o.PicUrl;e.updateUserInfo(t)})},updateUserInfo:function(e){var n=this,o=e,t={UserFace:o};(0,s.request)(u.UpdateUserInfo,t).then(function(e){(0,s.showToast)("更换头像成功！"),n.showPopup=!n.showPopup,n.useInfo()})},userNickClick:function(){(0,s.navigateTo)("../settingUserNick/settingUserNick")},clear:function(){var n="是否确定退出登录？";(0,s.defaultShowModal)(n).then(function(n){if(n.confirm){console.log("用户点击确定");try{(0,s.navigateBack)(1),e.clearStorageSync()}catch(o){(0,s.showToast)("退出登录失败")}}else n.cancel&&console.log("用户点击取消")})}}};n.default=f}).call(this,o("543d")["default"])},"2f6e":function(e,n,o){"use strict";var t=function(){var e=this,n=e.$createElement;e._self._c},s=[];o.d(n,"a",function(){return t}),o.d(n,"b",function(){return s})},"7dae":function(e,n,o){},"914c":function(e,n,o){"use strict";o.r(n);var t=o("087d"),s=o.n(t);for(var u in t)"default"!==u&&function(e){o.d(n,e,function(){return t[e]})}(u);n["default"]=s.a},9786:function(e,n,o){"use strict";o.r(n);var t=o("2f6e"),s=o("914c");for(var u in s)"default"!==u&&function(e){o.d(n,e,function(){return s[e]})}(u);o("d92b");var c=o("2877"),a=Object(c["a"])(s["default"],t["a"],t["b"],!1,null,null,null);n["default"]=a.exports},d92b:function(e,n,o){"use strict";var t=o("7dae"),s=o.n(t);s.a}},[["3e2a","common/runtime","common/vendor"]]]);